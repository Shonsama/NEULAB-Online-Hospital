webpackJsonp([1],{"+9Aa":function(e,t){},"+PXS":function(e,t){},"/Kbl":function(e,t){},"5FDE":function(e,t){},"7zck":function(e,t){},"8JDy":function(e,t){},"99YD":function(e,t){},Ai6W:function(e,t){},BeTt:function(e,t){},Bi92:function(e,t){},FkUm:function(e,t){},GDVW:function(e,t){},GGEP:function(e,t){},Iai1:function(e,t){},IqCW:function(e,t){},KH0U:function(e,t){},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("7+uW"),s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-app",{attrs:{id:"sandbox",dark:e.dark}},[i("v-toolbar",{attrs:{app:"",dark:"",absolute:"",dense:"",color:"primary"}},[i("v-toolbar-title",[i("v-icon",[e._v("local_hospital")]),e._v("\n      NeuHospital\n    ")],1),e._v(" "),i("v-spacer"),e._v(" "),i("v-toolbar-items",[i("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[i("v-btn",e._g({attrs:{flat:""}},a),[e._v("\n            我的身份："+e._s(e.$store.state.user.type)+"\n            "),i("v-icon",[e._v("\n              arrow_drop_down\n            ")])],1)]}}])},[e._v(" "),i("v-list",e._l(e.items,function(t,a){return i("v-list-tile",{key:a,on:{click:function(i){return e.$router.push(t.id)}}},[i("v-list-tile-title",[e._v(e._s(t.title))])],1)}),1)],1)],1),e._v(" "),i("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[i("v-toolbar-item",[i("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[i("v-btn",e._g({attrs:{flat:"",icon:""}},a),[i("v-icon",[e._v("\n                settings\n              ")])],1)]}}])},[e._v(" "),i("v-card",[i("v-container",[i("v-switch",{attrs:{label:"黑暗模式"},model:{value:e.dark,callback:function(t){e.dark=t},expression:"dark"}})],1)],1)],1)],1),e._v(" "),i("v-toolbar-item",[i("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on2;return[i("v-btn",e._g({attrs:{flat:"",icon:""}},a),[i("v-icon",[e._v("\n                person\n              ")])],1)]}}])})],1)],1)],1),e._v(" "),i("v-content",[i("v-card",[i("router-view")],1)],1)],1)},staticRenderFns:[]};var n=i("VU/8")({name:"App",data:function(){return{item_now:"",items:[{title:"医院管理员",icon:"dashboard",id:"/BasicInfo"},{title:"挂号收费员",icon:"account_box",id:"/RegisterCharge"},{title:"门诊医生",icon:"assignment",id:"/Diagnostician"},{title:"医技医生",icon:"credit_card",id:"/Meditech"},{title:"药房操作员",icon:"card_travel",id:"/Pharmacy"},{title:"财务管理员",icon:"calendar_today",id:"/Finance"}],right:null,dark:!1,drawers:["Default (no property)","Permanent","Temporary"],primaryDrawer:{model:null,type:"default (no property)"},footer:{inset:!1}}},methods:{send:function(){}}},s,!1,function(e){i("qFKv")},null,null).exports,r=i("/ocq"),l={name:"HelloWorld",data:function(){return{dialog:!1,show1:!1,isDoctor:!1,dialog_err:!1,dialog_suc:!1,msg_suc:"success",msg_err:"error",account:"",password:"",route:"",states:["门诊医生","医技医生","挂号收费员","药房操作员","财务管理员","医院管理员"]}},props:{source:String},computed:{},watch:{dialog_suc:function(e){var t=this;e&&setTimeout(function(){return t.dialog_suc=!1},1e3)},dialog:function(e){var t=this;e&&setTimeout(function(){return t.network_out},1e4)},dialog_err:function(e){var t=this;e&&setTimeout(function(){return t.dialog_err=!1},1e3)}},methods:{checkLogin:function(){var e,t=this,i=this.HOME+"/user/check-valid";e=t.isDoctor?{doctor_account:t.account,doctor_password:t.password}:{user_account:t.account,user_password:t.password},this.$http.post(i,e).then(function(e){if(console.log(e.data),200===e.data.code){var i,a=window.localStorage;t.dialog_suc=!0,t.msg_suc="登陆成功",t.isDoctor?(i={account:e.data.data.doctor.doctor_account,department_id:e.data.data.doctor.doctor_department_id,id:e.data.data.doctor.doctor_id,name:e.data.data.doctor.doctor_name,type:e.data.data.doctor.doctor_type},console.log(i),a.clear(),a.setItem("account",e.data.data.doctor.doctor_account),a.setItem("department_id",e.data.data.doctor.doctor_department_id),a.setItem("id",e.data.data.doctor.doctor_id),a.setItem("name",e.data.data.doctor.doctor_name),a.setItem("type",e.data.data.doctor.doctor_type),sessionStorage.setItem("token",e.data.data.token),"挂号收费员"===i.type?t.$router.push("/RegisterCharge"):"门诊医生"===i.type?t.$router.push("/Diagnostician"):"医技医生"===i.type?t.$router.push("/Meditech"):"药房操作员"===i.type?t.$router.push("/Pharmacy"):"财务管理员"===i.type?t.$router.push("/Finance"):"医院管理员"===i.type&&t.$router.push("/BasicInfo")):(i={account:e.data.data.user.user_account,department_id:e.data.data.user.user_department_id,id:e.data.data.user.user_id,name:e.data.data.user.user_name,type:e.data.data.user.user_type},a.clear(),a.setItem("account",e.data.data.user.user_account),a.setItem("department_id",e.data.data.user.user_department_id),a.setItem("id",e.data.data.user.user_id),a.setItem("name",e.data.data.user.user_name),a.setItem("type",e.data.data.user.user_type),sessionStorage.setItem("token",e.data.data.token),"挂号收费员"===i.type?t.$router.push("/RegisterCharge"):"门诊医生"===i.type?t.$router.push("/Diagnostician"):"医技医生"===i.type?t.$router.push("/Meditech"):"药房操作员"===i.type?t.$router.push("/Pharmacy"):"财务管理员"===i.type?t.$router.push("/Finance"):"医院管理员"===i.type&&t.$router.push("/BasicInfo"))}else t.dialog_err=!0,t.msg_err="登陆失败"})}}},o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("section",[i("v-parallax",{attrs:{src:"https://cdn.vuetifyjs.com/images/backgrounds/vbanner.jpg",height:"650"}},[i("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",{attrs:{color:"primary",dark:""}},[i("v-card-text",[e._v("\n            请稍等\n            "),i("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),i("v-flex",{attrs:{shrink:""}},[i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialog_err,expression:"dialog_err"}],staticStyle:{"white-space":"nowrap"}},[i("v-alert",{attrs:{value:!0,type:"error"}},[e._v("\n              "+e._s(e.msg_err)+"\n            ")])],1)])],1),e._v(" "),i("v-flex",{attrs:{shrink:""}},[i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialog_suc,expression:"dialog_suc"}],staticStyle:{"white-space":"nowrap"}},[i("v-alert",{attrs:{value:!0,type:"success"}},[e._v("\n              "+e._s(e.msg_suc)+"\n            ")])],1)])],1),e._v(" "),i("v-layout",{staticClass:"white--text",attrs:{column:"","align-center":"","justify-center":""}},[i("h1",{staticClass:"white--text mb-2 display-1 text-xs-center"},[i("v-icon",{staticStyle:{"margin-bottom":"2px"},attrs:{dark:"",large:""}},[e._v("\n            local_hospital\n          ")]),e._v("\n          NeuHospital\n        ")],1),e._v(" "),i("v-card",{staticClass:"elevation-2",attrs:{width:"350"}},[i("v-layout",{attrs:{"justify-center":"",column:""}},[i("v-flex",{attrs:{xs12:"",sm10:"",md8:"",lg6:""}},[i("v-layout",{staticClass:"mt-4",attrs:{"justify-center":"",column:"","align-center":""}},[i("div",[i("h6",{staticClass:"title"},[e._v("登录")])]),e._v(" "),i("div",[i("h6",{staticClass:"body-1 font-weight-regular mt-2"},[e._v("使用你的云医院账号")])])])],1),e._v(" "),i("v-flex",{staticClass:"mr-4 ml-4",attrs:{xs12:"",sm10:"",md8:"",lg8:""}},[i("v-text-field",{attrs:{label:"用户名","prepend-inner-icon":"person"},model:{value:e.account,callback:function(t){e.account=t},expression:"account"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-4 ml-4",attrs:{xs12:"",sm6:""}},[i("v-text-field",{attrs:{"prepend-inner-icon":"edit","append-icon":e.show1?"visibility":"visibility_off",type:e.show1?"text":"password",name:"input-10-1",label:"密码",counter:""},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-4 ml-4",attrs:{row:"",xs12:"",sm12:"",md12:""}},[i("v-checkbox",{attrs:{primary:"",label:"是否为医生","hide-details":""},model:{value:e.isDoctor,callback:function(t){e.isDoctor=t},expression:"isDoctor"}}),e._v(" "),i("v-spacer")],1),e._v(" "),i("v-flex",{staticClass:"text-xs-center mb-3 mt-3",attrs:{xs12:"",sm6:""}},[i("v-btn",{attrs:{color:"primary"},on:{click:e.checkLogin}},[e._v("\n                  登录\n                ")])],1)],1)],1)],1)],1)],1)])},staticRenderFns:[]};var c=i("VU/8")(l,o,!1,function(e){i("Iai1")},"data-v-4013c2bb",null).exports,d={data:function(){return{bill:{},isPrint:!1,dialog_bill:!1,dialog:!1,dialog_add:!1,dialog_suc:!1,msg_suc:"success",msg_err:"error",dialog_err:!1,isExist:!1,register_items:[],headers:[{text:"挂号ID",align:"left",value:"register_info_id"},{text:"患者名称",value:"register_info_patient_id"},{text:"状态",value:"register_info_state"},{text:"所属科室",value:"register_info_doctor_id"},{text:"所属医生",value:"register_info_doctor_id"},{text:"挂号费",value:"register_info_fee"},{text:"操作",value:"operation",sortable:!1}],valid:!1,disabled:!0,register_info_id:"",patient_record_id:"",patient_gender:"",patient_name:"",patient_credit_id:"",patient_birthDate:"",patient_address:"",patient_age:"",checkbox:"",bill_sum:"",doctor_id:"",doctor_name:"",department_name:"",departmentId:"",genders:["男","女"],registers:[],register_level:"",payCates:[],paycate:"",registerLevel:"",departments:[],doctors:[],creditRules:[function(e){return!!e||"身份证号是必须的"},function(e){return 18===e.length||"身份证号必须为18位"}],nameRules:[function(e){return!!e||"姓名是必须的"}],genderRules:[function(e){return!!e||"性别是必须的"}],doctorRules:[function(e){return!!e||"医生是必须的"}],departRules:[function(e){return!!e||"科室是必须的"}],registerRules:[function(e){return!!e||"挂号级别是必须的"}],payRules:[function(e){return!!e||"结算方式是必须的"}]}},watch:{bill:function(e){e.bill_id?this.isPrint=!0:this.isPrint=!1},checkbox:function(e){e?this.bill_sum++:this.bill_sum--},patient_birthDate:function(e){var t=new Date;console.log(e);var i=new Date(e.replace(/-/,"/"));this.patient_age=t.getFullYear()-i.getFullYear()},departmentId:function(e){this.load_doctors()},register_level:function(e){this.bill_sum=e.register_level_fee,this.load_doctors()},dialog_suc:function(e){var t=this;e&&setTimeout(function(){return t.dialog_suc=!1},1e3)},dialog_err:function(e){var t=this;e&&setTimeout(function(){return t.dialog_err=!1},1e3)}},mounted:function(){this.load_constants(),this.load_departs(),this.load_registerLevels()},methods:{filterDepart:function(e){return"临床科室"===e.department_cat},change:function(){this.disabled=!this.disabled},refresh:function(){this.dialog_add=!1},addPatient:function(){var e=this.HOME+"/patient/add",t=this,i={patient_gender:"男"===t.patient_gender?"true":"false",patient_name:t.patient_name,patient_credit_id:t.patient_credit_id,patient_birthDate:t.patient_birthDate,patient_address:t.patient_address,patient_age:t.patient_age};this.dialog_add=!1,this.dialog=!0,this.$http.post(e+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data),200===e.data.code?(t.patient_record_id=e.data.data.patient_record_id,t.dialog=!1,t.dialog_suc=!0,t.msg_suc="添加成功"):(t.dialog=!1,t.dialog_err=!0,t.msg_err="添加失败")})},get_patient_register:function(){var e=this.HOME+"/user-service/refund/get-paid-registers",t=this,i={patient_id:t.patient_record_id};this.$http.post(e+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data),t.register_items=e.data.data})},get_patient:function(){var e=this.HOME+"/patient/get-by-patient-id",t=this,i={patient_record_id:t.patient_record_id};this.$http.post(e+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data),e.data.data?(e.data.data.patient_gender?t.patient_gender="男":t.patient_gender="女",t.patient_name=e.data.data.patient_name,t.patient_credit_id=e.data.data.patient_credit_id,t.patient_birthDate=e.data.data.patient_birthDate.substring(0,10),t.patient_age=e.data.data.patient_age,t.patient_address=e.data.data.patient_address,t.dialog_suc=!0,t.msg_suc="患者信息已显示",t.get_patient_register()):(t.dialog_err=!0,t.msg_err="不存在该病人，请添加",t.patient_gender="",t.patient_name="",t.patient_age="",t.patient_credit_id="",t.patient_birthDate="",t.patient_address="")})},load_constants:function(){var e=this,t=this.HOME+"/maintenance/constant/get";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{constant_type:"payment_type"}).then(function(t){console.log(t.data),e.payCates=t.data.data})},load_registerLevels:function(){var e=this,t=this.HOME+"/maintenance/register-level/get-all";this.$http.post(t+"?token="+sessionStorage.getItem("token")).then(function(t){console.log(t.data),e.registers=t.data.data})},load_departs:function(){var e=this,t=this.HOME+"/maintenance/department/get-all";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{}).then(function(t){console.log(t.data),e.departments=t.data.data})},load_doctors:function(){var e=this;console.log(e.departmentId),console.log(e.register_level);var t={department_id:e.departmentId.department_id,register_level_id:e.register_level.register_level_id},i=this.HOME+"/register/get-all-doctor";this.$http.post(i+"?token="+sessionStorage.getItem("token"),t).then(function(t){console.log(t.data),e.doctors=t.data.data})},refund:function(e){var t=this,i={register_id:e};t.dialog=!0;var a=this.HOME+"/register/refund";this.$http.post(a+"?token="+sessionStorage.getItem("token"),i).then(function(e){200===e.data.code?(console.log(e.data),t.bill=e.data.data,t.dialog_suc=!0,t.msg_suc="退号成功",t.dialog_bill=!0,t.get_patient_register(),t.dialog=!1):(t.dialog_err=!0,t.msg_err="退号失败",t.get_patient_register(),t.dialog=!1)})},print_bill:function(){var e=this,t=this.HOME+"/register/print-bill",i={bill_actual_sum:e.bill_sum,bill_sum:e.bill_sum,bill_type:"挂号费",bill_register_id:e.register_info_id,bill_user_id:e.$store.state.user.id,bill_state:"正常"};this.$http.post(t+"?token="+sessionStorage.getItem("token"),i).then(function(t){e.bill=t.data.data,e.dialog_bill=!0,console.log(t.data)})},reprint_bill:function(){var e=this,t=this.HOME+"/bill/reprint",i={bill_id:e.bill.bill_id};e.bill.bill_id?this.$http.post(t+"?token="+sessionStorage.getItem("token"),i).then(function(t){e.bill=t.data.data,console.log(t.data),e.dialog_bill=!0,e.dialog_suc=!0,e.msg_suc="发票号重打成功"}):(this.dialog_err=!0,this.msg_err="发票号为空")},overprint:function(){var e=this,t=this.HOME+"/bill/overprint",i={bill_id:e.bill.bill_id};e.bill.bill_id?this.$http.post(t+"?token="+sessionStorage.getItem("token"),i).then(function(t){e.bill=t.data.data,e.dialog_bill=!0,console.log(t.data),e.dialog_suc=!0,e.msg_suc="发票号补打成功",e.dialog_bill=!0}):(this.dialog_err=!0,this.msg_err="发票号为空")},submit_register:function(){var e,t=this,i=this.HOME+"/register/submit";e=t.checkbox?"true":"false";var a={register_info_id:"",register_info_state:"未看诊",register_info_fee:t.bill_sum,register_info_pay_type:t.paycate,register_info_doctor_id:t.doctor_id.doctor_id,register_info_patient_id:t.patient_record_id,register_info_user_id:t.$store.state.user.id,register_info_records_book:e};console.log(a),this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data),200===e.data.code?(t.dialog_suc=!0,t.msg_suc="挂号成功",t.register_info_id=e.data.data.register_info_id,t.dialog=!0,t.print_bill(),t.get_patient_register()):(t.dialog_err=!0,t.msg_err="挂号失败"),t.dialog=!1})}}},_={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-dialog",{attrs:{"hide-overlay":"",width:"400"},model:{value:e.dialog_bill,callback:function(t){e.dialog_bill=t},expression:"dialog_bill"}},[i("v-layout",{attrs:{"justify-center":""}},[i("v-flex",[i("v-card",[i("v-card-title",[e._v("\n            发票\n          ")]),e._v(" "),i("v-card-text",[i("v-text-field",{attrs:{label:"发票号",readonly:""},model:{value:e.bill.bill_id,callback:function(t){e.$set(e.bill,"bill_id",t)},expression:"bill.bill_id"}}),e._v(" "),i("v-text-field",{attrs:{label:"挂号ID",readonly:""},model:{value:e.bill.bill_register_id,callback:function(t){e.$set(e.bill,"bill_register_id",t)},expression:"bill.bill_register_id"}}),e._v(" "),i("v-text-field",{attrs:{label:"发票总额",readonly:""},model:{value:e.bill.bill_sum,callback:function(t){e.$set(e.bill,"bill_sum",t)},expression:"bill.bill_sum"}}),e._v(" "),i("v-text-field",{attrs:{label:"发票类型",readonly:""},model:{value:e.bill.bill_state,callback:function(t){e.$set(e.bill,"bill_state",t)},expression:"bill.bill_state"}}),e._v(" "),i("v-text-field",{attrs:{label:"打印时间",readonly:""},model:{value:e.bill.bill_time,callback:function(t){e.$set(e.bill,"bill_time",t)},expression:"bill.bill_time"}}),e._v(" "),i("v-text-field",{attrs:{label:"收费类别",readonly:""},model:{value:e.bill.bill_type,callback:function(t){e.$set(e.bill,"bill_type",t)},expression:"bill.bill_type"}}),e._v(" "),i("v-text-field",{attrs:{label:"收费员ID",readonly:""},model:{value:e.bill.bill_user_id,callback:function(t){e.$set(e.bill,"bill_user_id",t)},expression:"bill.bill_user_id"}})],1)],1)],1)],1)],1),e._v(" "),i("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"400"},model:{value:e.dialog_add,callback:function(t){e.dialog_add=t},expression:"dialog_add"}},[i("v-layout",{attrs:{"justify-center":""}},[i("v-flex",[i("v-card",[i("v-card-text",[i("v-text-field",{attrs:{rules:e.nameRules,label:"姓名",placeholder:"请输入姓名",required:""},model:{value:e.patient_name,callback:function(t){e.patient_name=t},expression:"patient_name"}}),e._v(" "),i("v-select",{attrs:{rules:e.genderRules,items:e.genders,label:"性别",required:"",placeholder:"请选择性别"},model:{value:e.patient_gender,callback:function(t){e.patient_gender=t},expression:"patient_gender"}}),e._v(" "),i("v-textarea",{attrs:{label:"家庭住址",placeholder:"请输入家庭住址",rows:"1"},model:{value:e.patient_address,callback:function(t){e.patient_address=t},expression:"patient_address"}}),e._v(" "),i("v-text-field",{attrs:{rules:e.creditRules,counter:18,label:"身份证号",placeholder:"请输入身份证号",required:""},model:{value:e.patient_credit_id,callback:function(t){e.patient_credit_id=t},expression:"patient_credit_id"}}),e._v(" "),i("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.patient_birthDate,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(t){e.patient_birthDate=t},"update:return-value":function(t){e.patient_birthDate=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[i("v-text-field",e._g({attrs:{label:"出生日期",required:"",readonly:"",placeholder:"请选择出生日期"},model:{value:e.patient_birthDate,callback:function(t){e.patient_birthDate=t},expression:"patient_birthDate"}},a))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[e._v(" "),i("v-date-picker",{attrs:{"no-title":"",scrollable:"",locale:"zh-cn"},model:{value:e.patient_birthDate,callback:function(t){e.patient_birthDate=t},expression:"patient_birthDate"}},[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v("取消")]),e._v(" "),i("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){return e.$refs.menu.save(e.patient_birthDate)}}},[e._v("确定")])],1)],1),e._v(" "),i("v-text-field",{attrs:{label:"年龄",required:"",placeholder:"请输入年龄"},model:{value:e.patient_age,callback:function(t){e.patient_age=t},expression:"patient_age"}})],1),e._v(" "),i("v-divider",{staticClass:"mt-5"}),e._v(" "),i("v-card-actions",[i("v-btn",{attrs:{flat:""},on:{click:e.refresh}},[e._v("取消")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.addPatient}},[e._v("添加")])],1)],1)],1)],1)],1),e._v(" "),i("v-flex",{attrs:{shrink:""}},[i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialog_err,expression:"dialog_err"}],staticStyle:{"white-space":"nowrap"}},[i("v-alert",{attrs:{value:!0,type:"error"}},[e._v("\n          "+e._s(e.msg_err)+"\n        ")])],1)])],1),e._v(" "),i("v-flex",{attrs:{shrink:""}},[i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialog_suc,expression:"dialog_suc"}],staticStyle:{"white-space":"nowrap"}},[i("v-alert",{attrs:{value:!0,type:"success"}},[e._v("\n          "+e._s(e.msg_suc)+"\n        ")])],1)])],1),e._v(" "),i("v-card",{staticClass:"scroll-y"},[i("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",{attrs:{color:"primary",dark:""}},[i("v-card-text",[e._v("\n          请稍等\n          "),i("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),i("v-toolbar",{attrs:{extended:"",flat:"",dense:""},scopedSlots:e._u([{key:"extension",fn:function(){return[i("v-flex",{attrs:{xs2:""}},[i("v-text-field",{attrs:{"prepend-inner-icon":"assignment",name:"login",label:"发票号",type:"text",disabled:e.disabled},model:{value:e.bill.bill_id,callback:function(t){e.$set(e.bill,"bill_id",t)},expression:"bill.bill_id"}})],1),e._v(" "),i("v-btn",{attrs:{small:"",icon:"",flat:"",color:"primary"},on:{click:e.reprint_bill}},[i("v-icon",[e._v("\n            refresh\n          ")])],1),e._v(" "),i("v-btn",{attrs:{small:"",icon:"",flat:"",color:"primary"},on:{click:e.overprint}},[i("v-icon",[e._v("\n            print\n          ")])],1),e._v(" "),i("v-spacer")]},proxy:!0}])},[i("v-toolbar-title",[e._v("挂号信息")])],1),e._v(" "),i("v-divider"),e._v(" "),i("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-container",[i("v-layout",[i("div",{staticClass:"title font-weight-light"},[e._v("患者信息查询")])]),e._v(" "),i("v-layout",[i("v-flex",{attrs:{xs12:"",md6:"",lg3:""}},[i("v-text-field",{attrs:{label:"病历号",required:""},model:{value:e.patient_record_id,callback:function(t){e.patient_record_id=t},expression:"patient_record_id"}})],1),e._v(" "),i("v-btn",{staticStyle:{"margin-top":"20px"},attrs:{color:"primary",flat:"",icon:""},on:{click:e.get_patient}},[i("v-icon",[e._v("search")])],1),e._v(" "),i("v-btn",{staticStyle:{"margin-top":"20px"},attrs:{color:"primary",flat:"",icon:""},on:{click:function(t){e.dialog_add=!e.dialog_add}}},[i("v-icon",[e._v("add")])],1)],1),e._v(" "),i("v-layout",[i("div",{staticClass:"title font-weight-light"},[e._v("患者信息确认")])]),e._v(" "),i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",md6:"",lg2:""}},[i("v-text-field",{attrs:{readonly:"",label:"姓名",placeholder:"显示姓名",required:""},model:{value:e.patient_name,callback:function(t){e.patient_name=t},expression:"patient_name"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",md6:"",lg2:""}},[i("v-select",{attrs:{readonly:"",items:e.genders,label:"性别",required:"",placeholder:"显示性别"},model:{value:e.patient_gender,callback:function(t){e.patient_gender=t},expression:"patient_gender"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",md6:"",lg4:""}},[i("v-textarea",{attrs:{readonly:"",label:"家庭住址",placeholder:"显示家庭住址",rows:"1"},model:{value:e.patient_address,callback:function(t){e.patient_address=t},expression:"patient_address"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",md6:"",lg4:""}},[i("v-text-field",{attrs:{readonly:"",counter:18,label:"身份证号",placeholder:"显示身份证号",required:""},model:{value:e.patient_credit_id,callback:function(t){e.patient_credit_id=t},expression:"patient_credit_id"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",md6:"",lg2:""}},[i("v-text-field",{attrs:{label:"出生日期",required:"",readonly:"",placeholder:"显示出生日期"},model:{value:e.patient_birthDate,callback:function(t){e.patient_birthDate=t},expression:"patient_birthDate"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",md6:"",lg2:""}},[i("v-text-field",{attrs:{label:"年龄",required:"",readonly:"",placeholder:"显示年龄"},model:{value:e.patient_age,callback:function(t){e.patient_age=t},expression:"patient_age"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",md6:"",lg2:""}},[i("v-select",{attrs:{items:e.payCates,rules:e.payRules,"item-text":"constant_name",item_value:"constant_id",label:"结算类别",required:"",placeholder:"请选择结算类别"},model:{value:e.paycate,callback:function(t){e.paycate=t},expression:"paycate"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",md6:"",lg2:""}},[i("v-select",{attrs:{items:e.registers,rules:e.registerRules,"item-text":"register_level_name",item_value:"register_level_id","return-object":"",label:"挂号级别",required:"",placeholder:"请选择挂号级别"},model:{value:e.register_level,callback:function(t){e.register_level=t},expression:"register_level"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",md6:"",lg2:""}},[i("v-select",{attrs:{items:e.departments.filter(e.filterDepart),"item-text":"department_name",item_value:"department_id",rules:e.departRules,label:"科室","return-object":"",required:"",placeholder:"请选择科室"},model:{value:e.departmentId,callback:function(t){e.departmentId=t},expression:"departmentId"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",md6:"",lg2:""}},[i("v-select",{attrs:{items:e.doctors,"item-text":"doctor_name","item-value":"doctor_id",rules:e.doctorRules,label:"看诊医生","return-object":"",required:"",placeholder:"请选择看诊医生"},model:{value:e.doctor_id,callback:function(t){e.doctor_id=t},expression:"doctor_id"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",md6:"",lg2:""}},[i("v-text-field",{attrs:{label:"应收金额",placeholder:"未知",disabled:""},model:{value:e.bill_sum,callback:function(t){e.bill_sum=t},expression:"bill_sum"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",md6:"",lg2:""}},[i("v-checkbox",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticStyle:{"margin-left":"10px"},attrs:{value:"1",label:"是否需要病历本","data-vv-name":"checkbox",type:"checkbox",required:""},model:{value:e.checkbox,callback:function(t){e.checkbox=t},expression:"checkbox"}})],1),e._v(" "),i("v-btn",{staticStyle:{"margin-top":"25px"},attrs:{small:"",color:"primary"},on:{click:e.submit_register}},[e._v("挂号")])],1)],1)],1)],1),e._v(" "),i("v-card",{staticClass:"scroll-y"},[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v("挂号信息列表")]),e._v(" "),i("v-spacer")],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1 ",attrs:{headers:e.headers,items:e.register_items,"item-key":"register_info_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.register_info_id))]),e._v(" "),i("td",[e._v(e._s(t.item.register_info_patient_id))]),e._v(" "),i("td",[e._v(e._s(t.item.register_info_state))]),e._v(" "),i("td",[e._v(e._s(t.item.register_info_doctor_id))]),e._v(" "),i("td",[e._v(e._s(t.item.register_info_doctor_id))]),e._v(" "),i("td",[e._v(e._s(t.item.register_info_fee))]),e._v(" "),i("td",[i("v-btn",{staticClass:"ml-3",attrs:{small:"",flat:"",icon:"",right:"",disabled:"已挂号"!=t.item.register_info_state,color:"primary"},on:{click:function(i){return e.refund(t.item.register_info_id)}}},[e._v("\n            退号\n          ")])],1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1)},staticRenderFns:[]};var m=i("VU/8")(d,_,!1,function(e){i("KH0U")},"data-v-0e592207",null).exports,v={data:function(){return{bill:{},date:["",""],show:!1,dialog:"",dialog_add:!1,dialog_err:!1,dialog_suc:!1,dialog_bill:!1,msg_suc:"success",msg_err:"error",selected:[],selected1:[],selected_con:[],patient_record_id:"",patient_gender:"",patient_name:"",patient_credit_id:"",patient_birthDate:"",patient_address:"",patient_age:"",disabled:!0,desserts:[],desserts1:[],headers:[{text:"挂号ID",align:"left",value:"code"},{text:"名称",value:"name"},{text:"状态",value:"state"},{text:"类型",value:"type"},{text:"金额",value:"number"},{text:"操作",value:"operation",sortable:!1}],headers1:[{text:"挂号ID",align:"left",value:"code"},{text:"名称",value:"name"},{text:"状态",value:"state"},{text:"类型",value:"type"},{text:"金额",value:"number"},{text:"收费时间",value:"time"},{text:"操作",value:"operation",sortable:!1}],headers_con:[{text:"名称",value:"medicine.medicine_name"},{text:"编码",value:"prescription_medicine_id"},{text:"金额",value:"prescription_unit_price"},{text:"数量",value:"prescription_refund_available_num"},{text:"操作",value:"operation",sortable:!1}],desserts_con:[],content:[],quantity:"",quantity_sub:"",medicine:"",prescription:""}},computed:{filterDesserts:function(){return this.desserts1.filter(this.filterDate)}},watch:{dialog_suc:function(e){var t=this;e&&setTimeout(function(){return t.dialog_suc=!1},1e3)},dialog:function(e){var t=this;e&&setTimeout(function(){return t.dialog=!1},3e3)},dialog_err:function(e){var t=this;e&&setTimeout(function(){return t.dialog_err=!1},1e3)}},mounted:function(){},methods:{returnArray:function(e){for(var t=[],i=1;i<=e;i++)t.push(i);return t},filterDate:function(e){return this.date[0]<=new Date(e.time)&&this.date[1]>=new Date(e.time)||""===this.date[0]||""===this.date[1]},chargeItem:function(e){var t=this;console.log(e);var i=this.HOME+"/pay/pay",a={id:e.id,type:e.type,user_id:this.$store.state.user.id,register_id:e.code};t.dialog=!0,this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data),200===e.data.code?(t.bill=e.data.data,t.dialog_bill=!0,t.getItem(),t.getItem_charge(),t.dialog=!1,t.dialog_suc=!0,t.msg_suc="缴费成功"):(t.dialog_err=!0,t.msg_err="缴费失败")})},returnItem:function(e){console.log(e);var t=this,i=this.HOME+"/user-service/refund",a={id:e.id,type:e.type};t.dialog=!0,this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data),200===e.data.code?(t.bill=e.data.data,t.dialog_bill=!0,t.getItem(),t.dialog=!1,t.dialog_suc=!0,t.msg_suc="退费成功"):(t.dialog_err=!0,t.msg_err="退费失败")})},returnItemMed:function(){var e=this,t=this.HOME+"/user-service/refund/return-prescription",i={prescription_id:e.prescription.id,prescription_content_id:e.medicine.prescription_content_id,prescription_num:e.quantity_sub},a={id:e.prescription.id,type:e.prescription.type};e.quantity_sub="",console.log(i),this.$http.post(t+"?token="+sessionStorage.getItem("token"),i).then(function(t){console.log(t.data),e.returnItem(a),e.show=!e.show})},getContent:function(e){console.log(e);var t=this,i=this.HOME+"/user-service/refund/prescription/get-content",a={prescription_id:e.id};this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data),t.desserts_con=e.data.data})},getItem:function(){var e=this.HOME+"/pay/get-medical-skill-canceled-or-paid",t=this.HOME+"/pay/get-prescription-returned-or-paid",i=this,a={register_info_patient_id:i.patient_record_id};i.desserts1=[],this.$http.post(e+"?token="+sessionStorage.getItem("token"),a).then(function(e){var t;for(console.log(e.data),t=0;t<e.data.data.length;t++){var a={id:e.data.data[t].medical_skill_id,code:e.data.data[t].medical_skill_register_info_id,name:e.data.data[t].medical_skill_name,state:e.data.data[t].medical_skill_execute_state,type:e.data.data[t].medical_skill_type,number:e.data.data[t].medical_skill_fee,time:e.data.data[t].medical_skill_pay_time,hint:e.data.data[t].medical_skill_id+e.data.data[t].medical_skill_type};console.log(a),i.desserts1.push(a)}}),this.$http.post(t+"?token="+sessionStorage.getItem("token"),a).then(function(e){var t;for(console.log(e.data),t=0;t<e.data.data.length;t++){var a={id:e.data.data[t].prescription_id,code:e.data.data[t].prescription_register_info_id,name:e.data.data[t].prescription_name,state:e.data.data[t].prescription_execute_state,type:e.data.data[t].prescription_type,number:e.data.data[t].prescription_fee,time:e.data.data[t].prescription_pay_time,hint:e.data.data[t].prescription_id+e.data.data[t].prescription_type};console.log(a),i.desserts1.push(a)}})},getItem_charge:function(){var e=this.HOME+"/pay/get-prescription-sent",t=this.HOME+"/pay/get-medical-skill-drew",i=this,a={register_info_patient_id:i.patient_record_id};i.desserts=[],this.$http.post(t+"?token="+sessionStorage.getItem("token"),a).then(function(e){var t;for(console.log(e.data),t=0;t<e.data.data.length;t++){var a={id:e.data.data[t].medical_skill_id,code:e.data.data[t].medical_skill_register_info_id,name:e.data.data[t].medical_skill_name,state:e.data.data[t].medical_skill_execute_state,type:e.data.data[t].medical_skill_type,number:e.data.data[t].medical_skill_fee,hint:e.data.data[t].medical_skill_id+e.data.data[t].medical_skill_type};console.log(a),i.desserts.push(a)}}),this.$http.post(e+"?token="+sessionStorage.getItem("token"),a).then(function(e){var t;for(console.log(e.data),t=0;t<e.data.data.length;t++){var a={id:e.data.data[t].prescription_id,code:e.data.data[t].prescription_register_info_id,name:e.data.data[t].prescription_name,state:e.data.data[t].prescription_execute_state,type:e.data.data[t].prescription_type,number:e.data.data[t].prescription_fee,hint:e.data.data[t].prescription_id+e.data.data[t].prescription_type};console.log(a),i.desserts.push(a)}})},reprint_bill:function(){var e=this,t=this.HOME+"/bill/reprint",i={bill_id:e.bill.bill_id};e.bill.bill_id?this.$http.post(t+"?token="+sessionStorage.getItem("token"),i).then(function(t){e.bill=t.data.data,console.log(t.data),e.dialog_bill=!0,e.dialog_suc=!0,e.msg_suc="发票号重打成功"}):(this.dialog_err=!0,this.msg_err="发票号为空")},overprint:function(){var e=this,t=this.HOME+"/bill/overprint",i={bill_id:e.bill.bill_id};e.bill.bill_id?this.$http.post(t+"?token="+sessionStorage.getItem("token"),i).then(function(t){e.bill=t.data.data,e.dialog_bill=!0,e.dialog_suc=!0,e.msg_suc="发票号补打成功",console.log(t.data)}):(this.dialog_err=!0,this.msg_err="发票号为空")},get_patient_register:function(){var e=this.HOME+"/constant/get",t={patient_record_id:this.patient_record_id};this.$http.post(e+"?token="+sessionStorage.getItem("token"),t).then(function(e){console.log(e.data)})},get_patient:function(){var e=this.HOME+"/patient/get-by-patient-id",t=this,i={patient_record_id:t.patient_record_id};this.$http.post(e+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data),e.data.data.patient_gender?t.patient_gender="男":t.patient_gender="女",t.patient_name=e.data.data.patient_name,t.patient_credit_id=e.data.data.patient_credit_id,t.patient_birthDate=e.data.data.patient_birthDate.substring(0,10),t.patient_age=e.data.data.patient_age,t.patient_address=e.data.data.patient_address,t.getItem(),t.getItem_charge(),console.log(t.desserts),console.log(t.desserts1)})}}},p={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"scroll-y"},[i("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",{attrs:{color:"primary",dark:""}},[i("v-card-text",[e._v("\n        请稍等\n        "),i("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),i("v-dialog",{attrs:{"max-width":"300"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("v-card",{ref:"form"},[i("v-card-text",[i("v-select",{attrs:{items:e.returnArray(e.quantity),label:"数量",required:""},model:{value:e.quantity_sub,callback:function(t){e.quantity_sub=t},expression:"quantity_sub"}})],1),e._v(" "),i("v-divider",{staticClass:"mt-2"}),e._v(" "),i("v-card-actions",[i("v-btn",{attrs:{flat:""},on:{click:function(t){e.show=!e.show}}},[e._v("取消")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.returnItemMed}},[e._v("确定")])],1)],1)],1),e._v(" "),i("v-dialog",{attrs:{"hide-overlay":"",width:"400"},model:{value:e.dialog_bill,callback:function(t){e.dialog_bill=t},expression:"dialog_bill"}},[i("v-layout",{attrs:{"justify-center":""}},[i("v-flex",[i("v-card",[i("v-card-title",[e._v("\n            发票\n          ")]),e._v(" "),i("v-card-text",[i("v-text-field",{attrs:{label:"发票号",readonly:""},model:{value:e.bill.bill_id,callback:function(t){e.$set(e.bill,"bill_id",t)},expression:"bill.bill_id"}}),e._v(" "),i("v-text-field",{attrs:{label:"挂号ID",readonly:""},model:{value:e.bill.bill_register_id,callback:function(t){e.$set(e.bill,"bill_register_id",t)},expression:"bill.bill_register_id"}}),e._v(" "),i("v-text-field",{attrs:{label:"发票总额",readonly:""},model:{value:e.bill.bill_sum,callback:function(t){e.$set(e.bill,"bill_sum",t)},expression:"bill.bill_sum"}}),e._v(" "),i("v-text-field",{attrs:{label:"发票类型",readonly:""},model:{value:e.bill.bill_state,callback:function(t){e.$set(e.bill,"bill_state",t)},expression:"bill.bill_state"}}),e._v(" "),i("v-text-field",{attrs:{label:"打印时间",readonly:""},model:{value:e.bill.bill_time,callback:function(t){e.$set(e.bill,"bill_time",t)},expression:"bill.bill_time"}}),e._v(" "),i("v-text-field",{attrs:{label:"收费类别",readonly:""},model:{value:e.bill.bill_type,callback:function(t){e.$set(e.bill,"bill_type",t)},expression:"bill.bill_type"}}),e._v(" "),i("v-text-field",{attrs:{label:"收费员ID",readonly:""},model:{value:e.bill.bill_user_id,callback:function(t){e.$set(e.bill,"bill_user_id",t)},expression:"bill.bill_user_id"}})],1)],1)],1)],1)],1),e._v(" "),i("v-flex",{attrs:{shrink:""}},[i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialog_err,expression:"dialog_err"}],staticStyle:{"white-space":"nowrap"}},[i("v-alert",{attrs:{value:!0,type:"error"}},[e._v("\n          "+e._s(e.msg_err)+"\n        ")])],1)])],1),e._v(" "),i("v-flex",{attrs:{shrink:""}},[i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialog_suc,expression:"dialog_suc"}],staticStyle:{"white-space":"nowrap"}},[i("v-alert",{attrs:{value:!0,type:"success"}},[e._v("\n          "+e._s(e.msg_suc)+"\n        ")])],1)])],1),e._v(" "),i("v-card",{staticClass:"scroll-y"},[i("v-toolbar",{attrs:{extended:"",flat:"",dense:""},scopedSlots:e._u([{key:"extension",fn:function(){return[i("v-flex",{attrs:{xs2:""}},[i("v-text-field",{attrs:{"prepend-inner-icon":"assignment",name:"login",label:"发票号",type:"text",disabled:e.disabled},model:{value:e.bill.bill_id,callback:function(t){e.$set(e.bill,"bill_id",t)},expression:"bill.bill_id"}})],1),e._v(" "),i("v-btn",{attrs:{small:"",icon:"",flat:"",color:"primary"},on:{click:e.reprint_bill}},[i("v-icon",[e._v("\n            refresh\n          ")])],1),e._v(" "),i("v-btn",{attrs:{small:"",icon:"",color:"primary",flat:""},on:{click:e.overprint}},[i("v-icon",[e._v("\n            print\n          ")])],1),e._v(" "),i("v-spacer")]},proxy:!0}])},[i("v-toolbar-title",[e._v("收费信息")])],1),e._v(" "),i("v-divider"),e._v(" "),i("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-container",[i("v-layout",[i("div",{staticClass:"title font-weight-light"},[e._v("患者信息查询")])]),e._v(" "),i("v-layout",[i("v-flex",{attrs:{xs12:"",md3:""}},[i("v-text-field",{attrs:{rules:e.nameRules,label:"病历号",required:""},model:{value:e.patient_record_id,callback:function(t){e.patient_record_id=t},expression:"patient_record_id"}})],1),e._v(" "),i("v-btn",{staticStyle:{"margin-top":"20px"},attrs:{color:"primary",flat:"",icon:""},on:{click:e.get_patient}},[i("v-icon",[e._v("search")])],1)],1),e._v(" "),i("v-layout",[i("div",{staticClass:"title font-weight-light"},[e._v("患者信息确认")])]),e._v(" "),i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",md6:"",lg2:""}},[i("v-text-field",{attrs:{label:"姓名",required:"",readonly:""},model:{value:e.patient_name,callback:function(t){e.patient_name=t},expression:"patient_name"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",md6:"",lg2:""}},[i("v-text-field",{attrs:{label:"性别",required:"",readonly:""},model:{value:e.patient_gender,callback:function(t){e.patient_gender=t},expression:"patient_gender"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",md6:"",lg4:""}},[i("v-textarea",{attrs:{label:"家庭住址",readonly:"",rows:"1"},model:{value:e.patient_address,callback:function(t){e.patient_address=t},expression:"patient_address"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",md6:"",lg4:""}},[i("v-text-field",{attrs:{counter:18,label:"身份证号",readonly:"",required:""},model:{value:e.patient_credit_id,callback:function(t){e.patient_credit_id=t},expression:"patient_credit_id"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",md6:"",lg2:""}},[i("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.patient_birthDate,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(t){e.patient_birthDate=t},"update:return-value":function(t){e.patient_birthDate=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[i("v-text-field",e._g({attrs:{label:"出生日期",required:"",readonly:""},model:{value:e.patient_birthDate,callback:function(t){e.patient_birthDate=t},expression:"patient_birthDate"}},a))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[e._v(" "),i("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.patient_birthDate,callback:function(t){e.patient_birthDate=t},expression:"patient_birthDate"}},[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v("取消")]),e._v(" "),i("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){return e.$refs.menu.save(e.patient_birthDate)}}},[e._v("确定")])],1)],1)],1),e._v(" "),i("v-flex",{attrs:{xs12:"",md6:"",lg2:""}},[i("v-text-field",{attrs:{label:"年龄",readonly:"",required:""},model:{value:e.patient_age,callback:function(t){e.patient_age=t},expression:"patient_age"}})],1)],1)],1)],1)],1),e._v(" "),i("v-card",{staticClass:"scroll-y"},[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v("患者交费")])],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.desserts,"item-key":"id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.code))]),e._v(" "),i("td",[e._v(e._s(t.item.name))]),e._v(" "),i("td",[e._v(e._s(t.item.state))]),e._v(" "),i("td",[e._v(e._s(t.item.type))]),e._v(" "),i("td",[e._v(e._s(t.item.number))]),e._v(" "),i("td",[i("v-btn",{staticClass:"ml-3",attrs:{small:"",flat:"",right:"",icon:"",color:"primary"},on:{click:function(i){return e.chargeItem(t.item)}}},[e._v("\n            收费\n          ")])],1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1),e._v(" "),i("v-card",{staticClass:"scroll-y"},[i("v-toolbar",{attrs:{flat:"",extended:"",dense:""},scopedSlots:e._u([{key:"extension",fn:function(){return[i("el-date-picker",{staticStyle:{"margin-right":"5px","margin-bottom":"10px"},attrs:{type:"datetimerange",align:"right","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["12:00:00","08:00:00"]},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})]},proxy:!0}])},[i("v-toolbar-title",[e._v("患者收费信息")])],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1 scroll-y",attrs:{headers:e.headers1,items:e.filterDesserts,"item-key":"hint"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.code))]),e._v(" "),i("td",[e._v(e._s(t.item.name))]),e._v(" "),i("td",[e._v(e._s(t.item.state))]),e._v(" "),i("td",[e._v(e._s(t.item.type))]),e._v(" "),i("td",[e._v(e._s(t.item.number))]),e._v(" "),i("td",[e._v(e._s(t.item.time))]),e._v(" "),i("td",["检查"===t.item.type||"检验"===t.item.type||"处置"===t.item.type||"已退药"===t.item.state||"已领药并部分退药"===t.item.state||"未领药并部分退药"===t.item.state?i("v-btn",{staticClass:"ml-3",attrs:{small:"",right:"",icon:"",flat:"",color:"primary"},on:{click:function(i){return e.returnItem(t.item)}}},[e._v("\n            退费\n          ")]):i("v-icon",{on:{click:function(i){t.expanded=!t.expanded,e.getContent(t.item),e.prescription=t.item}}},[e._v("\n            remove_red_eye\n          ")])],1)]}},{key:"expand",fn:function(t){return["检查"!==t.item.type&&"检验"!==t.item.type&&"处置"!==t.item.type&&"已退药"!==t.item.state?i("v-data-table",{staticClass:"elevation-1 scroll-y",attrs:{headers:e.headers_con,items:e.desserts_con,"item-key":"hint","select-all":""},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.medicine.medicine_name))]),e._v(" "),i("td",[e._v(e._s(t.item.prescription_medicine_id))]),e._v(" "),i("td",[e._v(e._s(t.item.prescription_unit_price))]),e._v(" "),i("td",[e._v("\n              "+e._s(t.item.prescription_refund_available_num)+"\n            ")]),e._v(" "),i("td",[i("v-btn",{staticClass:"ml-3",attrs:{small:"",right:"",icon:"",flat:"",color:"primary"},on:{click:function(i){e.show=!e.show,e.medicine=t.item,e.quantity=t.item.prescription_refund_available_num}}},[e._v("\n                退费\n              ")])],1)]}}],null,!0),model:{value:e.selected_con,callback:function(t){e.selected_con=t},expression:"selected_con"}}):e._e()]}}]),model:{value:e.selected1,callback:function(t){e.selected1=t},expression:"selected1"}})],1)],1)},staticRenderFns:[]};var u={data:function(){return{date:"",dialog_err:!1,dialog_suc:!1,msg_suc:"success",msg_err:"error",desserts:[{code:"1",cost:"11",state:"1",type:"1",time:"1"},{code:"11",cost:"111",state:"11",type:"11",time:"1"}],headers:[{text:"发票号",align:"left",value:"bill_id"},{text:"结算类型",value:"bill_type"},{text:"收费时间",value:"bill_time"},{text:"发票状态",value:"bill_state"},{text:"收费金额",value:"bill_sum"}],selected:"",daily:"",desserts_daily:[]}},created:function(){},computed:{},watch:{dialog_suc:function(e){var t=this;e&&setTimeout(function(){return t.dialog_suc=!1},1e3)},dialog_err:function(e){var t=this;e&&setTimeout(function(){return t.dialog_err=!1},1e3)}},mounted:function(){},methods:{addDaily:function(){var e=this,t=this.HOME+"/user-service/daily-search",i={daily_user_id:e.$store.state.user.id,daily_end:e.date};this.$http.post(t+"?token="+sessionStorage.getItem("token"),i).then(function(t){console.log(t.data),e.daily=t.data.data,e.desserts_daily=t.data.data.bills})},confirmDaily:function(){var e=this,t=this.HOME+"/user-service/daily-submit",i={daily_id:e.daily.daily_id};this.$http.post(t+"?token="+sessionStorage.getItem("token"),i).then(function(t){200===t.data.code?(console.log(t.data),e.dialog_suc=!0,e.msg_suc="确认成功"):(e.dialog_err=!0,e.msg_err="确认失败")})}}},h={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",[i("v-flex",{attrs:{shrink:""}},[i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialog_err,expression:"dialog_err"}],staticStyle:{"white-space":"nowrap"}},[i("v-alert",{attrs:{value:!0,type:"error"}},[e._v("\n          "+e._s(e.msg_err)+"\n        ")])],1)])],1),e._v(" "),i("v-flex",{attrs:{shrink:""}},[i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialog_suc,expression:"dialog_suc"}],staticStyle:{"white-space":"nowrap"}},[i("v-alert",{attrs:{value:!0,type:"success"}},[e._v("\n          "+e._s(e.msg_suc)+"\n        ")])],1)])],1),e._v(" "),i("v-flex",[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v("日结表")]),e._v(" "),i("v-spacer"),e._v(" "),i("el-date-picker",{attrs:{type:"datetime",placeholder:"选择截止日期时间","value-format":"yyyy-MM-dd hh:mm:ss"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),e._v(" "),i("v-btn",{staticClass:"white--text",attrs:{color:"primary",flat:"",icon:""},on:{click:e.addDaily}},[i("v-icon",[e._v("search")])],1)],1),e._v(" "),i("v-data-table",{attrs:{headers:e.headers,items:e.desserts_daily,"item-key":"bill_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.bill_id))]),e._v(" "),i("td",[e._v(e._s(t.item.bill_type))]),e._v(" "),i("td",[e._v(e._s(t.item.bill_time))]),e._v(" "),i("td",[e._v(e._s(t.item.bill_state))]),e._v(" "),i("td",[e._v(e._s(t.item.bill_sum))])]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1),e._v(" "),i("v-divider"),e._v(" "),i("v-card-actions",[i("v-spacer"),e._v(" "),i("v-btn",{staticClass:"white--text",attrs:{color:"primary"},on:{click:e.confirmDaily}},[e._v("\n      结算\n    ")])],1)],1)},staticRenderFns:[]};var f={data:function(){return{date:["",""],dialog_err:!1,dialog_suc:!1,msg_suc:"success",msg_err:"error",headers:[{text:"发票号",align:"left",value:"daily_id"},{text:"开始时间",value:"daily_start"},{text:"结束时间",value:"daily_end"},{text:"操作时间",value:"daily_operate_time"},{text:"日结状态",value:"daily_pass_state"},{text:"日结总计",value:"daily_sum"},{text:"中药统计",value:"daily_mid_prescription_sum"},{text:"西药统计",value:"daily_west_prescription_sum"},{text:"挂号费统计",value:"daily_register_sum"},{text:"检验统计",value:"daily_check_sum"},{text:"检查统计",value:"daily_examine_sum"},{text:"处置统计",value:"daily_handle_sum"}],selected:"",daily:[]}},created:function(){},computed:{},watch:{dialog_suc:function(e){var t=this;e&&setTimeout(function(){return t.dialog_suc=!1},1e3)},dialog_err:function(e){var t=this;e&&setTimeout(function(){return t.dialog_err=!1},1e3)}},mounted:function(){},methods:{filterDate:function(e){return(this.date[0]<=new Date(e.daily_operate_time)&&this.date[1]>=new Date(e.daily_operate_time)||""===this.date[0]||""===this.date[1])&&"未确认状态"!==e.daily_pass_state},getDaily:function(){var e=this,t=this.HOME+"/user-service/daily-get",i={daily_user_id:e.$store.state.user.id};this.$http.post(t+"?token="+sessionStorage.getItem("token"),i).then(function(t){console.log(t.data),e.daily=t.data.data})}}},g={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",[i("v-flex",{attrs:{shrink:""}},[i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialog_err,expression:"dialog_err"}],staticStyle:{"white-space":"nowrap"}},[i("v-alert",{attrs:{value:!0,type:"error"}},[e._v("\n          "+e._s(e.msg_err)+"\n        ")])],1)])],1),e._v(" "),i("v-flex",{attrs:{shrink:""}},[i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialog_suc,expression:"dialog_suc"}],staticStyle:{"white-space":"nowrap"}},[i("v-alert",{attrs:{value:!0,type:"success"}},[e._v("\n          "+e._s(e.msg_suc)+"\n        ")])],1)])],1),e._v(" "),i("v-flex",[i("v-toolbar",{attrs:{dense:"",flat:""}},[i("v-toolbar-title",[e._v("日结历史")]),e._v(" "),i("v-spacer"),e._v(" "),i("el-date-picker",{staticStyle:{"margin-right":"10px"},attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),e._v(" "),i("v-btn",{staticClass:"white--text",attrs:{color:"primary",flat:"",icon:""},on:{click:e.getDaily}},[i("v-icon",[e._v("search")])],1)],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.daily.filter(e.filterDate),"item-key":"daily_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.daily_id))]),e._v(" "),i("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.daily_start))]),e._v(" "),i("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.daily_end))]),e._v(" "),i("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.daily_operate_time))]),e._v(" "),i("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.daily_pass_state))]),e._v(" "),i("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.daily_sum))]),e._v(" "),i("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.daily_mid_prescription_sum))]),e._v(" "),i("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.daily_west_prescription_sum))]),e._v(" "),i("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.daily_register_sum))]),e._v(" "),i("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.daily_check_sum))]),e._v(" "),i("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.daily_examine_sum))]),e._v(" "),i("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.daily_handle_sum))])]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1)},staticRenderFns:[]};var k={name:"RegisterCharge",components:{charge:i("VU/8")(v,p,!1,function(e){i("efF5")},"data-v-3fee366c",null).exports,register:m,dailySum:i("VU/8")(u,h,!1,function(e){i("c7zH")},"data-v-241305a8",null).exports,dailySumHistory:i("VU/8")(f,g,!1,function(e){i("8JDy")},"data-v-794c0e00",null).exports},data:function(){return{active:null,items:[{name:"门诊挂号",id:"register"},{name:"收费",id:"charge"},{name:"收费员日结",id:"dailySum"},{name:"日结历史查询",id:"dailySumHistory"}]}},mounted:function(){this.Check()},methods:{Check:function(){var e=window.localStorage;if("挂号收费员"===e.getItem("type")){var t={account:e.getItem("account"),department_id:e.getItem("department_id"),id:e.getItem("id"),name:e.getItem("name"),type:e.getItem("type")};this.$store.commit("set_user",t),this.$store.commit("login")}this.$store.state.isLogin&&"挂号收费员"===this.$store.state.user.type?this.$router.push("/RegisterCharge"):this.$router.push("/login")}}},x={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-tabs",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[e._l(e.items,function(t){return i("v-tab",{key:t,attrs:{ripple:""}},[e._v("\n      "+e._s(t.name)+"\n    ")])}),e._v(" "),e._l(e.items,function(t){return i("v-tab-item",{key:t},[i("v-card",{attrs:{flat:""}},["register"==t.id?i("div",[i("register")],1):e._e(),e._v(" "),"charge"==t.id?i("div",[i("charge")],1):e._e(),e._v(" "),"dailySum"==t.id?i("div",[i("dailySum")],1):e._e(),e._v(" "),"dailySumHistory"==t.id?i("div",[i("dailySumHistory")],1):e._e()])],1)})],2)],1)},staticRenderFns:[]};var b=i("VU/8")(k,x,!1,function(e){i("SuvY")},"data-v-0b4e9c40",null).exports,y={data:function(){return{alert_success:!1,alert_error:!1,mode:!0,department_id:"",department_name:"",department_cat:"",department_type:"",show:!1,search:"",expand:!1,selected:[],signal:"",headers:[{text:"科室编号",align:"left",value:"department_id"},{text:"科室名称",value:"department_name"},{text:"科室分类",value:"department_cat"},{text:"科室类型",value:"department_type"},{text:"操作",value:"operation",sortable:!1}],desserts:[]}},methods:{load:function(){var e=this,t=this.HOME+"/maintenance/department/get-all";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{}).then(function(t){console.log(t.data),e.desserts=t.data.data})},deleteItem:function(e){var t=this,i=this.HOME+"/maintenance/department/delete";this.$http.post(i+"?token="+sessionStorage.getItem("token"),{department_id:e.department_id}).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.load(),t.notice_success()):t.notice_error()}),console.log(this.signal)},addItem:function(){var e={department_id:this.department_id,department_name:this.department_name,department_cat:this.department_cat,department_type:this.department_type},t=this,i=this.HOME+"/maintenance/department/add";this.$http.post(i+"?token="+sessionStorage.getItem("token"),e).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.load(),t.show=!t.show,t.notice_success()):t.notice_error()}),console.log(this.signal)},updateItem:function(){var e={department_id:this.department_id,department_name:this.department_name,department_cat:this.department_cat,department_type:this.department_type},t=this,i=this.HOME+"/maintenance/department/update";this.$http.post(i+"?token="+sessionStorage.getItem("token"),e).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.load(),t.show=!t.show,t.eraseForm(),t.notice_success()):t.notice_error()}),console.log(this.signal)},fillForm:function(e){this.department_id=e.department_id,this.department_name=e.department_name,this.department_cat=e.department_cat,this.department_type=e.department_type},eraseForm:function(){this.department_id="",this.department_name="",this.department_cat="",this.department_type=""},notice_success:function(){this.change_success(),window.setTimeout(this.change_success,1500)},change_success:function(){this.alert_success=!this.alert_success},notice_error:function(){this.change_error(),window.setTimeout(this.change_error,1500)},change_error:function(){this.alert_error=!this.alert_error},delete_selected:function(){for(var e=this,t=function(t){a={department_id:e.selected[t].department_id};var i=e;s=e.HOME+"/maintenance/department/delete",e.$http.post(s+"?token="+sessionStorage.getItem("token"),{department_id:a.department_id}).then(function(e){console.log(e.data),i.signal=e.data.msg,"SUCCESS"===i.signal&&(i.load(),1)})},i=0;i<this.selected.length;i++){var a,s;t(i)}this.count===this.length?this.notice_success():this.notice_error()}},mounted:function(){this.load()},computed:{},watch:{show:function(e,t){!1===e&&this.eraseForm()}}},w={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",[i("v-dialog",{attrs:{width:"300"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("v-layout",{attrs:{"justify-center":""}},[i("v-flex",{attrs:{xs12:""}},[i("v-card",{ref:"form"},[i("v-card-text",[i("v-text-field",{ref:"name",attrs:{"error-messages":e.errorMessages,label:"科室编号",placeholder:"请输入科室编号",disabled:!e.mode,required:""},model:{value:e.department_id,callback:function(t){e.department_id=t},expression:"department_id"}}),e._v(" "),i("v-text-field",{ref:"address",attrs:{label:"科室名称",placeholder:"请输入科室名称",required:""},model:{value:e.department_name,callback:function(t){e.department_name=t},expression:"department_name"}}),e._v(" "),i("v-text-field",{ref:"city",attrs:{label:"科室分类",placeholder:"请输入科室分类",required:""},model:{value:e.department_cat,callback:function(t){e.department_cat=t},expression:"department_cat"}}),e._v(" "),i("v-text-field",{ref:"country",attrs:{label:"科室类型",placeholder:"请输入科室类型",required:""},model:{value:e.department_type,callback:function(t){e.department_type=t},expression:"department_type"}})],1),e._v(" "),i("v-card-actions",[i("v-btn",{attrs:{flat:""},on:{click:function(t){e.show=!e.show}}},[e._v("取消")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-slide-x-reverse-transition",[e.formHasErrors?i("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[i("v-btn",e._g({staticClass:"my-0",attrs:{icon:""},on:{click:e.resetForm}},a),[i("v-icon",[e._v("refresh")])],1)]}}],null,!1,510568536)},[e._v(" "),i("span",[e._v("Refresh form")])]):e._e()],1),e._v(" "),e.mode?i("div",[i("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.addItem}},[e._v("确定")])],1):i("div",[i("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.updateItem}},[e._v("确定")])],1)],1)],1)],1)],1)],1),e._v(" "),i("v-alert",{attrs:{value:e.alert_success,type:"success",transition:"slide-y-transition"}},[e._v("\n    This is a success alert.\n  ")]),e._v(" "),i("v-alert",{attrs:{value:e.alert_error,type:"error",transition:"slide-y-transition"}},[e._v("\n    This is a error alert.\n  ")]),e._v(" "),i("v-flex",[i("v-toolbar",{attrs:{flat:""}},[i("v-flex",{attrs:{xs3:""}},[i("v-text-field",{attrs:{"prepend-inner-icon":"search",rules:e.nameRules,label:"编号/名称",required:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:function(t){e.show=!e.show,e.mode=!0}}},[i("v-icon",[e._v("\n          add\n        ")])],1),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:function(t){return e.delete_selected()}}},[i("v-icon",[e._v("\n          delete\n        ")])],1)],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.desserts,search:e.search,"item-key":"department_id","select-all":""},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.department_id))]),e._v(" "),i("td",[e._v(e._s(t.item.department_name))]),e._v(" "),i("td",[e._v(e._s(t.item.department_cat))]),e._v(" "),i("td",[e._v(e._s(t.item.department_type))]),e._v(" "),i("td",[i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(i){e.show=!e.show,e.mode=!1,e.fillForm(t.item)}}},[e._v("\n            edit\n          ")]),e._v(" "),i("v-icon",{attrs:{small:""},on:{click:function(i){return e.deleteItem(t.item)}}},[e._v("\n            delete\n          ")])],1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1)},staticRenderFns:[]};var S={data:function(){return{alert_success:!1,alert_error:!1,user_type_items:[{text:"挂号收费员"},{text:"门诊医生"},{text:"医技医生"},{text:"药房操作员"},{text:"财务管理员"},{text:"医院管理员"}],isDoctor:!1,mode:!0,user_id:"",user_account:"",user_password:"",user_type:"",user_name:"",user_department_id:"",doctor_position:"",doctor_arrange_or_not:"",show:!1,search:"",expand:!1,selected:[],signal:"",headers:[{text:"用户账户",value:"user_account"},{text:"用户密码",value:"user_password"},{text:"用户类型",value:"user_type"},{text:"用户姓名",value:"user_name"},{text:"用户科室",value:"user_department_id"},{text:"挂号级别",value:"doctor_register_level_id"},{text:"医生职称",value:"doctor_position"},{text:"医生排班",value:"doctor_arrange_or_not"},{text:"操作",value:"operation",sortable:!1}],users:[],temUser:[],doctors:[],items_departments:[]}},mounted:function(){this.load(),this.load_items_departments()},methods:{load:function(){var e=this;e.users=[];var t=this.HOME+"/user/get-all-user";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{}).then(function(t){console.log(t.data),e.temUser=t.data.data,console.log("This is all the user"),console.log(e.temUser.length);for(var i=0;i<e.temUser.length;i++){var a={user_id:e.temUser[i].user_id,user_account:e.temUser[i].user_account,user_password:e.temUser[i].user_password,user_type:e.temUser[i].user_type,user_name:e.temUser[i].user_name,user_department_id:e.temUser[i].user_department_id,doctor_register_level_id:"无",doctor_position:"无",doctor_arrange_or_not:"无"};e.users.push(a)}}),t=this.HOME+"/user/get-all-doctor",this.$http.post(t+"?token="+sessionStorage.getItem("token"),{}).then(function(t){console.log(t.data),e.doctors=t.data.data,console.log("This is all the doctors"),console.log(e.doctors.length);for(var i=0;i<e.doctors.length;i++){var a={user_id:e.doctors[i].doctor_id,user_account:e.doctors[i].doctor_account,user_password:e.doctors[i].doctor_password,user_type:e.doctors[i].doctor_type,user_name:e.doctors[i].doctor_name,user_department_id:e.doctors[i].doctor_department_id,doctor_register_level_id:e.doctors[i].doctor_register_level_id,doctor_position:e.doctors[i].doctor_position,doctor_arrange_or_not:e.doctors[i].doctor_arrange_or_not};e.users.push(a)}}),console.log("This is total the user"),console.log(e.users.length)},deleteItem:function(e){var t,i=this,a="";"门诊医生"===e.user_type||"医技医生"===e.user_type||"药房操作员"===e.user_type?(a=this.HOME+"/user/delete-doctor",t={doctor_account:e.user_account}):(a=this.HOME+"/user/delete-user",t={user_account:e.user_account}),this.$http.post(a+"?token="+sessionStorage.getItem("token"),t).then(function(e){console.log(e.data),i.signal=e.data.msg,"SUCCESS"===i.signal?(i.load(),i.notice_success()):i.notice_error()}),console.log(this.signal)},addItem:function(){if(this.check_account_valid(this.user_account)){var e,t,i=this;"门诊医生"===this.user_type||"医技医生"===this.user_type||"药房操作员"===this.user_type?(t={doctor_account:this.user_account,doctor_password:this.user_password,doctor_type:this.user_type,doctor_name:this.user_name,doctor_department_id:this.user_department_id,doctor_register_level_id:this.doctor_register_level_id,doctor_position:this.doctor_position,doctor_arrange_or_not:this.doctor_arrange_or_not},e=this.HOME+"/user/add-doctor"):(t={user_account:this.user_account,user_password:this.user_password,user_type:this.user_type,user_name:this.user_name,user_department_id:this.user_department_id},e=this.HOME+"/user/add-user"),this.$http.post(e+"?token="+sessionStorage.getItem("token"),t).then(function(e){console.log(e.data),i.signal=e.data.msg,"SUCCESS"===i.signal?(i.load(),i.show=!i.show,i.notice_success()):i.notice_error()}),console.log(this.signal)}else this.notice_error()},updateItem:function(){if(this.check_account_valid(this.user_account)){var e,t=this,i="";"门诊医生"===this.user_type||"医技医生"===this.user_type||"药房操作员"===this.user_type?(e={doctor_id:this.user_id,doctor_account:this.user_account,doctor_password:this.user_password,doctor_type:this.user_type,doctor_name:this.user_name,doctor_department_id:this.user_department_id,doctor_register_level_id:this.doctor_register_level_id,doctor_position:this.doctor_position,doctor_arrange_or_not:this.doctor_arrange_or_not},i=this.HOME+"/user/update-doctor"):(e={user_id:this.user_id,user_account:this.user_account,user_password:this.user_password,user_type:this.user_type,user_name:this.user_name,user_department_id:this.user_department_id},i=this.HOME+"/user/update-user"),this.$http.post(i+"?token="+sessionStorage.getItem("token"),e).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.load(),t.show=!t.show,t.notice_success()):t.notice_error()}),console.log(this.signal)}else this.notice_error()},fillForm:function(e){this.user_id=e.user_id,this.user_account=e.user_account,this.user_password=e.user_password,this.user_type=e.user_type,this.user_name=e.user_name,this.user_department_id=e.user_department_id,this.doctor_register_level_id=e.doctor_register_level_id,this.doctor_position=e.doctor_position,this.doctor_arrange_or_not=e.doctor_arrange_or_not},eraseForm:function(){this.user_id="",this.user_account="",this.user_password="",this.user_type="",this.user_name="",this.user_department_id="",this.doctor_register_level_id="",this.doctor_position="",this.doctor_arrange_or_not=""},load_items_departments:function(){var e=this,t=this.HOME+"/maintenance/department/get-all";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{}).then(function(t){console.log(t.data),e.items_departments=t.data.data})},notice_success:function(){this.change_success(),window.setTimeout(this.change_success,1500)},change_success:function(){this.alert_success=!this.alert_success},notice_error:function(){this.change_error(),window.setTimeout(this.change_error,1500)},change_error:function(){this.alert_error=!this.alert_error},check_account_valid:function(e){for(var t=0;t<this.users.length;t++)if(e===this.users[t].user_account)return!1;return!0},delete_selected:function(){for(var e=this,t=function(t){a={user_type:e.selected[t].user_type,user_account:e.selected[t].user_account};var i=e;s="","门诊医生"===a.user_type||"医技医生"===a.user_type||"药房操作员"===a.user_type?(s=e.HOME+"/user/delete-doctor",n={doctor_account:a.user_account}):(s=e.HOME+"/user/delete-user",n={user_account:a.user_account}),e.$http.post(s+"?token="+sessionStorage.getItem("token"),n).then(function(e){console.log(e.data),i.signal=e.data.msg,"SUCCESS"===i.signal&&1})},i=0;i<this.selected.length;i++){var a,s,n;t(i)}this.load(),this.count===this.length?this.notice_success():this.notice_error()}},computed:{},watch:{show:function(e,t){!1===e&&this.eraseForm()},user_type:function(e,t){this.isDoctor="门诊医生"===e||"医技医生"===e||"药房操作员"===e}}},I={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",[i("v-dialog",{attrs:{width:"300"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("v-layout",{attrs:{"justify-center":""}},[i("v-flex",{attrs:{xs12:""}},[i("v-card",{ref:"form"},[i("v-card-text",[i("v-text-field",{ref:"name",attrs:{"error-messages":e.errorMessages,label:"用户ID",placeholder:"请输入用户ID",disabled:!0,required:""},model:{value:e.user_id,callback:function(t){e.user_id=t},expression:"user_id"}}),e._v(" "),i("v-text-field",{ref:"address",attrs:{label:"用户账户",placeholder:"请输入用户账户",required:""},model:{value:e.user_account,callback:function(t){e.user_account=t},expression:"user_account"}}),e._v(" "),i("v-text-field",{ref:"city",attrs:{label:"用户密码",placeholder:"请输入用户密码",required:""},model:{value:e.user_password,callback:function(t){e.user_password=t},expression:"user_password"}}),e._v(" "),i("v-select",{ref:"country",attrs:{items:e.user_type_items,label:"用户类型",placeholder:"请输入用户类型",required:""},model:{value:e.user_type,callback:function(t){e.user_type=t},expression:"user_type"}}),e._v(" "),i("v-text-field",{ref:"country",attrs:{label:"用户姓名",placeholder:"请输入用户姓名",required:""},model:{value:e.user_name,callback:function(t){e.user_name=t},expression:"user_name"}}),e._v(" "),i("v-select",{attrs:{items:e.items_departments,"item-text":"department_name","item-value":"department_id",label:"科室",placeholder:"请输入科室"},model:{value:e.user_department_id,callback:function(t){e.user_department_id=t},expression:"user_department_id"}}),e._v(" "),e.isDoctor?i("div",[i("v-text-field",{ref:"country",attrs:{label:"挂号级别ID",placeholder:"请输入医生挂号级别ID",required:""},model:{value:e.doctor_register_level_id,callback:function(t){e.doctor_register_level_id=t},expression:"doctor_register_level_id"}}),e._v(" "),i("v-text-field",{ref:"country",attrs:{label:"医生职称",placeholder:"请输入医生职称",required:""},model:{value:e.doctor_position,callback:function(t){e.doctor_position=t},expression:"doctor_position"}}),e._v(" "),i("v-text-field",{ref:"country",attrs:{label:"医生是否排班",placeholder:"请输入医生是否排班",required:""},model:{value:e.doctor_arrange_or_not,callback:function(t){e.doctor_arrange_or_not=t},expression:"doctor_arrange_or_not"}})],1):e._e()],1),e._v(" "),i("v-card-actions",[i("v-btn",{attrs:{flat:""},on:{click:function(t){e.show=!e.show}}},[e._v("取消")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-slide-x-reverse-transition",[e.formHasErrors?i("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[i("v-btn",e._g({staticClass:"my-0",attrs:{icon:""},on:{click:e.resetForm}},a),[i("v-icon",[e._v("refresh")])],1)]}}],null,!1,510568536)},[e._v(" "),i("span",[e._v("Refresh form")])]):e._e()],1),e._v(" "),e.mode?i("div",[i("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.addItem}},[e._v("确定")])],1):i("div",[i("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.updateItem}},[e._v("确定")])],1)],1)],1)],1)],1)],1),e._v(" "),i("v-alert",{attrs:{value:e.alert_success,type:"success",transition:"slide-y-transition"}},[e._v("\n    This is a success alert.\n  ")]),e._v(" "),i("v-alert",{attrs:{value:e.alert_error,type:"error",transition:"slide-y-transition"}},[e._v("\n    This is a error alert.\n  ")]),e._v(" "),i("v-flex",[i("v-toolbar",{attrs:{flat:""}},[i("v-flex",{attrs:{xs3:""}},[i("v-text-field",{attrs:{"prepend-inner-icon":"search",rules:e.nameRules,label:"编号/名称",required:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:function(t){e.show=!e.show,e.mode=!0}}},[i("v-icon",[e._v("\n          add\n        ")])],1),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:e.delete_selected}},[i("v-icon",[e._v("\n          delete\n        ")])],1)],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.users,search:e.search,"item-key":"user_account","select-all":""},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.user_account))]),e._v(" "),i("td",[e._v(e._s(t.item.user_password))]),e._v(" "),i("td",[e._v(e._s(t.item.user_type))]),e._v(" "),i("td",[e._v(e._s(t.item.user_name))]),e._v(" "),i("td",[e._v(e._s(t.item.user_department_id))]),e._v(" "),i("td",[e._v(e._s(t.item.doctor_register_level_id))]),e._v(" "),i("td",[e._v(e._s(t.item.doctor_position))]),e._v(" "),i("td",[e._v(e._s(t.item.doctor_arrange_or_not))]),e._v(" "),i("td",[i("layout",{attrs:{row:""}},[i("div",[i("v-icon",{attrs:{small:""},on:{click:function(i){e.show=!e.show,e.mode=!1,e.fillForm(t.item)}}},[e._v("\n                edit\n              ")])],1),e._v(" "),i("div",[i("v-icon",{attrs:{small:""},on:{click:function(i){return e.deleteItem(t.item)}}},[e._v("\n                delete\n              ")])],1)])],1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1)},staticRenderFns:[]};var C={data:function(){return{alert_success:!1,alert_error:!1,mode:!0,register_level_id:"",register_level_seq_num:"",register_level_name:"",register_level_max:"",register_level_fee:"",show:!1,search:"",expand:!1,selected:[],signal:"",headers:[{text:"挂号级别ID",align:"left",value:"register_level_id"},{text:"顺序号",value:"register_level_seq_num"},{text:"挂号级别",value:"register_level_name"},{text:"挂号限额",value:"register_level_max"},{text:"挂号费用",value:"register_level_fee"},{text:"操作",value:"operation",sortable:!1}],desserts:[]}},methods:{load:function(){var e=this,t=this.HOME+"/maintenance/register-level/get-all";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{}).then(function(t){console.log(t.data),e.desserts=t.data.data})},deleteItem:function(e){var t=this,i=this.HOME+"/maintenance/register-level/delete";this.$http.post(i+"?token="+sessionStorage.getItem("token"),{register_level_id:e.register_level_id}).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.load(),t.notice_success()):t.notice_error()}),console.log(this.signal)},addItem:function(){var e={register_level_seq_num:this.register_level_seq_num,register_level_name:this.register_level_name,register_level_max:this.register_level_max,register_level_fee:this.register_level_fee},t=this,i=this.HOME+"/maintenance/register-level/add";this.$http.post(i+"?token="+sessionStorage.getItem("token"),e).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.show=!t.show,t.load(),t.notice_success()):t.notice_error()}),console.log(this.signal)},updateItem:function(){var e={register_level_id:this.register_level_id,register_level_seq_num:this.register_level_seq_num,register_level_name:this.register_level_name,register_level_max:this.register_level_max,register_level_fee:this.register_level_fee},t=this,i=this.HOME+"/maintenance/register-level/update";this.$http.post(i+"?token="+sessionStorage.getItem("token"),e).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.show=!t.show,t.load(),t.notice_success()):t.notice_error()}),console.log(this.signal)},fillForm:function(e){this.register_level_id=e.register_level_id,this.register_level_seq_num=e.register_level_seq_num,this.register_level_name=e.register_level_name,this.register_level_max=e.register_level_max,this.register_level_fee=e.register_level_fee},eraseForm:function(){this.register_level_id="",this.register_level_seq_num="",this.register_level_name="",this.register_level_max="",this.register_level_fee=""},notice_success:function(){this.change_success(),window.setTimeout(this.change_success,1500)},change_success:function(){this.alert_success=!this.alert_success},notice_error:function(){this.change_error(),window.setTimeout(this.change_error,1500)},change_error:function(){this.alert_error=!this.alert_error},delete_selected:function(){for(var e=this,t=function(t){a={register_level_id:e.selected[t].register_level_id};var i=e;s=e.HOME+"/maintenance/register-level/delete",e.$http.post(s+"?token="+sessionStorage.getItem("token"),{register_level_id:a.register_level_id}).then(function(e){console.log(e.data),i.signal=e.data.msg,"SUCCESS"===i.signal&&(i.load(),1)})},i=0;i<this.selected.length;i++){var a,s;t(i)}this.count===this.length?this.notice_success():this.notice_error()}},mounted:function(){this.load()},computed:{},watch:{show:function(e,t){!1===e&&this.eraseForm()}}},$={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",[i("v-dialog",{attrs:{width:"300"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("v-layout",{attrs:{"justify-center":""}},[i("v-flex",{attrs:{xs12:""}},[i("v-card",{ref:"form"},[i("v-card-text",[i("v-text-field",{ref:"name",attrs:{"error-messages":e.errorMessages,label:"挂号级别ID",placeholder:"请输入挂号级别ID",disabled:!0,required:""},model:{value:e.register_level_id,callback:function(t){e.register_level_id=t},expression:"register_level_id"}}),e._v(" "),i("v-text-field",{ref:"address",attrs:{label:"顺序号",placeholder:"请输入顺序号",required:""},model:{value:e.register_level_seq_num,callback:function(t){e.register_level_seq_num=t},expression:"register_level_seq_num"}}),e._v(" "),i("v-text-field",{ref:"city",attrs:{label:"挂号级别",placeholder:"请输入级别",required:""},model:{value:e.register_level_name,callback:function(t){e.register_level_name=t},expression:"register_level_name"}}),e._v(" "),i("v-text-field",{ref:"country",attrs:{label:"挂号限额",placeholder:"请输入挂号限额",required:""},model:{value:e.register_level_max,callback:function(t){e.register_level_max=t},expression:"register_level_max"}}),e._v(" "),i("v-text-field",{ref:"country",attrs:{label:"挂号费用",placeholder:"请输入挂号费用",required:""},model:{value:e.register_level_fee,callback:function(t){e.register_level_fee=t},expression:"register_level_fee"}})],1),e._v(" "),i("v-card-actions",[i("v-btn",{attrs:{flat:""},on:{click:function(t){e.show=!e.show}}},[e._v("取消")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-slide-x-reverse-transition",[e.formHasErrors?i("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[i("v-btn",e._g({staticClass:"my-0",attrs:{icon:""},on:{click:e.resetForm}},a),[i("v-icon",[e._v("refresh")])],1)]}}],null,!1,510568536)},[e._v(" "),i("span",[e._v("Refresh form")])]):e._e()],1),e._v(" "),e.mode?i("div",[i("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.addItem}},[e._v("确定")])],1):i("div",[i("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.updateItem}},[e._v("确定")])],1)],1)],1)],1)],1)],1),e._v(" "),i("v-alert",{attrs:{value:e.alert_success,type:"success",transition:"slide-y-transition"}},[e._v("\n    This is a success alert.\n  ")]),e._v(" "),i("v-alert",{attrs:{value:e.alert_error,type:"error",transition:"slide-y-transition"}},[e._v("\n    This is a error alert.\n  ")]),e._v(" "),i("v-flex",[i("v-toolbar",{attrs:{flat:""}},[i("v-flex",{attrs:{xs3:""}},[i("v-text-field",{attrs:{"prepend-inner-icon":"search",rules:e.nameRules,label:"编号/名称",required:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:function(t){e.show=!e.show,e.mode=!0}}},[i("v-icon",[e._v("\n          add\n        ")])],1),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:e.delete_selected}},[i("v-icon",[e._v("\n          delete\n        ")])],1)],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.desserts,search:e.search,"item-key":"register_level_id","select-all":""},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.register_level_id))]),e._v(" "),i("td",[e._v(e._s(t.item.register_level_seq_num))]),e._v(" "),i("td",[e._v(e._s(t.item.register_level_name))]),e._v(" "),i("td",[e._v(e._s(t.item.register_level_max))]),e._v(" "),i("td",[e._v(e._s(t.item.register_level_fee))]),e._v(" "),i("td",[i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(i){e.show=!e.show,e.mode=!1,e.fillForm(t.item)}}},[e._v("\n            edit\n          ")]),e._v(" "),i("v-icon",{attrs:{small:""},on:{click:function(i){return e.deleteItem(t.item)}}},[e._v("\n            delete\n          ")])],1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1)},staticRenderFns:[]};var M={data:function(){return{alert_success:!1,alert_error:!1,mode:!0,constant_id:"",constant_name:"",constant_type:"",show:!1,search:"",expand:!1,selected:[],signal:"",headers:[{text:"常数编号",align:"left",value:"constant_id"},{text:"常数名称",value:"constant_name"},{text:"常数类型",value:"constant_type"},{text:"操作",value:"operation",sortable:!1}],desserts:[]}},methods:{load:function(){var e=this,t=this.HOME+"/maintenance/constant/get-all";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{}).then(function(t){console.log(t.data),e.desserts=t.data.data})},deleteItem:function(e){var t=this,i=this.HOME+"/maintenance/constant/delete";this.$http.post(i+"?token="+sessionStorage.getItem("token"),{constant_id:e.constant_id}).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.load(),t.notice_success()):t.notice_error()}),console.log(this.signal)},addItem:function(){var e={constant_name:this.constant_name,constant_type:this.constant_type},t=this,i=this.HOME+"/maintenance/constant/add";this.$http.post(i+"?token="+sessionStorage.getItem("token"),e).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.show=!t.show,t.load(),t.notice_success()):t.notice_error()}),console.log(this.signal)},updateItem:function(){var e={constant_id:this.constant_id,constant_name:this.constant_name,constant_type:this.constant_type},t=this,i=this.HOME+"/maintenance/constant/update";this.$http.post(i+"?token="+sessionStorage.getItem("token"),e).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.show=!t.show,t.load(),t.notice_success()):t.notice_error()}),console.log(this.signal)},fillForm:function(e){this.constant_id=e.constant_id,this.constant_name=e.constant_name,this.constant_type=e.constant_type},eraseForm:function(){this.constant_id="",this.constant_name="",this.constant_type=""},notice_success:function(){this.change_success(),window.setTimeout(this.change_success,1500)},change_success:function(){this.alert_success=!this.alert_success},notice_error:function(){this.change_error(),window.setTimeout(this.change_error,1500)},change_error:function(){this.alert_error=!this.alert_error},delete_selected:function(){for(var e=this,t=function(t){a={constant_id:e.selected[t].constant_id};var i=e;s=e.HOME+"/maintenance/constant/delete",e.$http.post(s+"?token="+sessionStorage.getItem("token"),{constant_id:a.constant_id}).then(function(e){console.log(e.data),i.signal=e.data.msg,"SUCCESS"===i.signal&&(i.load(),1)})},i=0;i<this.selected.length;i++){var a,s;t(i)}this.count===this.length?this.notice_success():this.notice_error()}},mounted:function(){this.load()},computed:{},watch:{show:function(e,t){!1===e&&this.eraseForm()}}},E={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",[i("v-dialog",{attrs:{width:"300"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("v-layout",{attrs:{"justify-center":""}},[i("v-flex",{attrs:{xs12:""}},[i("v-card",{ref:"form"},[i("v-card-text",[i("v-text-field",{ref:"name",attrs:{"error-messages":e.errorMessages,label:"常数编号",placeholder:"请输入常数编号",disabled:!0,required:""},model:{value:e.constant_id,callback:function(t){e.constant_id=t},expression:"constant_id"}}),e._v(" "),i("v-text-field",{ref:"address",attrs:{label:"常数名称",placeholder:"请输入常数名称",required:""},model:{value:e.constant_name,callback:function(t){e.constant_name=t},expression:"constant_name"}}),e._v(" "),i("v-text-field",{ref:"country",attrs:{label:"常数类型",placeholder:"请输入常数类型",required:""},model:{value:e.constant_type,callback:function(t){e.constant_type=t},expression:"constant_type"}})],1),e._v(" "),i("v-card-actions",[i("v-btn",{attrs:{flat:""},on:{click:function(t){e.show=!e.show}}},[e._v("取消")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-slide-x-reverse-transition",[e.formHasErrors?i("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[i("v-btn",e._g({staticClass:"my-0",attrs:{icon:""},on:{click:e.resetForm}},a),[i("v-icon",[e._v("refresh")])],1)]}}],null,!1,510568536)},[e._v(" "),i("span",[e._v("Refresh form")])]):e._e()],1),e._v(" "),e.mode?i("div",[i("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.addItem}},[e._v("确定")])],1):i("div",[i("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.updateItem}},[e._v("确定")])],1)],1)],1)],1)],1)],1),e._v(" "),i("v-alert",{attrs:{value:e.alert_success,type:"success",transition:"slide-y-transition"}},[e._v("\n    This is a success alert.\n  ")]),e._v(" "),i("v-alert",{attrs:{value:e.alert_error,type:"error",transition:"slide-y-transition"}},[e._v("\n    This is a error alert.\n  ")]),e._v(" "),i("v-flex",[i("v-toolbar",{attrs:{flat:""}},[i("v-flex",{attrs:{xs3:""}},[i("v-text-field",{attrs:{"prepend-inner-icon":"search",rules:e.nameRules,label:"编号/名称",required:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:function(t){e.show=!e.show,e.mode=!0}}},[i("v-icon",[e._v("\n          add\n        ")])],1),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:e.delete_selected}},[i("v-icon",[e._v("\n          delete\n        ")])],1)],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.desserts,search:e.search,"item-key":"constant_id","select-all":""},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.constant_id))]),e._v(" "),i("td",[e._v(e._s(t.item.constant_name))]),e._v(" "),i("td",[e._v(e._s(t.item.constant_type))]),e._v(" "),i("td",[i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(i){e.show=!e.show,e.mode=!1,e.fillForm(t.item)}}},[e._v("\n            edit\n          ")]),e._v(" "),i("v-icon",{attrs:{small:""},on:{click:function(i){return e.deleteItem(t.item)}}},[e._v("\n            delete\n          ")])],1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1)},staticRenderFns:[]};var H={data:function(){return{alert_success:!1,alert_error:!1,mode:!0,non_medicine_id:"",non_medicine_name:"",non_medicine_type:"",non_medicine_specification:"",non_medicine_unit_price:"",show:!1,search:"",expand:!1,selected:[],signal:"",headers:[{text:"非药品编号",align:"left",value:"non_medicine_id"},{text:"非药品名称",value:"non_medicine_name"},{text:"非药品类型",value:"non_medicine_type"},{text:"非药品规格",value:"non_medicine_specification"},{text:"单价",value:"non_medicine_unit_price"},{text:"操作",value:"operation",sortable:!1}],desserts:[]}},methods:{load:function(){var e=this,t=this.HOME+"/maintenance/non-medicine/get-all";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{}).then(function(t){console.log(t.data),e.desserts=t.data.data})},deleteItem:function(e){var t=this,i=this.HOME+"/maintenance/non-medicine/delete";this.$http.post(i+"?token="+sessionStorage.getItem("token"),{non_medicine_id:e.non_medicine_id}).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.load(),t.notice_success()):t.notice_error()}),console.log(this.signal)},addItem:function(){var e={non_medicine_id:this.non_medicine_id,non_medicine_name:this.non_medicine_name,non_medicine_type:this.non_medicine_type,non_medicine_specification:this.non_medicine_specification,non_medicine_unit_price:this.non_medicine_unit_price},t=this,i=this.HOME+"/maintenance/non-medicine/add";this.$http.post(i+"?token="+sessionStorage.getItem("token"),e).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.show=!t.show,t.load(),t.notice_success()):t.notice_error()}),console.log(this.signal)},updateItem:function(){var e={non_medicine_id:this.non_medicine_id,non_medicine_name:this.non_medicine_name,non_medicine_type:this.non_medicine_type,non_medicine_specification:this.non_medicine_specification,non_medicine_unit_price:this.non_medicine_unit_price},t=this,i=this.HOME+"/maintenance/non-medicine/update";this.$http.post(i+"?token="+sessionStorage.getItem("token"),e).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.show=!t.show,t.load(),t.notice_success()):t.notice_error()}),console.log(this.signal)},fillForm:function(e){this.non_medicine_id=e.non_medicine_id,this.non_medicine_name=e.non_medicine_name,this.non_medicine_type=e.non_medicine_type,this.non_medicine_specification=e.non_medicine_specification,this.non_medicine_unit_price=e.non_medicine_unit_price},eraseForm:function(){this.non_medicine_id="",this.non_medicine_name="",this.non_medicine_type="",this.non_medicine_specification="",this.non_medicine_unit_price=""},notice_success:function(){this.change_success(),window.setTimeout(this.change_success,1500)},change_success:function(){this.alert_success=!this.alert_success},notice_error:function(){this.change_error(),window.setTimeout(this.change_error,1500)},change_error:function(){this.alert_error=!this.alert_error},delete_selected:function(){for(var e=this,t=function(t){a={non_medicine_id:e.selected[t].non_medicine_id};var i=e;s=e.HOME+"/maintenance/non-medicine/delete",e.$http.post(s+"?token="+sessionStorage.getItem("token"),{non_medicine_id:a.non_medicine_id}).then(function(e){console.log(e.data),i.signal=e.data.msg,"SUCCESS"===i.signal&&(i.load(),1)})},i=0;i<this.selected.length;i++){var a,s;t(i)}this.count===this.length?this.notice_success():this.notice_error()}},mounted:function(){this.load()},computed:{},watch:{show:function(e,t){!1===e&&this.eraseForm()}}},T={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",[i("v-dialog",{attrs:{width:"300"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("v-layout",{attrs:{"justify-center":""}},[i("v-flex",{attrs:{xs12:""}},[i("v-card",{ref:"form"},[i("v-card-text",[i("v-text-field",{ref:"name",attrs:{"error-messages":e.errorMessages,label:"非药品编号",placeholder:"请输入非药品编号",disabled:!e.mode,required:""},model:{value:e.non_medicine_id,callback:function(t){e.non_medicine_id=t},expression:"non_medicine_id"}}),e._v(" "),i("v-text-field",{ref:"address",attrs:{label:"非药品名称",placeholder:"请输入非药品名称",required:""},model:{value:e.non_medicine_name,callback:function(t){e.non_medicine_name=t},expression:"non_medicine_name"}}),e._v(" "),i("v-text-field",{ref:"city",attrs:{label:"非药品类型",placeholder:"请输入非药品类型",required:""},model:{value:e.non_medicine_type,callback:function(t){e.non_medicine_type=t},expression:"non_medicine_type"}}),e._v(" "),i("v-text-field",{ref:"country",attrs:{label:"非药品规格",placeholder:"请输入非药品规格",required:""},model:{value:e.non_medicine_specification,callback:function(t){e.non_medicine_specification=t},expression:"non_medicine_specification"}}),e._v(" "),i("v-text-field",{ref:"city",attrs:{label:"单价",placeholder:"请输入单价",required:""},model:{value:e.non_medicine_unit_price,callback:function(t){e.non_medicine_unit_price=t},expression:"non_medicine_unit_price"}})],1),e._v(" "),i("v-card-actions",[i("v-btn",{attrs:{flat:""},on:{click:function(t){e.show=!e.show}}},[e._v("取消")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-slide-x-reverse-transition",[e.formHasErrors?i("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[i("v-btn",e._g({staticClass:"my-0",attrs:{icon:""},on:{click:e.resetForm}},a),[i("v-icon",[e._v("refresh")])],1)]}}],null,!1,510568536)},[e._v(" "),i("span",[e._v("Refresh form")])]):e._e()],1),e._v(" "),e.mode?i("div",[i("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.addItem}},[e._v("确定")])],1):i("div",[i("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.updateItem}},[e._v("确定")])],1)],1)],1)],1)],1)],1),e._v(" "),i("v-alert",{attrs:{value:e.alert_success,type:"success",transition:"slide-y-transition"}},[e._v("\n    This is a success alert.\n  ")]),e._v(" "),i("v-alert",{attrs:{value:e.alert_error,type:"error",transition:"slide-y-transition"}},[e._v("\n    This is a error alert.\n  ")]),e._v(" "),i("v-flex",[i("v-toolbar",{attrs:{flat:""}},[i("v-flex",{attrs:{xs3:""}},[i("v-text-field",{attrs:{"prepend-inner-icon":"search",rules:e.nameRules,label:"编号/名称",required:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:function(t){e.show=!e.show,e.mode=!0}}},[i("v-icon",[e._v("\n          add\n        ")])],1),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:e.delete_selected}},[i("v-icon",[e._v("\n          delete\n        ")])],1)],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.desserts,search:e.search,"item-key":"non_medicine_id","select-all":""},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.non_medicine_id))]),e._v(" "),i("td",[e._v(e._s(t.item.non_medicine_name))]),e._v(" "),i("td",[e._v(e._s(t.item.non_medicine_type))]),e._v(" "),i("td",[e._v(e._s(t.item.non_medicine_specification))]),e._v(" "),i("td",[e._v(e._s(t.item.non_medicine_unit_price))]),e._v(" "),i("td",[i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(i){e.show=!e.show,e.mode=!1,e.fillForm(t.item)}}},[e._v("\n            edit\n          ")]),e._v(" "),i("v-icon",{attrs:{small:""},on:{click:function(i){return e.deleteItem(t.item)}}},[e._v("\n            delete\n          ")])],1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1)},staticRenderFns:[]};var O={data:function(){return{alert_success:!1,alert_error:!1,mode:!0,disease_id:"",disease_name:"",disease_icd:"",disease_type:"",show:!1,search:"",expand:!1,selected:[],signal:"",headers:[{text:"疾病编号",align:"left",value:"disease_id"},{text:"疾病名称",value:"disease_name"},{text:"国际ICD编码",value:"disease_icd"},{text:"疾病类型",value:"disease_type"},{text:"操作",value:"operation",sortable:!1}],desserts:[]}},methods:{load:function(){var e=this,t=this.HOME+"/maintenance/disease/get-all";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{}).then(function(t){console.log(t.data),e.desserts=t.data.data})},deleteItem:function(e){var t=this,i=this.HOME+"/maintenance/disease/delete";this.$http.post(i+"?token="+sessionStorage.getItem("token"),{disease_id:e.disease_id}).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.load(),t.notice_success()):t.notice_error()}),console.log(this.signal)},addItem:function(){var e={disease_id:this.disease_id,disease_name:this.disease_name,disease_icd:this.disease_icd,disease_type:this.disease_type},t=this,i=this.HOME+"/maintenance/disease/add";this.$http.post(i+"?token="+sessionStorage.getItem("token"),e).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.show=!t.show,t.load(),t.notice_success()):t.notice_error()}),console.log(this.signal)},updateItem:function(){var e={disease_id:this.disease_id,disease_name:this.disease_name,disease_icd:this.disease_icd,disease_type:this.disease_type},t=this,i=this.HOME+"/maintenance/disease/update";this.$http.post(i+"?token="+sessionStorage.getItem("token"),e).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.show=!t.show,t.load(),t.notice_success()):t.notice_error()}),console.log(this.signal)},fillForm:function(e){this.disease_id=e.disease_id,this.disease_name=e.disease_name,this.disease_icd=e.disease_icd,this.disease_type=e.disease_type},eraseForm:function(){this.disease_id="",this.disease_name="",this.disease_icd="",this.disease_type=""},notice_success:function(){this.change_success(),window.setTimeout(this.change_success,1500)},change_success:function(){this.alert_success=!this.alert_success},notice_error:function(){this.change_error(),window.setTimeout(this.change_error,1500)},change_error:function(){this.alert_error=!this.alert_error},delete_selected:function(){for(var e=this,t=function(t){a={disease_id:e.selected[t].disease_id};var i=e;s=e.HOME+"/maintenance/disease/delete",e.$http.post(s+"?token="+sessionStorage.getItem("token"),{disease_id:a.disease_id}).then(function(e){console.log(e.data),i.signal=e.data.msg,"SUCCESS"===i.signal&&(i.load(),1)})},i=0;i<this.selected.length;i++){var a,s;t(i)}this.count===this.length?this.notice_success():this.notice_error()}},mounted:function(){this.load()},computed:{},watch:{show:function(e,t){!1===e&&this.eraseForm()}}},q={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",[i("v-dialog",{attrs:{width:"300"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("v-layout",{attrs:{"justify-center":""}},[i("v-flex",{attrs:{xs12:""}},[i("v-card",{ref:"form"},[i("v-card-text",[i("v-text-field",{ref:"name",attrs:{"error-messages":e.errorMessages,label:"疾病编号",placeholder:"请输入疾病编号",disabled:!e.mode,required:""},model:{value:e.disease_id,callback:function(t){e.disease_id=t},expression:"disease_id"}}),e._v(" "),i("v-text-field",{ref:"address",attrs:{label:"疾病名称",placeholder:"请输入疾病名称",required:""},model:{value:e.disease_name,callback:function(t){e.disease_name=t},expression:"disease_name"}}),e._v(" "),i("v-text-field",{ref:"city",attrs:{label:"国际ICD编码",placeholder:"请输入国际ICD编码",required:""},model:{value:e.disease_icd,callback:function(t){e.disease_icd=t},expression:"disease_icd"}}),e._v(" "),i("v-text-field",{ref:"country",attrs:{label:"疾病类型",placeholder:"请输入疾病类型",required:""},model:{value:e.disease_type,callback:function(t){e.disease_type=t},expression:"disease_type"}})],1),e._v(" "),i("v-card-actions",[i("v-btn",{attrs:{flat:""},on:{click:function(t){e.show=!e.show}}},[e._v("取消")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-slide-x-reverse-transition",[e.formHasErrors?i("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[i("v-btn",e._g({staticClass:"my-0",attrs:{icon:""},on:{click:e.resetForm}},a),[i("v-icon",[e._v("refresh")])],1)]}}],null,!1,510568536)},[e._v(" "),i("span",[e._v("Refresh form")])]):e._e()],1),e._v(" "),e.mode?i("div",[i("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.addItem}},[e._v("确定")])],1):i("div",[i("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.updateItem}},[e._v("确定")])],1)],1)],1)],1)],1)],1),e._v(" "),i("v-alert",{attrs:{value:e.alert_success,type:"success",transition:"slide-y-transition"}},[e._v("\n    This is a success alert.\n  ")]),e._v(" "),i("v-alert",{attrs:{value:e.alert_error,type:"error",transition:"slide-y-transition"}},[e._v("\n    This is a error alert.\n  ")]),e._v(" "),i("v-flex",[i("v-toolbar",{attrs:{flat:""}},[i("v-flex",{attrs:{xs3:""}},[i("v-text-field",{attrs:{"prepend-inner-icon":"search",rules:e.nameRules,label:"编号/名称",required:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:function(t){e.show=!e.show,e.mode=!0}}},[i("v-icon",[e._v("\n          add\n        ")])],1),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:e.delete_selected}},[i("v-icon",[e._v("\n          delete\n        ")])],1)],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.desserts,search:e.search,"item-key":"disease_id","select-all":""},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.disease_id))]),e._v(" "),i("td",[e._v(e._s(t.item.disease_name))]),e._v(" "),i("td",[e._v(e._s(t.item.disease_icd))]),e._v(" "),i("td",[e._v(e._s(t.item.disease_type))]),e._v(" "),i("td",[i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(i){e.show=!e.show,e.mode=!1,e.fillForm(t.item)}}},[e._v("\n            edit\n          ")]),e._v(" "),i("v-icon",{attrs:{small:""},on:{click:function(i){return e.deleteItem(t.item)}}},[e._v("\n            delete\n          ")])],1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1)},staticRenderFns:[]};var D={name:"workforce",data:function(){return{show_calendar:!1,type:"month",allSchedule:[],start:"2019-06-13",end:"2019-06-20",alert_success:!1,alert_error:!1,signal:"",date:["",""],show:!1,edit_show:!1,expand:!1,rule_id:"",rule_name:"",department_name:"",doctor_name:"",rule_work_time:"",rule_name_create:"",department_rule:"",register_level_rule:"",department_scheduling:"",items_departments:[],items_register_level:[],desserts_rule:[],doctor_rule:[],selected_rule:[],search_scheduling:"",selected_scheduling:[],rule_schedule:[],desserts_scheduling:[],doctor:[],doctors:[],headers_rule:[{text:"医生ID",align:"left",value:"doctor_id"},{text:"医生名称",align:"left",value:"doctor_name"},{text:"星期一上午"},{text:"星期一下午"},{text:"星期二上午"},{text:"星期二下午"},{text:"星期三上午"},{text:"星期三下午"},{text:"星期四上午"},{text:"星期四下午"},{text:"星期五上午"},{text:"星期五下午"},{text:"星期六上午"},{text:"星期六下午"},{text:"星期日上午"},{text:"星期日下午"}],headers_scheduling:[{text:"规则ID",align:"left",value:"rule_id"},{text:"规则名称",value:"rule_name"},{text:"科室名称",value:"department_name"},{text:"医生名称",value:"doctor_name"},{text:"时间",value:"rule_work_time"},{text:"操作",value:"operation"}],events:[{title:"Vacation",details:"Going to the beach!",date:"2019-06-16",open:!1}]}},mounted:function(){this.load(),this.load_rule(),this.load_doctor()},methods:{open:function(e){alert(e.title)},load_rule:function(){var e=this;e.desserts_scheduling=[];var t=this.HOME+"/rule/get-all-names";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{}).then(function(t){console.log(t.data),e.desserts_scheduling=t.data.data})},load:function(){this.load_schedule(),this.items_departments=[],this.items_register_level=[];var e=this,t=this.HOME+"/maintenance/department/get-all";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{}).then(function(t){console.log(t.data),e.items_departments=t.data.data}),t=this.HOME+"/maintenance/register-level/get-all",this.$http.post(t+"?token="+sessionStorage.getItem("token"),{}).then(function(t){console.log(t.data),e.items_register_level=t.data.data})},department_level_doctor:function(){this.desserts_rule=[],this.doctor_rule=[];var e=this,t=this.HOME+"/rule/get-department_level_doctor",i={department_id:e.department_rule,register_level_id:e.register_level_rule};this.$http.post(t+"?token="+sessionStorage.getItem("token"),i).then(function(t){console.log(t.data),e.doctor_rule=t.data.data,console.log("This is the doctor length"),console.log(e.doctor_rule.length);for(var i=0;i<e.doctor_rule.length;i++){var a={doctor_id:e.doctor_rule[i].doctor_id,doctor_name:e.doctor_rule[i].doctor_name,time:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]};e.desserts_rule.push(a)}})},add_Rule:function(){var e=this,t=this.HOME+"/rule/add";console.log(e.selected_rule);for(var i=[],a=0;a<e.selected_rule[0].time.length;a++)e.selected_rule[0].time[a]?i[a]=1:i[a]=0;var s=i.join(""),n={rule_doctor_id:e.selected_rule[0].doctor_id,rule_work_time:s,rule_name:e.rule_name_create};this.$http.post(t+"?token="+sessionStorage.getItem("token"),n).then(function(t){console.log(t.data),e.signal=t.data.msg,"SUCCESS"===e.signal?(e.load_rule(),e.show=!e.show,e.notice_success()):e.notice_error()})},add_schedule:function(){var e={schedule_start_date:this.date[0],schedule_end_date:this.date[1],schedule_work_time:this.selected_scheduling[0].rule_work_time,schedule_doctor_name:this.selected_scheduling[0].doctor_name,schedule_doctor_id:this.selected_scheduling[0].doctor_id},t=this,i=this.HOME+"/schedule/add";this.$http.post(i+"?token="+sessionStorage.getItem("token"),e).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.load_schedule(),t.load_rule(),t.notice_success()):t.notice_error()}),console.log(this.signal)},load_schedule:function(){this.events=[];var e=this,t=this.HOME+"/schedule/get-all";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{}).then(function(t){if(e.allSchedule=t.data.data,console.log(t.data),e.signal=t.data.msg,"SUCCESS"===e.signal){console.log("!!!!!!!!!!!!!!!!!!"),console.log(e.allSchedule.length);for(var i=0;i<e.allSchedule.length;i++){var a=e.allSchedule[i].schedule_start_date.substring(0,10),s=e.allSchedule[i].schedule_end_date.substring(0,10);a=a.replace(/-/g,"/"),s=s.replace(/-/g,"/"),console.log("?????????????????"),e.getDiffDate(a,s,e.allSchedule[i].schedule_doctor_name,e.allSchedule[i].schedule_work_time)}}else e.notice_error()})},getDiffDate:function(e,t,i,a){var s=new Date(e),n=new Date(t),r=[],l=a.split("");for(console.log(l);n.getTime()-s.getTime()>0;){var o=s.getFullYear()+"-"+(1===s.getMonth().toString().length?"0"+(parseInt(s.getMonth().toString(),10)+1):s.getMonth()+1)+"-"+(1===s.getDate().toString().length?"0"+s.getDate():s.getDate());r.push(o);var c=s.getDay();"1"===l[2*c-2]&&"1"===l[2*c-1]?this.events.push({title:i,details:"上午和下午排班",date:o,open:!1}):"1"===l[2*c-2]?this.events.push({title:i,details:"上午排班",date:o,open:!1}):"1"===l[2*c-1]?this.events.push({title:i,details:"下午排班",date:o,open:!1}):"1"===l[12]&&0===c&&"1"===l[13]?this.events.push({title:i,details:"上午和下午排班",date:o,open:!1}):"1"===l[12]&&0===c?this.events.push({title:i,details:"上午排班",date:o,open:!1}):"1"===l[13]&&0===c&&this.events.push({title:i,details:"下午排班",date:o,open:!1}),s.setDate(s.getDate()+1)}},updateItem:function(){var e={rule_id:this.rule_id,rule_name:this.rule_name,rule_work_time:this.rule_work_time},t=this,i=this.HOME+"/rule/update";this.$http.post(i+"?token="+sessionStorage.getItem("token"),e).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.load_rule(),t.edit_show=!t.edit_show,t.notice_success()):t.notice_error()}),console.log(this.signal)},deleteItem:function(e){var t=this,i=this.HOME+"/rule/delete";this.$http.post(i+"?token="+sessionStorage.getItem("token"),{rule_id:e.rule_id}).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.load_rule(),t.notice_success()):t.notice_error()}),console.log(this.signal)},fillForm:function(e){this.rule_id=e.rule_id,this.rule_name=e.rule_name,this.department_name=e.department_name,this.doctor_name=e.doctor_name,this.rule_work_time=e.rule_work_time},eraseForm:function(){this.rule_id="",this.rule_name="",this.department_name="",this.doctor_name="",this.rule_work_time=""},eraseForm_add:function(){this.desserts_rule=[],this.department_rule="",this.register_level_rule="",this.rule_name_create=""},notice_success:function(){this.change_success(),window.setTimeout(this.change_success,1500)},change_success:function(){this.alert_success=!this.alert_success},notice_error:function(){this.change_error(),window.setTimeout(this.change_error,1500)},change_error:function(){this.alert_error=!this.alert_error},delete_selected:function(){for(var e=this,t=function(t){a={rule_id:e.selected_scheduling[t].rule_id};var i=e;s=e.HOME+"/rule/delete",e.$http.post(s+"?token="+sessionStorage.getItem("token"),{rule_id:a.rule_id}).then(function(e){console.log(e.data),i.signal=e.data.msg,"SUCCESS"===i.signal&&(i.load_rule(),1)})},i=0;i<this.selected_scheduling.length;i++){var a,s;t(i)}this.count===this.length?this.notice_success():this.notice_error()}},watch:{edit_show:function(e,t){!1===e&&this.eraseForm()},show:function(e,t){!1===e&&this.eraseForm_add()}},computed:{eventsMap:function(){var e={};return this.events.forEach(function(t){return(e[t.date]=e[t.date]||[]).push(t)}),e}}},F={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",[i("v-dialog",{model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("v-card",[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[e._v("新增排班规则")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-flex",{attrs:{md2:""}},[i("v-select",{attrs:{items:e.items_departments,"item-text":"department_name","item-value":"department_id",label:"科室"},model:{value:e.department_rule,callback:function(t){e.department_rule=t},expression:"department_rule"}})],1),e._v(" "),i("v-flex",{attrs:{md2:""}},[i("v-select",{staticStyle:{"margin-left":"10px","margin-right":"10px"},attrs:{items:e.items_register_level,"item-text":"register_level_name","item-value":"register_level_id",label:"挂号等级"},model:{value:e.register_level_rule,callback:function(t){e.register_level_rule=t},expression:"register_level_rule"}})],1),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:e.department_level_doctor}},[i("v-icon",[e._v("\n          refresh\n        ")])],1)],1),e._v(" "),i("v-data-table",{staticClass:"scroll-y",attrs:{headers:e.headers_rule,items:e.desserts_rule,"item-key":"doctor_id","select-all":"","hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.doctor_id))]),e._v(" "),i("td",[e._v(e._s(t.item.doctor_name))]),e._v(" "),e._l(14,function(a){return i("td",{key:a},[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.item.time[a-1],callback:function(i){e.$set(t.item.time,a-1,i)},expression:"props.item.time[n-1]"}})],1)})]}}]),model:{value:e.selected_rule,callback:function(t){e.selected_rule=t},expression:"selected_rule"}}),e._v(" "),i("v-divider"),e._v(" "),i("v-card-actions",[i("v-layout",{attrs:{"align-center":"","justify-center":"",row:"","fill-height":""}},[i("v-flex",{attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"规则名称",required:""},model:{value:e.rule_name_create,callback:function(t){e.rule_name_create=t},expression:"rule_name_create"}})],1),e._v(" "),i("v-btn",{staticStyle:{"margin-left":"20px","margin-right":"10px"},attrs:{color:"primary"},on:{click:e.add_Rule}},[e._v("\n          保存\n        ")])],1)],1)],1)],1),e._v(" "),i("v-alert",{attrs:{value:e.alert_success,type:"success",transition:"slide-y-transition"}},[e._v("\n    This is a success alert.\n  ")]),e._v(" "),i("v-alert",{attrs:{value:e.alert_error,type:"error",transition:"slide-y-transition"}},[e._v("\n    This is a error alert.\n  ")]),e._v(" "),i("v-dialog",{attrs:{width:"300"},model:{value:e.edit_show,callback:function(t){e.edit_show=t},expression:"edit_show"}},[i("v-layout",{attrs:{"justify-center":""}},[i("v-flex",{attrs:{xs12:""}},[i("v-card",{ref:"form"},[i("v-card-text",[i("v-text-field",{ref:"address",attrs:{disabled:!0,label:"规则ID",placeholder:"请输入规则ID",required:""},model:{value:e.rule_id,callback:function(t){e.rule_id=t},expression:"rule_id"}}),e._v(" "),i("v-text-field",{ref:"name",attrs:{"error-messages":e.errorMessages,label:"规则名称",placeholder:"请输入规则名称",required:""},model:{value:e.rule_name,callback:function(t){e.rule_name=t},expression:"rule_name"}}),e._v(" "),i("v-text-field",{ref:"address",attrs:{disabled:!0,label:"科室",placeholder:"请输入科室",required:""},model:{value:e.department_name,callback:function(t){e.department_name=t},expression:"department_name"}}),e._v(" "),i("v-text-field",{ref:"city",attrs:{disabled:!0,label:"医生姓名",placeholder:"请输入医生姓名",required:""},model:{value:e.doctor_name,callback:function(t){e.doctor_name=t},expression:"doctor_name"}}),e._v(" "),i("v-text-field",{ref:"country",attrs:{label:"工作时间",placeholder:"请输入工作时间",required:""},model:{value:e.rule_work_time,callback:function(t){e.rule_work_time=t},expression:"rule_work_time"}})],1),e._v(" "),i("v-card-actions",[i("v-btn",{attrs:{flat:""},on:{click:function(t){e.edit_show=!e.edit_show}}},[e._v("取消")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-slide-x-reverse-transition",[e.formHasErrors?i("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[i("v-btn",e._g({staticClass:"my-0",attrs:{icon:""},on:{click:e.resetForm}},a),[i("v-icon",[e._v("refresh")])],1)]}}],null,!1,510568536)},[e._v(" "),i("span",[e._v("Refresh form")])]):e._e()],1),e._v(" "),i("div",[i("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.updateItem}},[e._v("确定")])],1)],1)],1)],1)],1)],1),e._v(" "),i("v-flex",[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[e._v("排班规则列表")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-flex",{attrs:{xs2:""}},[i("v-select",{staticStyle:{"margin-right":"20px"},attrs:{items:e.items_departments,"item-text":"department_name","item-value":"department_name",label:"科室"},model:{value:e.department_scheduling,callback:function(t){e.department_scheduling=t},expression:"department_scheduling"}})],1),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:function(t){e.show=!e.show}}},[i("v-icon",[e._v("\n          add\n        ")])],1),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:e.delete_selected}},[i("v-icon",[e._v("\n          delete\n        ")])],1)],1),e._v(" "),i("v-data-table",{attrs:{headers:e.headers_scheduling,items:e.desserts_scheduling,"item-key":"rule_id",search:e.department_scheduling,"select-all":""},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.rule_id))]),e._v(" "),i("td",[e._v(e._s(t.item.rule_name))]),e._v(" "),i("td",[e._v(e._s(t.item.doctor_id))]),e._v(" "),i("td",[e._v(e._s(t.item.department_name))]),e._v(" "),i("td",[e._v(e._s(t.item.doctor_name))]),e._v(" "),i("td",[e._v(e._s(t.item.rule_work_time))]),e._v(" "),i("td",[i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(i){e.edit_show=!e.edit_show,e.fillForm(t.item)}}},[e._v("\n            edit\n          ")]),e._v(" "),i("v-icon",{attrs:{small:""},on:{click:function(i){return e.deleteItem(t.item)}}},[e._v("\n            delete\n          ")])],1)]}}]),model:{value:e.selected_scheduling,callback:function(t){e.selected_scheduling=t},expression:"selected_scheduling"}})],1),e._v(" "),i("v-divider"),e._v(" "),i("v-card-actions",[i("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.show_calendar=!e.show_calendar}}},[e._v("显示排班")]),e._v(" "),i("v-spacer"),e._v(" "),i("el-date-picker",{staticStyle:{"margin-right":"10px"},attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),e._v(" "),i("v-btn",{attrs:{color:"primary"},on:{click:e.add_schedule}},[e._v("保存")])],1),e._v(" "),i("v-dialog",{attrs:{width:"800px"},model:{value:e.show_calendar,callback:function(t){e.show_calendar=t},expression:"show_calendar"}},[i("v-layout",{attrs:{"justify-center":""}},[i("v-card",{staticStyle:{width:"800px"}},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{staticClass:"mb-3",attrs:{xs12:""}},[i("v-sheet",{attrs:{height:"500"}},[i("v-calendar",{ref:"calendar",attrs:{end:e.end,type:e.type,color:"primary"},scopedSlots:e._u([{key:"day",fn:function(t){var a=t.date;return[e._l(e.eventsMap[a],function(t){return[i("v-menu",{key:t.title,attrs:{"full-width":"","offset-x":""},scopedSlots:e._u([{key:"activator",fn:function(a){var s=a.on;return[t.time?e._e():i("div",e._g({directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"my-event",domProps:{innerHTML:e._s(t.title)}},s))]}}],null,!0),model:{value:t.open,callback:function(i){e.$set(t,"open",i)},expression:"event.open"}},[e._v(" "),i("v-card",{attrs:{color:"grey lighten-4","min-width":"350px",flat:""}},[i("v-toolbar",{attrs:{color:"primary",dark:""}},[i("v-btn",{attrs:{icon:""}},[i("v-icon",[e._v("edit")])],1),e._v(" "),i("v-toolbar-title",{domProps:{innerHTML:e._s(t.title)}}),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{icon:""}},[i("v-icon",[e._v("favorite")])],1),e._v(" "),i("v-btn",{attrs:{icon:""}},[i("v-icon",[e._v("more_vert")])],1)],1),e._v(" "),i("v-card-title",{attrs:{"primary-title":""}},[i("span",{domProps:{innerHTML:e._s(t.details)}})]),e._v(" "),i("v-card-actions",[i("v-btn",{attrs:{flat:"",color:"secondary"}},[e._v("\n                            取消\n                          ")])],1)],1)],1)]})]}}]),model:{value:e.start,callback:function(t){e.start=t},expression:"start"}})],1)],1),e._v(" "),i("v-flex",{staticClass:"text-sm-left text-xs-center",attrs:{sm4:"",xs12:"","offset-xs1":""}},[i("v-btn",{on:{click:function(t){return e.$refs.calendar.prev()}}},[i("v-icon",{attrs:{dark:"",left:""}},[e._v("\n                keyboard_arrow_left\n              ")]),e._v("\n              前一月\n            ")],1)],1),e._v(" "),i("v-flex",{staticClass:"text-sm-right text-xs-center",attrs:{sm4:"",xs12:"","offset-xs2":""}},[i("v-btn",{on:{click:function(t){return e.$refs.calendar.next()}}},[e._v("\n              后一月\n              "),i("v-icon",{attrs:{right:"",dark:""}},[e._v("\n                keyboard_arrow_right\n              ")])],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var U={data:function(){return{active:null,items:[{name:"科室管理",id:"office"},{name:"用户管理",id:"user"},{name:"挂号级别管理",id:"registerLevel"},{name:"常数类别管理",id:"patCate"},{name:"诊断信息管理",id:"diagnosis"},{name:"非药品收费项目管理",id:"nonMedcine"},{name:"医生排班管理",id:"workforce"}]}},components:{office:i("VU/8")(y,w,!1,function(e){i("QplR")},"data-v-32e09088",null).exports,user:i("VU/8")(S,I,!1,function(e){i("wtnl")},"data-v-526ce8a5",null).exports,registerLevel:i("VU/8")(C,$,!1,function(e){i("cjFl")},"data-v-8ece54e6",null).exports,payCate:i("VU/8")(M,E,!1,function(e){i("NLBb")},"data-v-46ebe4f5",null).exports,nonMedicine:i("VU/8")(H,T,!1,function(e){i("sdMZ")},"data-v-f42e9630",null).exports,diagnosis:i("VU/8")(O,q,!1,function(e){i("n9yD")},"data-v-4c4c1965",null).exports,workforce:i("VU/8")(D,F,!1,function(e){i("XODV")},"data-v-6849e57a",null).exports},mounted:function(){this.Check()},computed:{},watch:{},methods:{Check:function(){var e=window.localStorage;if("医院管理员"===e.getItem("type")){var t={account:e.getItem("account"),department_id:e.getItem("department_id"),id:e.getItem("id"),name:e.getItem("name"),type:e.getItem("type")};this.$store.commit("set_user",t),this.$store.commit("login")}this.$store.state.isLogin&&"医院管理员"===this.$store.state.user.type?this.$router.push("/BasicInfo"):this.$router.push("/login")}}},R={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-tabs",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[e._l(e.items,function(t){return i("v-tab",{key:t,attrs:{ripple:""}},[e._v("\n    "+e._s(t.name)+"\n    ")])}),e._v(" "),e._l(e.items,function(t){return i("v-tab-item",{key:t},[i("v-card",{attrs:{flat:""}},["diagnosis"==t.id?i("div",[i("diagnosis")],1):e._e(),e._v(" "),"office"==t.id?i("div",[i("office")],1):e._e(),e._v(" "),"user"==t.id?i("div",[i("user")],1):e._e(),e._v(" "),"registerLevel"==t.id?i("div",[i("registerLevel")],1):e._e(),e._v(" "),"nonMedcine"==t.id?i("div",[i("non-medicine")],1):e._e(),e._v(" "),"workforce"==t.id?i("div",[i("workforce")],1):e._e(),e._v(" "),"patCate"==t.id?i("div",[i("pay-cate")],1):e._e()])],1)})],2)],1)},staticRenderFns:[]};var j=i("VU/8")(U,R,!1,function(e){i("g6Y0")},"data-v-3b964f76",null).exports,P={props:["msgfromfa","record"],data:function(){return{dialog_add:!1,dialog_err:!1,dialog_suc:!1,msg_suc:"success",msg_err:"error",dialog:!1,selected:[],selected_dia:[],show:!1,expand:!1,expand_CH:!1,expand_WE:!1,headers:[{text:"编码",align:"left",value:"diagnose_disease_id"},{text:"名称",value:"diagnose_disease_name"},{text:"发病时间",value:"diagnose_time"}],desserts:[],headers_dia:[{text:"编码",align:"left",value:"disease_icd"},{text:"名称",value:"disease_name"},{text:"分类",value:"disease_type"}],desserts_dia:[],form:{record_syndrome:"",record_health_check:"",record_xianbingshi:"",record_jiwangshi:"",record_cure_situation:"",record_allergy_his:"",diagnosis:{cate:"",content:[]},record_suggestion:"",record_attention:""}}},mounted:function(){this.load_diagnosis(),console.log(this.msgfromfa)},watch:{dialog_suc:function(e){var t=this;e&&setTimeout(function(){return t.dialog_suc=!1},1e3)},dialog_err:function(e){var t=this;e&&setTimeout(function(){return t.dialog_err=!1},1e3)},dialog:function(e){var t=this;e&&setTimeout(function(){return t.network_out},1e4)}},methods:{network_out:function(){this.dialog=!1,this.dialog_err=!0,this.msg_err="网络不通畅，请重新来过"},getItem:function(){var e=this,t=this.HOME+"";this.$http.get(t).then(function(t){e.desserts=t.data})},addItem:function(){var e;this.show=!this.show,console.log(this.selected_dia);var t=new Date,i=t.getFullYear()+"-"+(1===t.getMonth().toString().length?"0"+(parseInt(t.getMonth().toString(),10)+1):t.getMonth()+1)+"-"+(1===t.getDate().toString().length?"0"+t.getDate():t.getDate())+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();for(e=0;e<this.selected_dia.length;e++){var a={diagnose_disease_id:this.selected_dia[e].disease_id,diagnose_record_id:this.msgfromfa.register_info_id,diagnose_disease_name:this.selected_dia[e].disease_name,diagnose_time:i};this.desserts.push(a)}console.log(this.desserts)},submit_diagnoses:function(){var e=this,t=this.HOME+"/doctor/submit-first-diagnose";this.$http.post(t+"?token="+sessionStorage.getItem("token"),this.desserts).then(function(t){console.log(t.data),200===t.data.code?(e.dialog_suc=!0,e.msg_suc="操作成功"):(e.dialog_err=!0,e.msg_err="诊断未成功提交，请重新来过")})},submit:function(){var e=this,t=this,i=this.HOME+"/doctor/submit-record";t.dialog=!0;var a={record_syndrome:t.form.record_syndrome,record_health_check:t.form.record_health_check,record_xianbingshi:t.form.record_xianbingshi,record_jiwangshi:t.form.record_jiwangshi,record_cure_situation:t.form.record_cure_situation,record_allergy_his:t.form.record_allergy_his,record_suggestion:t.form.record_suggestion,record_attention:t.form.record_attention,record_patient_id:t.msgfromfa.register_info_patient_id,record_doctor_id:t.msgfromfa.register_info_doctor_id,record_id:t.msgfromfa.register_info_id,record_doctor_type:t.form.diagnosis.cate};this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(i){console.log(i.data),e.submit_diagnoses(),e.confirm_record(),t.dialog=!1})},confirm_record:function(){var e=this.HOME+"/doctor/confirm-first-diagnose",t={record_id:this.msgfromfa.register_info_id};this.$http.post(e+"?token="+sessionStorage.getItem("token"),t).then(function(e){console.log(e.data)})},clear:function(){this.form={record_syndrome:"",record_health_check:"",record_xianbingshi:"",record_jiwangshi:"",record_cure_situation:"",record_allergy_his:"",record_suggestion:"",record_attention:"",diagnosis:{cate:"",content:[]}},this.desserts=[],this.dialog_suc=!0,this.msg_suc="已清空"},save:function(){var e=this,t=this.HOME+"/doctor/submit-record",i={record_syndrome:e.form.record_syndrome,record_health_check:e.form.record_health_check,record_xianbingshi:e.form.record_xianbingshi,record_jiwangshi:e.form.record_jiwangshi,record_patient_id:e.msgfromfa.register_info_patient_id,record_doctor_id:e.msgfromfa.register_info_doctor_id,record_cure_situation:e.form.record_cure_situation,record_allergy_his:e.form.record_allergy_his,record_suggestion:e.form.record_suggestion,record_attention:e.form.record_attention,record_id:e.msgfromfa.register_info_id,record_doctor_type:e.form.diagnosis.cate};this.$http.post(t+"?token="+sessionStorage.getItem("token"),i).then(function(t){console.log(t.data),200===t.data.code?e.submit_diagnoses():(e.dialog_err=!0,e.msg_err="暂存操作未成功，请重新来过")})},load_diagnosis:function(){var e=this,t=this.HOME+"/maintenance/disease/get-all";this.$http.post(t+"?token="+sessionStorage.getItem("token")).then(function(t){e.desserts_dia=t.data.data})},refresh:function(){var e=this,t=this.HOME+"/doctor/get-record",i={record_id:e.msgfromfa.register_info_id};e.dialog=!0,this.$http.post(t+"?token="+sessionStorage.getItem("token"),i).then(function(t){if(console.log(t.data.data),200===t.data.code){var i;for(e.form.record_syndrome=t.data.data.record_syndrome,e.form.record_health_check=t.data.data.record_health_check,e.form.record_xianbingshi=t.data.data.record_xianbingshi,e.form.record_jiwangshi=t.data.data.record_jiwangshi,e.form.record_cure_situation=t.data.data.record_cure_situation,e.form.record_allergy_his=t.data.data.record_allergy_his,e.form.record_suggestion=t.data.data.record_suggestion,e.form.record_attention=t.data.data.record_attention,e.form.diagnosis.cate=t.data.data.record_doctor_type,e.desserts=[],i=0;i<t.data.data.firstDiagnoses.length;i++){var a={diagnose_disease_id:t.data.data.firstDiagnoses[i].diagnose_disease_id,diagnose_disease_name:t.data.data.firstDiagnoses[i].diagnose_disease_name,diagnose_record_id:e.msgfromfa.register_info_id,diagnose_time:t.data.data.firstDiagnoses[i].diagnose_time.slice(0,19)};e.desserts.push(a)}console.log(e.desserts),"西医"===e.form.diagnosis.cate&&(e.expand_WE=!0,e.expand_CH&&(e.expand_CH=!e.expand_CH)),"中医"===e.form.diagnosis.cate&&(e.expand_CH=!0,e.expand_WE&&(e.expand_WE=!e.expand_WE)),e.dialog=!1,e.dialog_suc=!0,e.msg_suc="刷新成功"}else e.dialog=!1,e.dialog_err=!0,e.msg_err="刷新未成功"})},choose_WE:function(){this.expand_WE=!this.expand_WE,this.form.diagnosis.cate="西医",this.form.diagnosis.content=[],this.expand_CH&&(this.expand_CH=!this.expand_CH)},choose_CH:function(){this.expand_CH=!this.expand_CH,this.form.diagnosis.cate="中医",this.form.diagnosis.content=[],this.expand_WE&&(this.expand_WE=!this.expand_WE)},indexOf:function(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1},remove:function(e,t){var i=this.indexOf(e,t);i>-1&&e.splice(i,1)},deleteItem:function(){for(var e=0;e<this.selected.length;e++)this.remove(this.desserts,this.selected[e])}}},N={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",{attrs:{color:"primary",dark:""}},[i("v-card-text",[e._v("\n        请稍等\n        "),i("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),i("v-dialog",{attrs:{"max-width":"600"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("v-card",[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v("诊断目录")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{flat:"",icon:"",dark:"",color:"primary"},on:{click:e.addItem}},[i("v-icon",[e._v("\n            add\n          ")])],1)],1),e._v(" "),i("v-data-table",{attrs:{headers:e.headers_dia,items:e.desserts_dia,"item-key":"disease_id","select-all":""},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.disease_id))]),e._v(" "),i("td",[e._v(e._s(t.item.disease_name))]),e._v(" "),i("td",[e._v(e._s(t.item.disease_type))])]}}]),model:{value:e.selected_dia,callback:function(t){e.selected_dia=t},expression:"selected_dia"}})],1)],1),e._v(" "),i("v-flex",{attrs:{shrink:""}},[i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialog_err,expression:"dialog_err"}],staticStyle:{"white-space":"nowrap"}},[i("v-alert",{attrs:{value:!0,type:"error"}},[e._v("\n          "+e._s(e.msg_err)+"\n        ")])],1)])],1),e._v(" "),i("v-flex",{attrs:{shrink:""}},[i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialog_suc,expression:"dialog_suc"}],staticStyle:{"white-space":"nowrap"}},[i("v-alert",{attrs:{value:!0,type:"success"}},[e._v("\n          "+e._s(e.msg_suc)+"\n        ")])],1)])],1),e._v(" "),i("v-card",[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-layout",{attrs:{"align-center":"","justify-space-around":"",row:"","fill-height":""}},[i("v-btn",{attrs:{small:"",color:"primary"},on:{click:e.save}},[e._v("\n      暂存\n    ")]),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:e.submit}},[e._v("\n      提交\n    ")]),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:e.clear}},[e._v("\n      清空\n    ")]),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:e.refresh}},[e._v("\n      刷新\n    ")])],1)],1),e._v(" "),i("v-layout",[i("v-flex",{attrs:{xs12:""}},[i("v-form",{staticClass:"pa-3 pt-4 scroll-y",staticStyle:{"max-height":"480px"}},[i("v-card-title",{attrs:{"primary-title":""}},[i("div",[i("h5",{staticClass:"subheading"},[e._v("病史")])])]),e._v(" "),i("v-textarea",{attrs:{box:"",label:"主诉",placeholder:"请输入主诉",rows:"1"},model:{value:e.form.record_syndrome,callback:function(t){e.$set(e.form,"record_syndrome",t)},expression:"form.record_syndrome"}}),e._v(" "),i("v-textarea",{attrs:{box:"",label:"现病史",placeholder:"请输入现病史",rows:"2"},model:{value:e.form.record_xianbingshi,callback:function(t){e.$set(e.form,"record_xianbingshi",t)},expression:"form.record_xianbingshi"}}),e._v(" "),i("v-textarea",{attrs:{box:"",label:"现病治疗情况",placeholder:"请输入现病治疗情况",rows:"2"},model:{value:e.form.record_cure_situation,callback:function(t){e.$set(e.form,"record_cure_situation",t)},expression:"form.record_cure_situation"}}),e._v(" "),i("v-textarea",{attrs:{box:"",label:"既往史",placeholder:"请输入既往史",rows:"2"},model:{value:e.form.record_jiwangshi,callback:function(t){e.$set(e.form,"record_jiwangshi",t)},expression:"form.record_jiwangshi"}}),e._v(" "),i("v-textarea",{attrs:{box:"",label:"过敏史",placeholder:"请输入过敏史",rows:"2"},model:{value:e.form.record_allergy_his,callback:function(t){e.$set(e.form,"record_allergy_his",t)},expression:"form.record_allergy_his"}}),e._v(" "),i("v-textarea",{attrs:{box:"",label:"体格检查",placeholder:"请输入体格检查",rows:"2"},model:{value:e.form.record_health_check,callback:function(t){e.$set(e.form,"record_health_check",t)},expression:"form.record_health_check"}}),e._v(" "),i("v-layout",[i("v-card-title",{attrs:{"primary-title":""}},[i("div",[i("h5",{staticClass:"subheading"},[e._v("初步诊断")])])]),e._v(" "),i("v-btn",{staticStyle:{"margin-top":"17px"},attrs:{flat:"",icon:"",color:"primary"},on:{click:function(t){e.expand=!e.expand}}},[i("v-icon",[e._v("add")])],1),e._v(" "),i("v-flex",{attrs:{shrink:""}},[i("v-expand-x-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.expand,expression:"expand"}],staticStyle:{"white-space":"nowrap"}},[i("v-btn",{staticStyle:{"margin-top":"17px"},attrs:{color:"primary"},on:{click:e.choose_WE}},[e._v("\n                西医诊断\n              ")]),e._v(" "),i("v-btn",{staticStyle:{"margin-top":"17px"},attrs:{color:"primary"},on:{click:e.choose_CH}},[e._v("\n                中医诊断\n              ")])],1)])],1)],1),e._v(" "),i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.expand_WE,expression:"expand_WE"}]},[i("v-card",[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[e._v("西医诊断")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{flat:"",icon:"",color:"primary"},on:{click:function(t){e.show=!e.show}}},[i("v-icon",[e._v(" add")])],1),e._v(" "),i("v-btn",{attrs:{flat:"",icon:"",color:"primary"},on:{click:e.deleteItem}},[i("v-icon",[e._v("delete")])],1)],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",staticStyle:{"margin-bottom":"20px"},attrs:{headers:e.headers,items:e.desserts,"item-key":"diagnose_disease_id","select-all":""},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.diagnose_disease_id))]),e._v(" "),i("td",[e._v(e._s(t.item.diagnose_disease_name))]),e._v(" "),i("td",[e._v(e._s(t.item.diagnose_time))])]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1)]),e._v(" "),i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.expand_CH,expression:"expand_CH"}]},[i("v-card",[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[e._v("中医诊断")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{flat:"",icon:"",color:"primary"},on:{click:function(t){e.show=!e.show}}},[i("v-icon",[e._v(" add")])],1),e._v(" "),i("v-btn",{attrs:{flat:"",icon:"",color:"primary"},on:{click:e.deleteItem}},[i("v-icon",[e._v("delete")])],1)],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",staticStyle:{"margin-bottom":"20px"},attrs:{headers:e.headers,items:e.desserts,"item-key":"diagnose_disease_id","select-all":""},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.diagnose_disease_id))]),e._v(" "),i("td",[e._v(e._s(t.item.diagnose_disease_name))]),e._v(" "),i("td",[e._v(e._s(t.item.diagnose_time))])]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1)]),e._v(" "),i("v-textarea",{attrs:{box:"",label:"检查建议",placeholder:"请输入检查建议",rows:"2"},model:{value:e.form.record_suggestion,callback:function(t){e.$set(e.form,"record_suggestion",t)},expression:"form.record_suggestion"}}),e._v(" "),i("v-textarea",{attrs:{box:"",label:"注意事项",placeholder:"请输入注意事项",rows:"2"},model:{value:e.form.record_attention,callback:function(t){e.$set(e.form,"record_attention",t)},expression:"form.record_attention"}})],1)],1)],1)],1)],1)},staticRenderFns:[]};var V={props:["msgfromfa","record"],data:function(){return{dialog_err:!1,dialog_suc:!1,msg_suc:"success",msg_err:"error",tem:!1,dialog:!1,selected_dia:[],selected:[],selected_tem:[],search:"",alert_success:!1,msg_success:"",alert_error:!1,msg_error:"",text:!1,show:!1,show_tem:!1,expand:!1,expand_dia:!1,isNo:[{text:"是",value:"true"},{text:"否",value:"false"}],headers_dia:[{text:"编号",align:"left",value:"medical_skill_content_id"},{text:"项目名称",value:"medical_skill_content_name"},{text:"父级编码",value:"medical_skill_content_father"},{text:"单位",value:"medical_skill_content_unit"},{text:"单价",value:"medical_skill_content_price"},{text:"操作",value:"operation"}],desserts_dia:[],headers:[{text:"项目名称",value:"medical_skill_name"},{text:"执行科室",value:"medical_skill_execute_department"},{text:"执行状态",value:"medical_skill_execute_state"},{text:"单价",value:"medical_skill_fee"},{text:"操作",value:"operation"}],desserts:[],headers_tem:[{text:"模板名称",align:"left",value:"template_name"},{text:"操作",value:"operation",sortable:!1}],headers_tem_con:[{text:"项目名称",value:"template_medical_skill_content_name"},{text:"执行科室",value:"template_medical_skill_content_department_name"},{text:"检查部位",value:"template_medical_skill_content_checkpoint"},{text:"目的",value:"template_medical_skill_content_specification"},{text:"是否加急",value:"template_medical_skill_content_department_id"},{text:"单价",value:"template_medical_skill_content_unit_price"},{text:"操作",value:"operation"}],desserts_tem:[],desserts_tem_con:[],medical_skill_name:"",medical_skill_checkpoint:"",medical_skill_purpose:"",medical_skill_urgent:"",template_name:"",template_range:"",template_id:"",template_con_name:"",template_con_range:"",template_con_type:"",template_con_id:"",departments:[],department:""}},created:function(){this.load_mediskill(),this.getItem(),this.getTem(),this.load_departs()},watch:{record:function(e,t){this.load_mediskill(),this.getItem(),this.getTem()},dialog_suc:function(e){var t=this;e&&setTimeout(function(){return t.dialog_suc=!1},1e3)},dialog_err:function(e){var t=this;e&&setTimeout(function(){return t.dialog_err=!1},1e3)},dialog:function(e){var t=this;e&&setTimeout(function(){return t.network_out},1e4)}},computed:{filterDesserts:function(){return this.desserts.filter(this.filterType)},filterDeparts:function(){return this.departments.filter(this.filterDepart)},filterDessertsTem:function(){return this.desserts_tem.filter(this.filterType_tem)},fee:function(){var e,t=0;for(e=0;e<this.filterDesserts.length;e++)t+=this.filterDesserts[e].medical_skill_fee;return t}},methods:{network_out:function(){this.dialog=!1,this.dialog_err=!0,this.msg_err="网络不通畅，请重新来过"},load_departs:function(){var e=this,t=this.HOME+"/maintenance/department/get-all";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{}).then(function(t){console.log(t.data),e.departments=t.data.data})},filterType:function(e){return"检查"===e.medical_skill_type},filterDepart:function(e){return"医技科室"===e.department_cat},filterType_tem:function(e){return"检查"===e.template_type},getTem:function(){var e=this,t={doctor_id:this.$store.state.user.id,department_id:this.$store.state.user.department_id},i=this.HOME+"/template/get-all";this.$http.post(i+"?token="+sessionStorage.getItem("token"),t).then(function(t){console.log(t.data),e.desserts_tem=t.data.data,e.dialog=!1})},deleteTem:function(){var e=this,t={template_id:e.template_con_id},i=this.HOME+"/template/delete-template";this.$http.post(i+"?token="+sessionStorage.getItem("token"),t).then(function(t){console.log(t.data),e.getTem(),e.tem=!1})},updateTem:function(){var e=this,t={template_name:e.template_con_name,template_init_date:new Date,template_type:e.template_con_type,template_range:e.template_con_range,template_id:e.template_con_id,template_doctor_id:e.msgfromfa.register_info_doctor_id},i=this.HOME+"/template/update-template";this.$http.post(i+"?token="+sessionStorage.getItem("token"),t).then(function(t){console.log(t.data),e.getTem(),e.tem=!1})},useTem:function(e){var t=this,i={template_id:e.template_id},a=this.HOME+"/template/get-content-non-medicine";this.$http.post(a+"?token="+sessionStorage.getItem("token"),i).then(function(e){var i;for(console.log(e.data),t.dialog=!0,i=0;i<e.data.data.length;i++)t.addItemByTem(e.data.data[i]);t.dialog=!1})},seeTem:function(e){var t=this;this.tem=!0;var i={template_id:e.template_id};t.template_con_name=e.template_name,t.template_con_range=e.template_range,t.template_con_type=e.template_type,t.template_con_id=e.template_id;var a=this.HOME+"/template/get-content-non-medicine";this.$http.post(a+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data),t.desserts_tem_con=e.data.data,t.dialog=!1})},addTem:function(){var e=this,t={template_type:"检查",template_name:e.template_name,template_range:e.template_range,template_doctor_id:e.msgfromfa.register_info_doctor_id};console.log(t);var i=this.HOME+"/template/add-template";this.$http.post(i+"?token="+sessionStorage.getItem("token"),t).then(function(t){console.log(t.data),e.dialog=!0,e.template_con_id=t.data.data.template_id,e.addTemContent(),e.text=!1,e.getTem(),e.dialog=!1})},addTemContent:function(){var e,t=this.HOME+"/template/add-content-non-medicine";for(e=0;e<this.filterDesserts.length;e++){var i={template_connect_id:this.template_con_id,template_medical_skill_content_id:this.filterDesserts[e].medical_skill_content_id,template_medical_skill_content_name:this.filterDesserts[e].medical_skill_name,template_medical_skill_content_department_id:this.filterDesserts[e].medical_skill_urgent,template_medical_skill_content_specification:this.filterDesserts[e].medical_skill_purpose,template_medical_skill_content_checkpoint:this.filterDesserts[e].medical_skill_checkpoint,template_medical_skill_content_department_name:this.filterDesserts[e].medical_skill_execute_department,template_medical_skill_content_unit_price:this.filterDesserts[e].medical_skill_fee};console.log(i),this.$http.post(t+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data)})}},addTemContentSingle:function(e){var t=this,i=this.HOME+"/template/add-content-non-medicine",a={template_connect_id:t.template_con_id,template_medical_skill_content_id:e.medical_skill_content_id,template_medical_skill_content_name:e.medical_skill_content_name,template_medical_skill_content_department_id:t.medical_skill_urgent,template_medical_skill_content_specification:t.medical_skill_purpose,template_medical_skill_content_checkpoint:t.medical_skill_checkpoint,template_medical_skill_content_department_name:t.department.department_name,template_medical_skill_content_unit_price:e.medical_skill_content_price};t.medical_skill_urgent="",t.medical_skill_purpose="",t.medical_skill_checkpoint="",console.log(e),t.dialog=!0,this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data);var i={template_name:t.template_con_name,template_range:t.template_con_range,template_type:t.template_con_type,template_id:t.template_con_id};t.seeTem(i),t.dialog=!1,t.show_tem=!1})},deleteTemContentSingle:function(e){var t=this,i=this.HOME+"/template/delete-content",a={template_content_id:e.template_content_id};t.dialog=!0,console.log(e),this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data);var i={template_name:t.template_con_name,template_range:t.template_con_range,template_type:t.template_con_type,template_id:t.template_con_id};t.seeTem(i)})},deleteTemContent:function(){var e,t=this,i=this.HOME+"/template/delete-content";for(e=0;e<t.selected_tem.length;e++){var a={template_content_id:t.selected_tem[e].template_content_id};console.log(a),this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data);var i={template_name:t.template_con_name,template_range:t.template_con_range,template_type:t.template_con_type,template_id:t.template_con_id};t.dialog=!0,t.seeTem(i)})}},getItem:function(){var e=this,t=this.HOME+"/doctor/get-record",i={record_id:e.msgfromfa.register_info_id};this.$http.post(t+"?token="+sessionStorage.getItem("token"),i).then(function(t){console.log(t.data.data),e.desserts=t.data.data.medicalSkills})},addItem:function(e){var t=this;console.log(e);var i={medical_skill_type:"检查",medical_skill_name:e.medical_skill_content_name,medical_skill_checkpoint:t.medical_skill_checkpoint,medical_skill_purpose:t.medical_skill_purpose,medical_skill_urgent:t.medical_skill_urgent,medical_skill_register_info_id:t.msgfromfa.register_info_id,medical_skill_doctor_id:t.msgfromfa.register_info_doctor_id,medical_skill_content_id:e.medical_skill_content_id,medical_skill_fee:e.medical_skill_content_price,medical_skill_execute_department:t.department.department_name};console.log(i);var a=this.HOME+"/doctor/add-medical-skill";this.$http.post(a+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data),t.show=!1,t.dialog=!0,t.getItem(),t.dialog=!1})},addItemByTem:function(e){var t=this;console.log(e);var i={medical_skill_type:"检查",medical_skill_name:e.template_medical_skill_content_name,medical_skill_checkpoint:e.template_medical_skill_content_checkpoint,medical_skill_purpose:e.template_medical_skill_content_specification,medical_skill_urgent:e.template_medical_skill_content_department_id,medical_skill_register_info_id:t.msgfromfa.register_info_id,medical_skill_doctor_id:t.msgfromfa.register_info_doctor_id,medical_skill_content_id:e.template_medical_skill_content_id,medical_skill_fee:e.template_medical_skill_content_unit_price,medical_skill_execute_department:e.template_medical_skill_content_department_name};console.log(i);var a=this.HOME+"/doctor/add-medical-skill";this.$http.post(a+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data),t.show=!1,t.dialog=!0,t.getItem(),t.dialog=!1})},deleteItem:function(){var e,t=this;t.dialog=!0;var i,a=this.HOME+"/doctor/delete-medical-skill";for(console.log(t.selected),e=0;e<t.selected.length;e++)i={medical_skill_id:t.selected[e].medical_skill_id},this.$http.post(a+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data),t.getItem(),t.dialog=!1})},startItem:function(){var e,t=this;t.dialog=!0;var i=this.HOME+"/doctor/start-medical-skill";for(console.log(t.selected),e=0;e<t.selected.length;e++){var a={medical_skill_id:t.selected[e].medical_skill_id};this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data),t.getItem(),t.dialog=!1})}},endItem:function(){var e,t=this;t.dialog=!0;var i=this.HOME+"/doctor/end-medical-skill";for(console.log(t.selected),e=0;e<t.selected.length;e++){var a={medical_skill_id:t.selected[e].medical_skill_id};this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data),t.getItem(),t.dialog=!1})}},load_mediskill:function(){var e=this,t=this.HOME+"/maintenance/medical-skill-content/get-all";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{}).then(function(t){console.log(t.data),e.desserts_dia=t.data.data})}}},B={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",{attrs:{color:"primary",dark:""}},[i("v-card-text",[e._v("\n        请稍等\n        "),i("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),i("v-dialog",{attrs:{"hide-overlay":"",width:"800"},model:{value:e.tem,callback:function(t){e.tem=t},expression:"tem"}},[i("v-card",[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[e._v("医技模板详情")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:e.deleteTem}},[i("v-icon",[e._v("\n            delete\n          ")])],1),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:e.updateTem}},[i("v-icon",[e._v("\n            save\n          ")])],1)],1),e._v(" "),i("v-container",{attrs:{"grid-list-md":""}},[i("v-layout",[i("v-flex",{attrs:{xs12:""}},[i("v-text-field",{attrs:{label:"模板名称",required:""},model:{value:e.template_con_name,callback:function(t){e.template_con_name=t},expression:"template_con_name"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-select",{attrs:{items:["个人","科室","全院"],label:"模板范围",required:""},model:{value:e.template_con_range,callback:function(t){e.template_con_range=t},expression:"template_con_range"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-select",{attrs:{items:["检验","检查","处置"],label:"类型",required:""},model:{value:e.template_con_type,callback:function(t){e.template_con_type=t},expression:"template_con_type"}})],1)],1)],1),e._v(" "),i("v-divider"),e._v(" "),i("v-toolbar",{attrs:{flat:"",dense:"",color:"white"}},[i("v-toolbar-title",[e._v("医技项目")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:e.deleteTemContent}},[i("v-icon",[e._v("\n            delete\n          ")])],1),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:function(t){e.show_tem=!e.show_tem}}},[i("v-icon",[e._v("\n            add\n          ")])],1)],1),e._v(" "),i("v-divider"),e._v(" "),i("v-data-table",{attrs:{headers:e.headers_tem_con,items:e.desserts_tem_con,"select-all":"","item-key":"template_content_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.template_medical_skill_content_name))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medical_skill_content_department_name))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medical_skill_content_checkpoint))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medical_skill_content_specification))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medical_skill_content_department_id))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medical_skill_content_unit_price))]),e._v(" "),i("td",[i("v-btn",{staticClass:"ml-3",attrs:{icon:"",flat:"",small:"",color:"primary",right:""},on:{click:function(i){return e.deleteTemContentSingle(t.item)}}},[e._v("\n              删除\n            ")])],1)]}}]),model:{value:e.selected_tem,callback:function(t){e.selected_tem=t},expression:"selected_tem"}})],1)],1),e._v(" "),i("v-dialog",{attrs:{"max-width":"400px"},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[e._v("添加医技模板")])]),e._v(" "),i("v-card-text",[i("v-container",{attrs:{"grid-list-md":""}},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("v-text-field",{attrs:{label:"模板名称",required:""},model:{value:e.template_name,callback:function(t){e.template_name=t},expression:"template_name"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-select",{attrs:{items:["个人","科室","全院"],label:"模板范围",required:""},model:{value:e.template_range,callback:function(t){e.template_range=t},expression:"template_range"}})],1)],1)],1)],1),e._v(" "),i("v-card-actions",[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(t){e.text=!1}}},[e._v("关闭")]),e._v(" "),i("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:e.addTem}},[e._v("保存")])],1)],1)],1),e._v(" "),i("v-dialog",{attrs:{"max-width":"800"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("v-card",[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[e._v("医技项目目录")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-flex",{attrs:{xs3:""}},[i("v-text-field",{attrs:{"prepend-inner-icon":"search",label:"编号/名称",required:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers_dia,items:e.desserts_dia,expand:e.expand_dia,search:e.search,"item-key":"medical_skill_content_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.medical_skill_content_id))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_name))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_father))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_unit))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_price))]),e._v(" "),i("td",[i("v-btn",{attrs:{icon:"",flat:"",color:"primary",right:""}},[i("v-icon",{attrs:{color:"primary"},on:{click:function(e){t.expanded=!t.expanded}}},[e._v("\n                add\n              ")])],1)],1)]}},{key:"expand",fn:function(t){return[i("v-layout",{attrs:{"align-center":"","justify-center":"",row:""}},[i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-select",{attrs:{items:e.departments,"item-text":"department_name",item_value:"department_id",label:"科室","return-object":"",required:""},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"部位",required:""},model:{value:e.medical_skill_checkpoint,callback:function(t){e.medical_skill_checkpoint=t},expression:"medical_skill_checkpoint"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"目的",required:""},model:{value:e.medical_skill_purpose,callback:function(t){e.medical_skill_purpose=t},expression:"medical_skill_purpose"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-select",{attrs:{items:e.isNo,label:"是否加急",required:""},model:{value:e.medical_skill_urgent,callback:function(t){e.medical_skill_urgent=t},expression:"medical_skill_urgent"}})],1),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(i){return e.addItem(t.item)}}},[e._v("\n              添加\n            ")])],1)]}}])})],1)],1),e._v(" "),i("v-dialog",{attrs:{"max-width":"800"},model:{value:e.show_tem,callback:function(t){e.show_tem=t},expression:"show_tem"}},[i("v-card",[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[e._v("医技项目目录")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-flex",{attrs:{xs3:""}},[i("v-text-field",{attrs:{"prepend-inner-icon":"search",label:"编号/名称",required:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers_dia,items:e.desserts_dia,expand:e.expand_dia,search:e.search,"item-key":"medical_skill_content_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.medical_skill_content_id))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_name))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_father))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_unit))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_price))]),e._v(" "),i("td",[i("v-btn",{attrs:{icon:"",flat:"",color:"primary",right:""}},[i("v-icon",{attrs:{color:"primary"},on:{click:function(e){t.expanded=!t.expanded}}},[e._v("\n                add\n              ")])],1)],1)]}},{key:"expand",fn:function(t){return[i("v-layout",{attrs:{"align-center":"","justify-center":"",row:""}},[i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-select",{attrs:{items:e.departments,"item-text":"department_name",item_value:"department_id",label:"科室","return-object":"",required:""},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"部位",required:""},model:{value:e.medical_skill_checkpoint,callback:function(t){e.medical_skill_checkpoint=t},expression:"medical_skill_checkpoint"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"目的",required:""},model:{value:e.medical_skill_purpose,callback:function(t){e.medical_skill_purpose=t},expression:"medical_skill_purpose"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-select",{attrs:{items:e.isNo,label:"是否加急",required:""},model:{value:e.medical_skill_urgent,callback:function(t){e.medical_skill_urgent=t},expression:"medical_skill_urgent"}})],1),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(i){return e.addTemContentSingle(t.item)}}},[e._v("\n              添加\n            ")])],1)]}}])})],1)],1),e._v(" "),i("v-flex",{attrs:{shrink:""}},[i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialog_err,expression:"dialog_err"}],staticStyle:{"white-space":"nowrap"}},[i("v-alert",{attrs:{value:!0,type:"error"}},[e._v("\n          "+e._s(e.msg_err)+"\n        ")])],1)])],1),e._v(" "),i("v-flex",{attrs:{shrink:""}},[i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialog_suc,expression:"dialog_suc"}],staticStyle:{"white-space":"nowrap"}},[i("v-alert",{attrs:{value:!0,type:"success"}},[e._v("\n          "+e._s(e.msg_suc)+"\n        ")])],1)])],1),e._v(" "),i("v-card",{staticClass:"scroll-x-transition"},[i("v-layout",[i("v-flex",{attrs:{lg9:"",md9:"",sm9:"",xs9:""}},[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v("合计:"+e._s(e.fee)+"元")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(t){e.show=!e.show}}},[e._v("\n          新增\n        ")]),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:e.deleteItem}},[e._v("\n          删除\n        ")]),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:e.startItem}},[e._v("\n          开立\n        ")]),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:e.endItem}},[e._v("\n          作废\n        ")])],1),e._v(" "),i("v-data-table",{attrs:{headers:e.headers,items:e.filterDesserts,expand:!1,"item-key":"medical_skill_id","select-all":""},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_name))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_execute_department))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_execute_state))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_fee))]),e._v(" "),i("td",[i("v-icon",{on:{click:function(i){t.expanded=!t.expanded,e.getItem()}}},[e._v("\n              remove_red_eye\n            ")])],1)]}},{key:"expand",fn:function(t){return[i("v-flex",{attrs:{xs12:"",sm6:"","offset-sm1":""}},[i("v-card",{attrs:{flat:""}},[i("v-card-title",[i("div",[i("span",[t.item.medical_skill_urgent?i("div",[e._v("加急：是")]):i("div",[e._v("加急：否")])]),e._v(" "),i("span",[e._v("检查部位："+e._s(t.item.medical_skill_checkpoint))]),i("br"),e._v(" "),i("span",[e._v("目的："+e._s(t.item.medical_skill_purpose))]),i("br"),e._v(" "),i("span",{staticClass:"font-weight-regular"},[e._v("结果")]),i("br"),e._v(" "),i("span",[e._v("详情："+e._s(t.item.medical_skill_result))]),i("br")])])],1)],1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),e._v(" "),i("v-divider"),e._v(" "),i("v-card-actions",[i("v-spacer"),e._v(" "),i("v-btn",{staticClass:"white--text",attrs:{color:"primary",small:""},on:{click:function(t){e.text=!e.text}}},[e._v("\n          保存\n        ")])],1)],1),e._v(" "),i("v-divider",{attrs:{vertical:""}}),e._v(" "),i("v-flex",{attrs:{lg3:"",md3:"",sm3:"",xs3:""}},[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v("常用模板")])],1),e._v(" "),i("v-data-table",{attrs:{headers:e.headers_tem,items:e.filterDessertsTem,"item-key":"template_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.template_name))]),e._v(" "),i("td",[i("v-btn",{staticClass:"ml-3",attrs:{icon:"",color:"primary",flat:"",right:"",small:""},on:{click:function(i){return e.useTem(t.item)}}},[e._v("\n              使用\n            ")]),e._v(" "),i("v-btn",{staticClass:"ml-3",attrs:{icon:"",color:"primary",flat:"",small:"",right:""},on:{click:function(i){return e.seeTem(t.item)}}},[e._v("\n              详情\n            ")])],1)]}}])})],1)],1)],1),e._v(" "),i("v-divider")],1)},staticRenderFns:[]};var L={props:["msgfromfa","record"],data:function(){return{dialog_err:!1,dialog_suc:!1,msg_suc:"success",msg_err:"error",selected:[],selected_dia:[],dialog:!1,show:!1,headers:[{text:"编码",align:"left",value:"diagnose_disease_id"},{text:"名称",value:"diagnose_disease_name"},{text:"发病时间",value:"diagnose_time"}],desserts:[],headers_dia:[{text:"编码",align:"left",value:"disease_icd"},{text:"名称",value:"disease_name"},{text:"分类",value:"disease_type"}],desserts_dia:[],type:""}},mounted:function(){this.load_diagnosis()},watch:{record:function(e,t){this.get()},dialog_suc:function(e){var t=this;e&&setTimeout(function(){return t.dialog_suc=!1},1e3)},dialog_err:function(e){var t=this;e&&setTimeout(function(){return t.dialog_err=!1},1e3)},dialog:function(e){var t=this;e&&setTimeout(function(){return t.network_out},1e4)}},methods:{submit_diagnoses:function(){var e=this,t=this.HOME+"/doctor/submit-final-diagnose";this.$http.post(t+"?token="+sessionStorage.getItem("token"),this.desserts).then(function(t){console.log(t.data),200===t.data.code?(e.dialog_suc=!0,e.msg_suc="提交成功"):(e.dialog_err=!0,e.msg_err="提交失败")})},addItem:function(){var e;this.show=!this.show,console.log(this.selected_dia);var t=new Date,i=t.getFullYear()+"-"+(1===t.getMonth().toString().length?"0"+(parseInt(t.getMonth().toString(),10)+1):t.getMonth()+1)+"-"+(1===t.getDate().toString().length?"0"+t.getDate():t.getDate())+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();for(e=0;e<this.selected_dia.length;e++){var a={diagnose_disease_id:this.selected_dia[e].disease_id,diagnose_disease_name:this.selected_dia[e].disease_name,diagnose_record_id:this.msgfromfa.register_info_id,diagnose_time:i};this.desserts.push(a)}},get:function(){var e=this,t=this.HOME+"/doctor/get-record",i={record_id:e.msgfromfa.register_info_id};e.desserts=[],this.$http.post(t+"?token="+sessionStorage.getItem("token"),i).then(function(t){var i;if(console.log(t.data.data),e.type=t.data.data.record_doctor_type,0===t.data.data.finalDiagnoses.length){for(i=0;i<t.data.data.firstDiagnoses.length;i++){var a={diagnose_disease_id:t.data.data.firstDiagnoses[i].diagnose_disease_id,diagnose_disease_name:t.data.data.firstDiagnoses[i].diagnose_disease_name,diagnose_record_id:e.msgfromfa.register_info_id,diagnose_time:t.data.data.firstDiagnoses[i].diagnose_time.slice(0,19)};e.desserts.push(a)}console.log(e.desserts),e.dialog=!1}else{for(i=0;i<t.data.data.finalDiagnoses.length;i++){var s={diagnose_disease_id:t.data.data.finalDiagnoses[i].diagnose_disease_id,diagnose_disease_name:t.data.data.finalDiagnoses[i].diagnose_disease_name,diagnose_record_id:e.msgfromfa.register_info_id,diagnose_time:t.data.data.finalDiagnoses[i].diagnose_time.slice(0,19)};e.desserts.push(s)}console.log(e.desserts),e.dialog=!1}})},load_diagnosis:function(){var e=this,t=this.HOME+"/maintenance/disease/get-all";this.$http.post(t+"?token="+sessionStorage.getItem("token")).then(function(t){e.desserts_dia=t.data.data})},indexOf:function(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1},remove:function(e,t){var i=this.indexOf(e,t);i>-1&&e.splice(i,1)},deleteItem:function(){for(var e=0;e<this.selected.length;e++)this.remove(this.desserts,this.selected[e])}}},W={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",{attrs:{color:"primary",dark:""}},[i("v-card-text",[e._v("\n        请稍等\n        "),i("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),i("v-flex",{attrs:{shrink:""}},[i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialog_err,expression:"dialog_err"}],staticStyle:{"white-space":"nowrap"}},[i("v-alert",{attrs:{value:!0,type:"error"}},[e._v("\n          "+e._s(e.msg_err)+"\n        ")])],1)])],1),e._v(" "),i("v-flex",{attrs:{shrink:""}},[i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialog_suc,expression:"dialog_suc"}],staticStyle:{"white-space":"nowrap"}},[i("v-alert",{attrs:{value:!0,type:"success"}},[e._v("\n          "+e._s(e.msg_suc)+"\n        ")])],1)])],1),e._v(" "),i("v-dialog",{attrs:{"max-width":"800"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("v-card",[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v("诊断目录")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{flat:"",icon:"",dark:"",color:"primary"},on:{click:e.addItem}},[i("v-icon",[e._v("\n            add\n          ")])],1)],1),e._v(" "),i("v-data-table",{attrs:{headers:e.headers_dia,items:e.desserts_dia,"item-key":"disease_icd","select-all":""},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.disease_id))]),e._v(" "),i("td",[e._v(e._s(t.item.disease_name))]),e._v(" "),i("td",[e._v(e._s(t.item.disease_type))])]}}]),model:{value:e.selected_dia,callback:function(t){e.selected_dia=t},expression:"selected_dia"}})],1)],1),e._v(" "),i("v-card",[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v(e._s(e.type))]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{flat:"",icon:"",color:"primary"},on:{click:e.get}},[i("v-icon",[e._v(" refresh")])],1),e._v(" "),i("v-btn",{attrs:{flat:"",icon:"",color:"primary"},on:{click:function(t){e.show=!e.show}}},[i("v-icon",[e._v(" add")])],1),e._v(" "),i("v-btn",{attrs:{flat:"",icon:"",color:"primary"},on:{click:e.deleteItem}},[i("v-icon",[e._v("delete")])],1),e._v(" "),i("v-btn",{attrs:{flat:"",icon:"",color:"primary"},on:{click:e.submit_diagnoses}},[i("v-icon",[e._v("send")])],1)],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.desserts,"item-key":"diagnose_disease_id","select-all":""},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.diagnose_disease_id))]),e._v(" "),i("td",[e._v(e._s(t.item.diagnose_disease_name))]),e._v(" "),i("td",[e._v(e._s(t.item.diagnose_time))])]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1)},staticRenderFns:[]};var z={props:["msgfromfa","record"],data:function(){return{dialog_err:!1,dialog_suc:!1,msg_suc:"success",msg_err:"error",tem:!1,dialog:!1,selected_dia:[],selected:[],selected_tem:[],search:"",alert_success:!1,msg_success:"",alert_error:!1,msg_error:"",text:!1,show:!1,show_tem:!1,expand:!1,expand_dia:!1,isNo:[{text:"是",value:"true"},{text:"否",value:"false"}],headers_dia:[{text:"编号",align:"left",value:"medical_skill_content_id"},{text:"项目名称",value:"medical_skill_content_name"},{text:"父级编码",value:"medical_skill_content_father"},{text:"单位",value:"medical_skill_content_unit"},{text:"单价",value:"medical_skill_content_price"},{text:"操作",value:"operation"}],desserts_dia:[],headers:[{text:"项目名称",value:"medical_skill_name"},{text:"执行科室",value:"medical_skill_execute_department"},{text:"执行状态",value:"medical_skill_execute_state"},{text:"单价",value:"medical_skill_fee"},{text:"操作",value:"operation"}],desserts:[],headers_tem:[{text:"模板名称",align:"left",value:"template_name"},{text:"操作",value:"operation",sortable:!1}],headers_tem_con:[{text:"项目名称",value:"template_medical_skill_content_name"},{text:"执行科室",value:"template_medical_skill_content_department_name"},{text:"检查部位",value:"template_medical_skill_content_checkpoint"},{text:"目的",value:"template_medical_skill_content_specification"},{text:"是否加急",value:"template_medical_skill_content_department_id"},{text:"单价",value:"template_medical_skill_content_unit_price"},{text:"操作",value:"operation"}],desserts_tem:[],desserts_tem_con:[],medical_skill_name:"",medical_skill_checkpoint:"",medical_skill_purpose:"",medical_skill_urgent:"",template_name:"",template_range:"",template_id:"",template_con_name:"",template_con_range:"",template_con_type:"",template_con_id:"",departments:[],department:""}},created:function(){this.load_mediskill(),this.getItem(),this.getTem(),this.load_departs()},watch:{record:function(e,t){this.load_mediskill(),this.getItem(),this.getTem()},dialog_suc:function(e){var t=this;e&&setTimeout(function(){return t.dialog_suc=!1},1e3)},dialog_err:function(e){var t=this;e&&setTimeout(function(){return t.dialog_err=!1},1e3)},dialog:function(e){var t=this;e&&setTimeout(function(){return t.network_out},1e4)}},computed:{filterDesserts:function(){return this.desserts.filter(this.filterType)},filterDeparts:function(){return this.departments.filter(this.filterDepart)},filterDessertsTem:function(){return this.desserts_tem.filter(this.filterType_tem)},fee:function(){var e,t=0;for(e=0;e<this.filterDesserts.length;e++)t+=this.filterDesserts[e].medical_skill_fee;return t}},methods:{network_out:function(){this.dialog=!1,this.dialog_err=!0,this.msg_err="网络不通畅，请重新来过"},load_departs:function(){var e=this,t=this.HOME+"/maintenance/department/get-all";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{}).then(function(t){console.log(t.data),e.departments=t.data.data})},filterType:function(e){return"处置"===e.medical_skill_type},filterDepart:function(e){return"医技科室"===e.department_cat},filterType_tem:function(e){return"处置"===e.template_type},getTem:function(){var e=this,t={doctor_id:this.$store.state.user.id,department_id:this.$store.state.user.department_id},i=this.HOME+"/template/get-all";this.$http.post(i+"?token="+sessionStorage.getItem("token"),t).then(function(t){console.log(t.data),e.desserts_tem=t.data.data,e.dialog=!1})},deleteTem:function(){var e=this,t={template_id:e.template_con_id},i=this.HOME+"/template/delete-template";this.$http.post(i+"?token="+sessionStorage.getItem("token"),t).then(function(t){console.log(t.data),e.getTem(),e.tem=!1})},updateTem:function(){var e=this,t={template_name:e.template_con_name,template_init_date:new Date,template_type:e.template_con_type,template_range:e.template_con_range,template_id:e.template_con_id,template_doctor_id:e.msgfromfa.register_info_doctor_id},i=this.HOME+"/template/update-template";this.$http.post(i+"?token="+sessionStorage.getItem("token"),t).then(function(t){console.log(t.data),e.getTem(),e.tem=!1})},useTem:function(e){var t=this,i={template_id:e.template_id},a=this.HOME+"/template/get-content-non-medicine";this.$http.post(a+"?token="+sessionStorage.getItem("token"),i).then(function(e){var i;for(console.log(e.data),t.dialog=!0,i=0;i<e.data.data.length;i++)t.addItemByTem(e.data.data[i]);t.dialog=!1})},seeTem:function(e){var t=this;this.tem=!0;var i={template_id:e.template_id};t.template_con_name=e.template_name,t.template_con_range=e.template_range,t.template_con_type=e.template_type,t.template_con_id=e.template_id;var a=this.HOME+"/template/get-content-non-medicine";this.$http.post(a+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data),t.desserts_tem_con=e.data.data,t.dialog=!1})},addTem:function(){var e=this,t={template_type:"处置",template_name:e.template_name,template_range:e.template_range,template_doctor_id:e.msgfromfa.register_info_doctor_id};console.log(t);var i=this.HOME+"/template/add-template";this.$http.post(i+"?token="+sessionStorage.getItem("token"),t).then(function(t){console.log(t.data),e.dialog=!0,e.template_con_id=t.data.data.template_id,e.addTemContent(),e.text=!1,e.getTem(),e.dialog=!1})},addTemContent:function(){var e,t=this.HOME+"/template/add-content-non-medicine";for(e=0;e<this.filterDesserts.length;e++){var i={template_connect_id:this.template_con_id,template_medical_skill_content_id:this.filterDesserts[e].medical_skill_content_id,template_medical_skill_content_name:this.filterDesserts[e].medical_skill_name,template_medical_skill_content_department_id:this.filterDesserts[e].medical_skill_urgent,template_medical_skill_content_specification:this.filterDesserts[e].medical_skill_purpose,template_medical_skill_content_checkpoint:this.filterDesserts[e].medical_skill_checkpoint,template_medical_skill_content_department_name:this.filterDesserts[e].medical_skill_execute_department,template_medical_skill_content_unit_price:this.filterDesserts[e].medical_skill_fee};console.log(i),this.$http.post(t+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data)})}},addTemContentSingle:function(e){var t=this,i=this.HOME+"/template/add-content-non-medicine",a={template_connect_id:t.template_con_id,template_medical_skill_content_id:e.medical_skill_content_id,template_medical_skill_content_name:e.medical_skill_content_name,template_medical_skill_content_department_id:t.medical_skill_urgent,template_medical_skill_content_specification:t.medical_skill_purpose,template_medical_skill_content_checkpoint:t.medical_skill_checkpoint,template_medical_skill_content_department_name:t.department.department_name,template_medical_skill_content_unit_price:e.medical_skill_content_price};t.medical_skill_urgent="",t.medical_skill_purpose="",t.medical_skill_checkpoint="",console.log(e),t.dialog=!0,this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data);var i={template_name:t.template_con_name,template_range:t.template_con_range,template_type:t.template_con_type,template_id:t.template_con_id};t.seeTem(i),t.dialog=!1,t.show_tem=!1})},deleteTemContentSingle:function(e){var t=this,i=this.HOME+"/template/delete-content",a={template_content_id:e.template_content_id};t.dialog=!0,console.log(e),this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data);var i={template_name:t.template_con_name,template_range:t.template_con_range,template_type:t.template_con_type,template_id:t.template_con_id};t.seeTem(i)})},deleteTemContent:function(){var e,t=this,i=this.HOME+"/template/delete-content";for(e=0;e<t.selected_tem.length;e++){var a={template_content_id:t.selected_tem[e].template_content_id};console.log(a),this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data);var i={template_name:t.template_con_name,template_range:t.template_con_range,template_type:t.template_con_type,template_id:t.template_con_id};t.dialog=!0,t.seeTem(i)})}},getItem:function(){var e=this,t=this.HOME+"/doctor/get-record",i={record_id:e.msgfromfa.register_info_id};this.$http.post(t+"?token="+sessionStorage.getItem("token"),i).then(function(t){console.log(t.data.data),e.desserts=t.data.data.medicalSkills})},addItem:function(e){var t=this;console.log(e);var i={medical_skill_type:"处置",medical_skill_name:e.medical_skill_content_name,medical_skill_checkpoint:t.medical_skill_checkpoint,medical_skill_purpose:t.medical_skill_purpose,medical_skill_urgent:t.medical_skill_urgent,medical_skill_register_info_id:t.msgfromfa.register_info_id,medical_skill_doctor_id:t.msgfromfa.register_info_doctor_id,medical_skill_content_id:e.medical_skill_content_id,medical_skill_fee:e.medical_skill_content_price,medical_skill_execute_department:t.department.department_name};console.log(i);var a=this.HOME+"/doctor/add-medical-skill";this.$http.post(a+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data),t.show=!1,t.dialog=!0,t.getItem(),t.dialog=!1})},addItemByTem:function(e){var t=this;console.log(e);var i={medical_skill_type:"处置",medical_skill_name:e.template_medical_skill_content_name,medical_skill_checkpoint:e.template_medical_skill_content_checkpoint,medical_skill_purpose:e.template_medical_skill_content_specification,medical_skill_urgent:e.template_medical_skill_content_department_id,medical_skill_register_info_id:t.msgfromfa.register_info_id,medical_skill_doctor_id:t.msgfromfa.register_info_doctor_id,medical_skill_content_id:e.template_medical_skill_content_id,medical_skill_fee:e.template_medical_skill_content_unit_price,medical_skill_execute_department:e.template_medical_skill_content_department_name};console.log(i);var a=this.HOME+"/doctor/add-medical-skill";this.$http.post(a+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data),t.show=!1,t.dialog=!0,t.getItem(),t.dialog=!1})},deleteItem:function(){var e,t=this;t.dialog=!0;var i,a=this.HOME+"/doctor/delete-medical-skill";for(console.log(t.selected),e=0;e<t.selected.length;e++)i={medical_skill_id:t.selected[e].medical_skill_id},this.$http.post(a+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data),t.getItem(),t.dialog=!1})},startItem:function(){var e,t=this;t.dialog=!0;var i=this.HOME+"/doctor/start-medical-skill";for(console.log(t.selected),e=0;e<t.selected.length;e++){var a={medical_skill_id:t.selected[e].medical_skill_id};this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data),t.getItem(),t.dialog=!1})}},endItem:function(){var e,t=this;t.dialog=!0;var i=this.HOME+"/doctor/end-medical-skill";for(console.log(t.selected),e=0;e<t.selected.length;e++){var a={medical_skill_id:t.selected[e].medical_skill_id};this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data),t.getItem(),t.dialog=!1})}},load_mediskill:function(){var e=this,t=this.HOME+"/maintenance/medical-skill-content/get-all";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{}).then(function(t){console.log(t.data),e.desserts_dia=t.data.data})}}},A={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",{attrs:{color:"primary",dark:""}},[i("v-card-text",[e._v("\n        请稍等\n        "),i("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),i("v-dialog",{attrs:{"hide-overlay":"",width:"800"},model:{value:e.tem,callback:function(t){e.tem=t},expression:"tem"}},[i("v-card",[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[e._v("医技模板详情")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:e.deleteTem}},[i("v-icon",[e._v("\n            delete\n          ")])],1),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:e.updateTem}},[i("v-icon",[e._v("\n            save\n          ")])],1)],1),e._v(" "),i("v-container",{attrs:{"grid-list-md":""}},[i("v-layout",[i("v-flex",{attrs:{xs12:""}},[i("v-text-field",{attrs:{label:"模板名称",required:""},model:{value:e.template_con_name,callback:function(t){e.template_con_name=t},expression:"template_con_name"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-select",{attrs:{items:["个人","科室","全院"],label:"模板范围",required:""},model:{value:e.template_con_range,callback:function(t){e.template_con_range=t},expression:"template_con_range"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-select",{attrs:{items:["检验","检查","处置"],label:"类型",required:""},model:{value:e.template_con_type,callback:function(t){e.template_con_type=t},expression:"template_con_type"}})],1)],1)],1),e._v(" "),i("v-divider"),e._v(" "),i("v-toolbar",{attrs:{flat:"",dense:"",color:"white"}},[i("v-toolbar-title",[e._v("医技项目")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:e.deleteTemContent}},[i("v-icon",[e._v("\n            delete\n          ")])],1),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:function(t){e.show_tem=!e.show_tem}}},[i("v-icon",[e._v("\n            add\n          ")])],1)],1),e._v(" "),i("v-divider"),e._v(" "),i("v-data-table",{attrs:{headers:e.headers_tem_con,items:e.desserts_tem_con,"select-all":"","item-key":"template_content_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.template_medical_skill_content_name))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medical_skill_content_department_name))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medical_skill_content_checkpoint))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medical_skill_content_specification))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medical_skill_content_department_id))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medical_skill_content_unit_price))]),e._v(" "),i("td",[i("v-btn",{staticClass:"ml-3",attrs:{icon:"",flat:"",small:"",color:"primary",right:""},on:{click:function(i){return e.deleteTemContentSingle(t.item)}}},[e._v("\n              删除\n            ")])],1)]}}]),model:{value:e.selected_tem,callback:function(t){e.selected_tem=t},expression:"selected_tem"}})],1)],1),e._v(" "),i("v-dialog",{attrs:{"max-width":"400px"},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[e._v("添加医技模板")])]),e._v(" "),i("v-card-text",[i("v-container",{attrs:{"grid-list-md":""}},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("v-text-field",{attrs:{label:"模板名称",required:""},model:{value:e.template_name,callback:function(t){e.template_name=t},expression:"template_name"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-select",{attrs:{items:["个人","科室","全院"],label:"模板范围",required:""},model:{value:e.template_range,callback:function(t){e.template_range=t},expression:"template_range"}})],1)],1)],1)],1),e._v(" "),i("v-card-actions",[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(t){e.text=!1}}},[e._v("关闭")]),e._v(" "),i("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:e.addTem}},[e._v("保存")])],1)],1)],1),e._v(" "),i("v-dialog",{attrs:{"max-width":"800"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("v-card",[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[e._v("医技项目目录")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-flex",{attrs:{xs3:""}},[i("v-text-field",{attrs:{"prepend-inner-icon":"search",label:"编号/名称",required:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers_dia,items:e.desserts_dia,expand:e.expand_dia,search:e.search,"item-key":"medical_skill_content_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.medical_skill_content_id))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_name))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_father))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_unit))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_price))]),e._v(" "),i("td",[i("v-btn",{attrs:{icon:"",flat:"",color:"primary",right:""}},[i("v-icon",{attrs:{color:"primary"},on:{click:function(e){t.expanded=!t.expanded}}},[e._v("\n                add\n              ")])],1)],1)]}},{key:"expand",fn:function(t){return[i("v-layout",{attrs:{"align-center":"","justify-center":"",row:""}},[i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-select",{attrs:{items:e.departments,"item-text":"department_name",item_value:"department_id",label:"科室","return-object":"",required:""},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"部位",required:""},model:{value:e.medical_skill_checkpoint,callback:function(t){e.medical_skill_checkpoint=t},expression:"medical_skill_checkpoint"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"目的",required:""},model:{value:e.medical_skill_purpose,callback:function(t){e.medical_skill_purpose=t},expression:"medical_skill_purpose"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-select",{attrs:{items:e.isNo,label:"是否加急",required:""},model:{value:e.medical_skill_urgent,callback:function(t){e.medical_skill_urgent=t},expression:"medical_skill_urgent"}})],1),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(i){return e.addItem(t.item)}}},[e._v("\n              添加\n            ")])],1)]}}])})],1)],1),e._v(" "),i("v-dialog",{attrs:{"max-width":"800"},model:{value:e.show_tem,callback:function(t){e.show_tem=t},expression:"show_tem"}},[i("v-card",[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[e._v("医技项目目录")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-flex",{attrs:{xs3:""}},[i("v-text-field",{attrs:{"prepend-inner-icon":"search",label:"编号/名称",required:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers_dia,items:e.desserts_dia,expand:e.expand_dia,search:e.search,"item-key":"medical_skill_content_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.medical_skill_content_id))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_name))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_father))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_unit))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_price))]),e._v(" "),i("td",[i("v-btn",{attrs:{icon:"",flat:"",color:"primary",right:""}},[i("v-icon",{attrs:{color:"primary"},on:{click:function(e){t.expanded=!t.expanded}}},[e._v("\n                add\n              ")])],1)],1)]}},{key:"expand",fn:function(t){return[i("v-layout",{attrs:{"align-center":"","justify-center":"",row:""}},[i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-select",{attrs:{items:e.departments,"item-text":"department_name",item_value:"department_id",label:"科室","return-object":"",required:""},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"部位",required:""},model:{value:e.medical_skill_checkpoint,callback:function(t){e.medical_skill_checkpoint=t},expression:"medical_skill_checkpoint"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"目的",required:""},model:{value:e.medical_skill_purpose,callback:function(t){e.medical_skill_purpose=t},expression:"medical_skill_purpose"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-select",{attrs:{items:e.isNo,label:"是否加急",required:""},model:{value:e.medical_skill_urgent,callback:function(t){e.medical_skill_urgent=t},expression:"medical_skill_urgent"}})],1),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(i){return e.addTemContentSingle(t.item)}}},[e._v("\n              添加\n            ")])],1)]}}])})],1)],1),e._v(" "),i("v-flex",{attrs:{shrink:""}},[i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialog_err,expression:"dialog_err"}],staticStyle:{"white-space":"nowrap"}},[i("v-alert",{attrs:{value:!0,type:"error"}},[e._v("\n          "+e._s(e.msg_err)+"\n        ")])],1)])],1),e._v(" "),i("v-flex",{attrs:{shrink:""}},[i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialog_suc,expression:"dialog_suc"}],staticStyle:{"white-space":"nowrap"}},[i("v-alert",{attrs:{value:!0,type:"success"}},[e._v("\n          "+e._s(e.msg_suc)+"\n        ")])],1)])],1),e._v(" "),i("v-layout",[i("v-flex",{attrs:{lg9:"",md9:"",sm9:"",xs9:""}},[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v("合计:"+e._s(e.fee)+"元")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(t){e.show=!e.show}}},[e._v("\n          新增\n        ")]),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:e.deleteItem}},[e._v("\n          删除\n        ")]),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:e.startItem}},[e._v("\n          开立\n        ")]),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:e.endItem}},[e._v("\n          作废\n        ")])],1),e._v(" "),i("v-data-table",{attrs:{headers:e.headers,items:e.filterDesserts,expand:!1,"item-key":"medical_skill_id","select-all":""},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_name))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_execute_department))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_execute_state))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_fee))]),e._v(" "),i("td",[i("v-icon",{on:{click:function(i){t.expanded=!t.expanded,e.getItem()}}},[e._v("\n              remove_red_eye\n            ")])],1)]}},{key:"expand",fn:function(t){return[i("v-flex",{attrs:{xs12:"",sm6:"","offset-sm1":""}},[i("v-card",{attrs:{flat:""}},[i("v-card-title",[i("div",[i("span",[t.item.medical_skill_urgent?i("div",[e._v("加急：是")]):i("div",[e._v("加急：否")])]),e._v(" "),i("span",[e._v("检查部位："+e._s(t.item.medical_skill_checkpoint))]),i("br"),e._v(" "),i("span",[e._v("目的："+e._s(t.item.medical_skill_purpose))]),i("br"),e._v(" "),i("span",{staticClass:"font-weight-regular"},[e._v("结果")]),i("br"),e._v(" "),i("span",[e._v("详情："+e._s(t.item.medical_skill_result))]),i("br")])])],1)],1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),e._v(" "),i("v-divider"),e._v(" "),i("v-card-actions",[i("v-spacer"),e._v(" "),i("v-btn",{staticClass:"white--text",attrs:{color:"primary",small:""},on:{click:function(t){e.text=!e.text}}},[e._v("\n          保存\n        ")])],1)],1),e._v(" "),i("v-divider",{attrs:{vertical:""}}),e._v(" "),i("v-flex",{attrs:{lg3:"",md3:"",sm3:"",xs3:""}},[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v("常用模板")])],1),e._v(" "),i("v-data-table",{attrs:{headers:e.headers_tem,items:e.filterDessertsTem,"item-key":"template_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.template_name))]),e._v(" "),i("td",[i("v-btn",{staticClass:"ml-3",attrs:{icon:"",color:"primary",flat:"",right:"",small:""},on:{click:function(i){return e.useTem(t.item)}}},[e._v("\n              使用\n            ")]),e._v(" "),i("v-btn",{staticClass:"ml-3",attrs:{icon:"",color:"primary",flat:"",small:"",right:""},on:{click:function(i){return e.seeTem(t.item)}}},[e._v("\n              详情\n            ")])],1)]}}])})],1)],1),e._v(" "),i("v-divider")],1)},staticRenderFns:[]};var Y={props:["msgfromfa","record"],data:function(){return{tem:!1,tem_add:[],selected_dia:[],selected_pre:[],selected_tem:[],selected_con:[],alert_success:!1,alert_error:!1,search:"",show:!1,show_tem:!1,show_pre_dia:!1,dialog:!1,text:!1,expand:!1,expand1:!0,expand_dia:!1,headers_dia:[{text:"药品编号",align:"left",value:"medicine_id"},{text:"药品名称",value:"medicine_name"},{text:"药品类型",value:"medicine_type"},{text:"药品规格",value:"medicine_specification"},{text:"单价",value:"medicine_unit_price"},{text:"操作",value:"operation",sortable:!1}],desserts_dia:[],headers_con:[{text:"药品编号",align:"left",value:"prescription_medicine_id"},{text:"药品名称",align:"left",value:"medicine_name"},{text:"规格",value:"medicine_specification"},{text:"用法",value:"prescription_day"},{text:"用量",value:"prescription_consumption"},{text:"单价",value:"prescription_content_id"},{text:"频次",value:"prescription_frequency"},{text:"数量",value:"prescription_num"}],headers_pre:[{text:"处方ID",align:"left",value:"prescription_id"},{text:"处方名称",value:"prescription_name"},{text:"状态",value:"prescription_execute_state"},{text:"金额",value:"prescription_fee"},{text:"操作",value:"operation",sortable:!1}],desserts_pre:[],headers_tem:[{text:"模板名称",align:"left",value:"template_name"},{text:"操作",value:"operation",sortable:!1}],desserts_tem:[],headers_tem_con:[{text:"药品编号",align:"left",value:"template_medical_skill_content_department_name"},{text:"药品名称",align:"left",value:"template_medicine_name"},{text:"规格",value:"template_medicine_specification"},{text:"用法",value:"template_medicine_usage"},{text:"用量",value:"template_medicine_consumption"},{text:"单价",value:"template_medicine_unit_price"},{text:"频次",value:"template_medicine_frequency"},{text:"数量",value:"template_medicine_number"},{text:"操作",value:"operation",sortable:!1}],desserts_tem_con:[],prescription_consumption:"",prescription_frequency:"",prescription_num:"",prescription_day:"",prescription_name:"",prescription_id:"",template_name:"",template_range:"",template_id:"",template_con_name:"",template_con_range:"",template_con_type:"",template_con_id:"",new_prescription_id:""}},watch:{record:function(e,t){this.getItem(),this.load_medicne(),this.getTem()},dialog_suc:function(e){var t=this;e&&setTimeout(function(){return t.dialog_suc=!1},1e3)},dialog_err:function(e){var t=this;e&&setTimeout(function(){return t.dialog_err=!1},1e3)},dialog:function(e){var t=this;e&&setTimeout(function(){return t.network_out},1e4)}},mounted:function(){this.getItem(),this.load_medicne(),this.getTem()},computed:{filterDesserts:function(){return this.desserts_pre.filter(this.filterType)},filterDessertsTem:function(){return this.desserts_tem.filter(this.filterType_tem)}},methods:{notice_success:function(){window.setTimeout(this.change_success,1500)},filterType:function(e){return"西药"===e.prescription_type},filterType_tem:function(e){return"西药"===e.template_type},filterType_med:function(e){return"西药"===e.medicine_type},getTem:function(){var e=this,t={department_id:this.$store.state.user.department_id,doctor_id:this.$store.state.user.id},i=this.HOME+"/template/get-all";this.$http.post(i+"?token="+sessionStorage.getItem("token"),t).then(function(t){console.log(t.data),e.desserts_tem=t.data.data})},deleteTem:function(){var e=this,t={template_id:e.template_con_id},i=this.HOME+"/template/delete-template";this.$http.post(i+"?token="+sessionStorage.getItem("token"),t).then(function(t){console.log(t.data),e.dialog=!0,e.getTem(),e.dialog=!1,e.tem=!1})},updateTem:function(){var e=this,t={template_id:e.template_con_id,template_type:e.template_con_type,template_range:e.template_con_range,template_name:e.template_con_name,template_init_date:new Date,template_doctor_id:e.msgfromfa.register_info_doctor_id},i=this.HOME+"/template/update-template";this.$http.post(i+"?token="+sessionStorage.getItem("token"),t).then(function(t){console.log(t.data),e.dialog=!0,e.getTem(),e.dialog=!1,e.tem=!1})},useTem:function(e){var t=this,i={prescription_type:"西药",prescription_doctor_id:t.msgfromfa.register_info_doctor_id,prescription_register_info_id:t.msgfromfa.register_info_id,prescription_name:e.template_name,prescription_fee:"0"};console.log(i);var a=this.HOME+"/doctor/add-prescription";this.$http.post(a+"?token="+sessionStorage.getItem("token"),i).then(function(a){t.dialog=!0,t.new_prescription_id=a.data.data.prescription_id,i={template_id:e.template_id};var s=t.HOME+"/template/get-content-non-medicine";t.$http.post(s+"?token="+sessionStorage.getItem("token"),i).then(function(e){var i;for(console.log(e.data),i=0;i<e.data.data.length;i++)t.addContentByTem(e.data.data[i])}),console.log(a.data),t.getItem(),t.dialog=!1})},seeTem:function(e){var t=this;this.tem=!0;var i={template_id:e.template_id};t.template_con_id=e.template_id,t.template_con_name=e.template_name,t.template_con_range=e.template_range,t.template_con_type=e.template_type;var a=this.HOME+"/template/get-content-non-medicine";this.$http.post(a+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data),t.desserts_tem_con=e.data.data})},addTem:function(){var e=this,t={template_type:"西药",template_name:e.template_name,template_range:e.template_range,template_doctor_id:e.msgfromfa.register_info_doctor_id};console.log(t);var i=this.HOME+"/template/add-template";this.$http.post(i+"?token="+sessionStorage.getItem("token"),t).then(function(t){console.log(t.data),e.template_con_id=t.data.data.template_id,e.addTemContent(),e.text=!1,e.dialog=!0,e.getTem(),e.dialog=!1})},addTemContent:function(){var e,t=this.HOME+"/template/add-content-medicine";for(e=0;e<this.tem_add.length;e++){var i={template_medicine_unit_price:this.tem_add[e].prescription_unit_price,template_medicine_consumption:this.tem_add[e].prescription_consumption,template_medicine_unit:this.tem_add[e].medicine_unit,template_connect_id:this.template_con_id,template_medicine_name:this.tem_add[e].medicine.medicine_name,template_medicine_specification:this.tem_add[e].medicine.medicine_specifications,template_medicine_usage:this.tem_add[e].prescription_day,template_medicine_number:this.tem_add[e].prescription_num,template_medicine_frequency:this.tem_add[e].prescription_frequency,template_medical_skill_content_department_name:this.tem_add[e].medicine.medicine_id};console.log(i),this.$http.post(t+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data)})}},addTemContentSingle:function(e){var t=this,i=this.HOME+"/template/add-content-medicine",a={template_connect_id:t.template_con_id,template_medicine_name:e.medicine_name,template_medicine_specification:e.medicine_specifications,template_medicine_unit:e.medicine_unit,template_medicine_usage:t.prescription_day,template_medicine_consumption:t.prescription_consumption,template_medicine_frequency:t.prescription_frequency,template_medicine_number:t.prescription_num,template_medicine_unit_price:e.medicine_unit_price,template_medical_skill_content_department_name:e.medicine_id};t.prescription_day="",t.prescription_consumption="",t.prescription_num="",t.prescription_frequency="",console.log(e),t.dialog=!0,this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data);var i={template_name:t.template_con_name,template_range:t.template_con_range,template_type:t.template_con_type,template_id:t.template_con_id};t.seeTem(i),t.dialog=!1,t.show_tem=!1})},deleteTemContentSingle:function(e){var t=this,i=this.HOME+"/template/delete-content",a={template_content_id:e.template_content_id};t.dialog=!0,console.log(e),this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data);var i={template_name:t.template_con_name,template_range:t.template_con_range,template_type:t.template_con_type,template_id:t.template_con_id};t.seeTem(i),t.dialog=!1})},deleteTemContent:function(){var e,t=this,i=this.HOME+"/template/delete-content";for(e=0;e<t.selected_tem.length;e++){var a={template_content_id:t.selected_tem[e].template_content_id};console.log(a),this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data);var i={template_name:t.template_con_name,template_range:t.template_con_range,template_type:t.template_con_type,template_id:t.template_con_id};t.dialog=!0,t.seeTem(i),t.dialog=!1})}},addContentByTem:function(e){console.log(e);var t=this,i={prescription_id:t.new_prescription_id,prescription_consumption:e.template_medicine_consumption,prescription_medicine_id:e.template_medical_skill_content_department_name,prescription_frequency:e.template_medicine_frequency,prescription_num:e.template_medicine_number,prescription_day:e.template_medicine_usage},a=this.HOME+"/doctor/add-medicine";this.$http.post(a+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data),t.getItem(),t.show=!1})},addContent:function(e){var t=this;console.log(e);var i={prescription_id:t.prescription_id,prescription_consumption:t.prescription_consumption,prescription_medicine_id:e.medicine_id,prescription_frequency:t.prescription_frequency,prescription_num:t.prescription_num,prescription_day:t.prescription_day};console.log(i),t.dialog=!0;var a=this.HOME+"/doctor/add-medicine";this.$http.post(a+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data),t.getItem(),t.dialog=!1,t.show=!1}),t.prescription_id="",t.prescription_consumption="",t.prescription_frequency="",t.prescription_num="",t.prescription_day=""},deleteContent:function(){var e,t,i=this,a=this.HOME+"/doctor/delete-medicine";for(console.log(i.selected_con),i.dialog=!0,e=0;e<i.selected_con.length;e++)t={prescription_content_id:i.selected_con[e].prescription_content_id},this.$http.post(a+"?token="+sessionStorage.getItem("token"),t).then(function(e){console.log(e.data),i.getItem(),i.dialog=!1})},getItem:function(){var e=this,t=this.HOME+"/doctor/get-record",i={record_id:e.msgfromfa.register_info_id};this.$http.post(t+"?token="+sessionStorage.getItem("token"),i).then(function(t){console.log(t.data.data),e.desserts_pre=t.data.data.prescriptions})},addItem:function(){var e=this,t={prescription_type:"西药",prescription_doctor_id:e.msgfromfa.register_info_doctor_id,prescription_register_info_id:e.msgfromfa.register_info_id,prescription_name:e.prescription_name,prescription_fee:"0"};console.log(t);var i=this.HOME+"/doctor/add-prescription";this.$http.post(i+"?token="+sessionStorage.getItem("token"),t).then(function(t){e.dialog=!0,e.show_pre_dia=!1,console.log(t.data),e.getItem(),e.dialog=!1})},deleteItem:function(){var e,t,i=this,a=this.HOME+"/doctor/delete-prescription";for(console.log(i.selected),i.dialog=!0,e=0;e<i.selected_pre.length;e++)t={prescription_id:i.selected_pre[e].prescription_id},this.$http.post(a+"?token="+sessionStorage.getItem("token"),t).then(function(e){console.log(e.data),i.getItem()});i.dialog=!1},startItem:function(){var e,t=this,i=this.HOME+"/doctor/send-prescription";for(console.log(t.selected_pre),e=0;e<t.selected_pre.length;e++){var a={prescription_id:t.selected_pre[e].prescription_id};this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){t.dialog=!0,console.log(e.data),t.getItem(),t.dialog=!1})}},endItem:function(){var e,t=this,i=this.HOME+"/doctor/end-prescription";for(console.log(t.selected),e=0;e<t.selected_pre.length;e++){var a={prescription_id:t.selected_pre[e].prescription_id};this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){t.dialog=!0,console.log(e.data),t.getItem(),t.dialog=!1})}},load_medicne:function(){var e=this,t=this.HOME+"/maintenance/medicine/get-all";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{}).then(function(t){console.log(t.data),e.desserts_dia=t.data.data.filter(e.filterType_med)})}}},G={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",{attrs:{color:"primary",dark:""}},[i("v-card-text",[e._v("\n        请稍等\n        "),i("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),i("v-dialog",{attrs:{"max-width":"800"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("v-card",[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[e._v("药品项目目录")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-flex",{attrs:{xs3:""}},[i("v-text-field",{attrs:{"prepend-inner-icon":"search",label:"编号/名称",required:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers_dia,items:e.desserts_dia,expand:"",search:e.search,"item-key":"medicine_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.medicine_id))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine_name))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine_type))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine_specifications))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine_unit_price))]),e._v(" "),i("td",[i("v-btn",{attrs:{icon:"",flat:"",color:"primary",right:""}},[i("v-icon",{attrs:{color:"primary"},on:{click:function(e){t.expanded=!t.expanded}}},[e._v("\n                add\n              ")])],1)],1)]}},{key:"expand",fn:function(t){return[i("div",[i("v-layout",{attrs:{"align-center":"","justify-center":"",row:""}},[i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"用量",required:""},model:{value:e.prescription_day,callback:function(t){e.prescription_day=t},expression:"prescription_day"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"用法",required:""},model:{value:e.prescription_consumption,callback:function(t){e.prescription_consumption=t},expression:"prescription_consumption"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"频次",required:""},model:{value:e.prescription_frequency,callback:function(t){e.prescription_frequency=t},expression:"prescription_frequency"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"数量",required:""},model:{value:e.prescription_num,callback:function(t){e.prescription_num=t},expression:"prescription_num"}})],1),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(i){return e.addContent(t.item)}}},[e._v("\n                添加\n              ")])],1)],1)]}}]),model:{value:e.selected_dia,callback:function(t){e.selected_dia=t},expression:"selected_dia"}})],1)],1),e._v(" "),i("v-dialog",{attrs:{"max-width":"800"},model:{value:e.show_tem,callback:function(t){e.show_tem=t},expression:"show_tem"}},[i("v-card",[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[e._v("药品项目目录")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-flex",{attrs:{xs3:""}},[i("v-text-field",{attrs:{"prepend-inner-icon":"search",label:"编号/名称",required:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers_dia,items:e.desserts_dia,expand:"",search:e.search,"item-key":"medicine_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.medicine_id))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine_name))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine_type))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine_specifications))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine_unit_price))]),e._v(" "),i("td",[i("v-btn",{attrs:{icon:"",flat:"",color:"primary",right:""}},[i("v-icon",{attrs:{color:"primary"},on:{click:function(e){t.expanded=!t.expanded}}},[e._v("\n                add\n              ")])],1)],1)]}},{key:"expand",fn:function(t){return[i("div",[i("v-layout",{attrs:{"align-center":"","justify-center":"",row:""}},[i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"用量",required:""},model:{value:e.prescription_day,callback:function(t){e.prescription_day=t},expression:"prescription_day"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"用法",required:""},model:{value:e.prescription_consumption,callback:function(t){e.prescription_consumption=t},expression:"prescription_consumption"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"频次",required:""},model:{value:e.prescription_frequency,callback:function(t){e.prescription_frequency=t},expression:"prescription_frequency"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"数量",required:""},model:{value:e.prescription_num,callback:function(t){e.prescription_num=t},expression:"prescription_num"}})],1),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(i){return e.addTemContentSingle(t.item)}}},[e._v("\n                添加\n              ")])],1)],1)]}}]),model:{value:e.selected_dia,callback:function(t){e.selected_dia=t},expression:"selected_dia"}})],1)],1),e._v(" "),i("v-dialog",{attrs:{"hide-overlay":"",width:"950"},model:{value:e.tem,callback:function(t){e.tem=t},expression:"tem"}},[i("v-card",[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[e._v("处方模板详情")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:e.deleteTem}},[i("v-icon",[e._v("\n            delete\n          ")])],1),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:e.updateTem}},[i("v-icon",[e._v("\n            save\n          ")])],1)],1),e._v(" "),i("v-container",{attrs:{"grid-list-md":""}},[i("v-layout",[i("v-flex",{attrs:{xs12:""}},[i("v-text-field",{attrs:{label:"模板名称",required:""},model:{value:e.template_con_name,callback:function(t){e.template_con_name=t},expression:"template_con_name"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-select",{attrs:{items:["个人","科室","全院"],label:"模板范围",required:""},model:{value:e.template_con_range,callback:function(t){e.template_con_range=t},expression:"template_con_range"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-select",{attrs:{items:["中药","西药"],label:"类型",required:""},model:{value:e.template_con_type,callback:function(t){e.template_con_type=t},expression:"template_con_type"}})],1)],1)],1),e._v(" "),i("v-divider"),e._v(" "),i("v-toolbar",{attrs:{flat:"",dense:"",color:"white"}},[i("v-toolbar-title",[e._v("药品项目")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:e.deleteTemContent}},[i("v-icon",[e._v("\n            delete\n          ")])],1),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:function(t){e.show_tem=!e.show_tem}}},[i("v-icon",[e._v("\n            add\n          ")])],1)],1),e._v(" "),i("v-divider"),e._v(" "),i("v-data-table",{attrs:{headers:e.headers_tem_con,items:e.desserts_tem_con,"select-all":"","item-key":"template_content_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.template_medical_skill_content_department_name))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medicine_name))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medicine_specification))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medicine_usage))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medicine_consumption))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medicine_unit_price))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medicine_frequency))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medicine_number))]),e._v(" "),i("td",[i("v-btn",{staticClass:"ml-3",attrs:{icon:"",flat:"",small:"",color:"primary",right:""},on:{click:function(i){return e.deleteTemContentSingle(t.item)}}},[e._v("\n              删除\n            ")])],1)]}}]),model:{value:e.selected_tem,callback:function(t){e.selected_tem=t},expression:"selected_tem"}})],1)],1),e._v(" "),i("v-dialog",{attrs:{"max-width":"400"},model:{value:e.show_pre_dia,callback:function(t){e.show_pre_dia=t},expression:"show_pre_dia"}},[i("v-card",{ref:"form"},[i("v-card-text",[i("v-text-field",{attrs:{label:"处方名称",required:""},model:{value:e.prescription_name,callback:function(t){e.prescription_name=t},expression:"prescription_name"}})],1),e._v(" "),i("v-divider",{staticClass:"mt-2"}),e._v(" "),i("v-card-actions",[i("v-btn",{attrs:{flat:""},on:{click:function(t){e.show_pre_dia=!e.show_pre_dia}}},[e._v("取消")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.addItem}},[e._v("确定")])],1)],1)],1),e._v(" "),i("v-dialog",{attrs:{"max-width":"400"},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[e._v("添加处方模板")])]),e._v(" "),i("v-card-text",[i("v-container",{attrs:{"grid-list-md":""}},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("v-text-field",{attrs:{label:"模板名称",required:""},model:{value:e.template_name,callback:function(t){e.template_name=t},expression:"template_name"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-select",{attrs:{items:["个人","科室","全院"],label:"模板范围",required:""},model:{value:e.template_range,callback:function(t){e.template_range=t},expression:"template_range"}})],1)],1)],1)],1),e._v(" "),i("v-card-actions",[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(t){e.text=!1}}},[e._v("关闭")]),e._v(" "),i("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:e.addTem}},[e._v("保存")])],1)],1)],1),e._v(" "),i("v-card",[i("v-layout",[i("v-flex",{attrs:{xs9:""}},[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v("处方")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"primary",small:""},on:{click:function(t){e.show_pre_dia=!e.show_pre_dia}}},[e._v("\n            增方\n          ")]),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:e.deleteItem}},[e._v("\n            删方\n          ")]),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:e.startItem}},[e._v("\n            开立\n          ")]),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:e.endItem}},[e._v("\n            作废\n          ")])],1),e._v(" "),i("v-data-table",{attrs:{headers:e.headers_pre,items:e.filterDesserts,"item-key":"prescription_id","select-all":"",expand:e.expand},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.prescription_id))]),e._v(" "),i("td",[e._v(e._s(t.item.prescription_name))]),e._v(" "),i("td",[e._v(e._s(t.item.prescription_execute_state))]),e._v(" "),i("td",[e._v(e._s(t.item.prescription_fee))]),e._v(" "),i("td",[i("v-icon",{on:{click:function(e){t.expanded=!t.expanded}}},[e._v("\n                remove_red_eye\n              ")])],1)]}},{key:"expand",fn:function(t){return[i("div",[i("v-container",{staticStyle:{"max-width":"750px"}},[i("v-card",[i("v-toolbar",{attrs:{flat:"",dense:"",color:"white"}},[e._v("\n                    药品\n                    "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"primary",small:"",icon:"",flat:""},on:{click:function(i){e.show=!e.show,e.prescription_id=t.item.prescription_id}}},[i("v-icon",[e._v("\n                        add\n                      ")])],1),e._v(" "),i("v-btn",{attrs:{color:"primary",small:"",icon:"",flat:""},on:{click:function(i){return e.deleteContent(t.item)}}},[i("v-icon",[e._v("\n                        delete\n                      ")])],1)],1),e._v(" "),i("v-divider"),e._v(" "),i("v-data-table",{attrs:{headers:e.headers_con,items:t.item.prescriptionContents,"item-key":"prescription_content_id","hide-actions":"","select-all":""},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.prescription_medicine_id))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine.medicine_name))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine.medicine_specifications))]),e._v(" "),i("td",[e._v(e._s(t.item.prescription_day))]),e._v(" "),i("td",[e._v(e._s(t.item.prescription_consumption))]),e._v(" "),i("td",[e._v(e._s(t.item.prescription_unit_price))]),e._v(" "),i("td",[e._v(e._s(t.item.prescription_frequency))]),e._v(" "),i("td",[e._v(e._s(t.item.prescription_num))])]}}],null,!0),model:{value:e.selected_con,callback:function(t){e.selected_con=t},expression:"selected_con"}}),e._v(" "),i("v-divider"),e._v(" "),i("v-card-actions",[i("v-spacer"),e._v(" "),i("v-btn",{staticClass:"white--text",attrs:{color:"primary",small:""},on:{click:function(i){e.text=!e.text,e.tem_add=t.item.prescriptionContents}}},[e._v("\n                      保存\n                    ")])],1)],1)],1)],1)]}}]),model:{value:e.selected_pre,callback:function(t){e.selected_pre=t},expression:"selected_pre"}}),e._v(" "),i("v-divider")],1),e._v(" "),i("v-divider",{attrs:{vertical:""}}),e._v(" "),i("v-flex",{attrs:{xs3:""}},[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v("常用模板")])],1),e._v(" "),i("v-data-table",{attrs:{headers:e.headers_tem,items:e.filterDessertsTem,"item-key":"template_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.template_name))]),e._v(" "),i("td",[i("v-btn",{staticClass:"ml-3",attrs:{icon:"",color:"primary",flat:"",right:"",small:""},on:{click:function(i){return e.useTem(t.item)}}},[e._v("\n                使用\n              ")]),e._v(" "),i("v-btn",{staticClass:"ml-3",attrs:{icon:"",color:"primary",flat:"",small:"",right:""},on:{click:function(i){return e.seeTem(t.item)}}},[e._v("\n                详情\n              ")])],1)]}}])}),e._v(" "),i("v-divider")],1)],1)],1)],1)},staticRenderFns:[]};var Z={props:["msgfromfa","record"],data:function(){return{tem:!1,tem_add:[],selected_dia:[],selected_pre:[],selected_tem:[],selected_con:[],alert_success:!1,alert_error:!1,search:"",show:!1,show_tem:!1,show_pre_dia:!1,dialog:!1,text:!1,expand:!1,expand1:!0,expand_dia:!1,headers_dia:[{text:"药品编号",align:"left",value:"medicine_id"},{text:"药品名称",value:"medicine_name"},{text:"药品类型",value:"medicine_type"},{text:"药品规格",value:"medicine_specification"},{text:"单价",value:"medicine_unit_price"},{text:"操作",value:"operation",sortable:!1}],desserts_dia:[],headers_con:[{text:"药品编号",align:"left",value:"prescription_medicine_id"},{text:"药品名称",align:"left",value:"medicine_name"},{text:"规格",value:"medicine_specification"},{text:"用法",value:"prescription_day"},{text:"用量",value:"prescription_consumption"},{text:"单价",value:"prescription_content_id"},{text:"频次",value:"prescription_frequency"},{text:"数量",value:"prescription_num"}],headers_pre:[{text:"处方ID",align:"left",value:"prescription_id"},{text:"处方名称",value:"prescription_name"},{text:"状态",value:"prescription_execute_state"},{text:"金额",value:"prescription_fee"},{text:"操作",value:"operation",sortable:!1}],desserts_pre:[],headers_tem:[{text:"模板名称",align:"left",value:"template_name"},{text:"操作",value:"operation",sortable:!1}],desserts_tem:[],headers_tem_con:[{text:"药品编号",align:"left",value:"template_medical_skill_content_department_name"},{text:"药品名称",align:"left",value:"template_medicine_name"},{text:"规格",value:"template_medicine_specification"},{text:"用法",value:"template_medicine_usage"},{text:"用量",value:"template_medicine_consumption"},{text:"单价",value:"template_medicine_unit_price"},{text:"频次",value:"template_medicine_frequency"},{text:"数量",value:"template_medicine_number"},{text:"操作",value:"operation",sortable:!1}],desserts_tem_con:[],prescription_consumption:"",prescription_frequency:"",prescription_num:"",prescription_day:"",prescription_name:"",prescription_id:"",template_name:"",template_range:"",template_id:"",template_con_name:"",template_con_range:"",template_con_type:"",template_con_id:"",new_prescription_id:""}},watch:{record:function(e,t){this.getItem(),this.load_medicne(),this.getTem()},dialog_suc:function(e){var t=this;e&&setTimeout(function(){return t.dialog_suc=!1},1e3)},dialog_err:function(e){var t=this;e&&setTimeout(function(){return t.dialog_err=!1},1e3)},dialog:function(e){var t=this;e&&setTimeout(function(){return t.network_out},1e4)}},mounted:function(){this.getItem(),this.load_medicne(),this.getTem()},computed:{filterDesserts:function(){return this.desserts_pre.filter(this.filterType)},filterDessertsTem:function(){return this.desserts_tem.filter(this.filterType_tem)}},methods:{notice_success:function(){window.setTimeout(this.change_success,1500)},filterType:function(e){return"中药"===e.prescription_type},filterType_tem:function(e){return"中药"===e.template_type},filterType_med:function(e){return"中草药"===e.medicine_type||"中成药"===e.medicine_type},getTem:function(){var e=this,t={department_id:this.$store.state.user.department_id,doctor_id:this.$store.state.user.id},i=this.HOME+"/template/get-all";this.$http.post(i+"?token="+sessionStorage.getItem("token"),t).then(function(t){console.log(t.data),e.desserts_tem=t.data.data})},deleteTem:function(){var e=this,t={template_id:e.template_con_id},i=this.HOME+"/template/delete-template";this.$http.post(i+"?token="+sessionStorage.getItem("token"),t).then(function(t){console.log(t.data),e.dialog=!0,e.getTem(),e.dialog=!1,e.tem=!1})},updateTem:function(){var e=this,t={template_id:e.template_con_id,template_type:e.template_con_type,template_range:e.template_con_range,template_name:e.template_con_name,template_init_date:new Date,template_doctor_id:e.msgfromfa.register_info_doctor_id},i=this.HOME+"/template/update-template";this.$http.post(i+"?token="+sessionStorage.getItem("token"),t).then(function(t){console.log(t.data),e.dialog=!0,e.getTem(),e.dialog=!1,e.tem=!1})},useTem:function(e){var t=this,i={prescription_type:"中药",prescription_doctor_id:t.msgfromfa.register_info_doctor_id,prescription_register_info_id:t.msgfromfa.register_info_id,prescription_name:e.template_name,prescription_fee:"0"};console.log(i);var a=this.HOME+"/doctor/add-prescription";this.$http.post(a+"?token="+sessionStorage.getItem("token"),i).then(function(a){t.dialog=!0,t.new_prescription_id=a.data.data.prescription_id,i={template_id:e.template_id};var s=t.HOME+"/template/get-content-non-medicine";t.$http.post(s+"?token="+sessionStorage.getItem("token"),i).then(function(e){var i;for(console.log(e.data),i=0;i<e.data.data.length;i++)t.addContentByTem(e.data.data[i])}),console.log(a.data),t.getItem(),t.dialog=!1})},seeTem:function(e){var t=this;this.tem=!0;var i={template_id:e.template_id};t.template_con_id=e.template_id,t.template_con_name=e.template_name,t.template_con_range=e.template_range,t.template_con_type=e.template_type;var a=this.HOME+"/template/get-content-non-medicine";this.$http.post(a+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data),t.desserts_tem_con=e.data.data})},addTem:function(){var e=this,t={template_type:"中药",template_name:e.template_name,template_range:e.template_range,template_doctor_id:e.msgfromfa.register_info_doctor_id};console.log(t);var i=this.HOME+"/template/add-template";this.$http.post(i+"?token="+sessionStorage.getItem("token"),t).then(function(t){console.log(t.data),e.template_con_id=t.data.data.template_id,e.addTemContent(),e.text=!1,e.dialog=!0,e.getTem(),e.dialog=!1})},addTemContent:function(){var e,t=this.HOME+"/template/add-content-medicine";for(e=0;e<this.tem_add.length;e++){var i={template_medicine_unit_price:this.tem_add[e].prescription_unit_price,template_medicine_consumption:this.tem_add[e].prescription_consumption,template_medicine_unit:this.tem_add[e].medicine_unit,template_connect_id:this.template_con_id,template_medicine_name:this.tem_add[e].medicine.medicine_name,template_medicine_specification:this.tem_add[e].medicine.medicine_specifications,template_medicine_usage:this.tem_add[e].prescription_day,template_medicine_number:this.tem_add[e].prescription_num,template_medicine_frequency:this.tem_add[e].prescription_frequency,template_medical_skill_content_department_name:this.tem_add[e].medicine.medicine_id};console.log(i),this.$http.post(t+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data)})}},addTemContentSingle:function(e){var t=this,i=this.HOME+"/template/add-content-medicine",a={template_connect_id:t.template_con_id,template_medicine_name:e.medicine_name,template_medicine_specification:e.medicine_specifications,template_medicine_unit:e.medicine_unit,template_medicine_usage:t.prescription_day,template_medicine_consumption:t.prescription_consumption,template_medicine_frequency:t.prescription_frequency,template_medicine_number:t.prescription_num,template_medicine_unit_price:e.medicine_unit_price,template_medical_skill_content_department_name:e.medicine_id};t.prescription_day="",t.prescription_consumption="",t.prescription_num="",t.prescription_frequency="",console.log(e),t.dialog=!0,this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data);var i={template_name:t.template_con_name,template_range:t.template_con_range,template_type:t.template_con_type,template_id:t.template_con_id};t.seeTem(i),t.dialog=!1,t.show_tem=!1})},deleteTemContentSingle:function(e){var t=this,i=this.HOME+"/template/delete-content",a={template_content_id:e.template_content_id};t.dialog=!0,console.log(e),this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data);var i={template_name:t.template_con_name,template_range:t.template_con_range,template_type:t.template_con_type,template_id:t.template_con_id};t.seeTem(i),t.dialog=!1})},deleteTemContent:function(){var e,t=this,i=this.HOME+"/template/delete-content";for(e=0;e<t.selected_tem.length;e++){var a={template_content_id:t.selected_tem[e].template_content_id};console.log(a),this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data);var i={template_name:t.template_con_name,template_range:t.template_con_range,template_type:t.template_con_type,template_id:t.template_con_id};t.dialog=!0,t.seeTem(i),t.dialog=!1})}},addContentByTem:function(e){console.log(e);var t=this,i={prescription_id:t.new_prescription_id,prescription_consumption:e.template_medicine_consumption,prescription_medicine_id:e.template_medical_skill_content_department_name,prescription_frequency:e.template_medicine_frequency,prescription_num:e.template_medicine_number,prescription_day:e.template_medicine_usage},a=this.HOME+"/doctor/add-medicine";this.$http.post(a+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data),t.getItem(),t.show=!1})},addContent:function(e){var t=this;console.log(e);var i={prescription_id:t.prescription_id,prescription_consumption:t.prescription_consumption,prescription_medicine_id:e.medicine_id,prescription_frequency:t.prescription_frequency,prescription_num:t.prescription_num,prescription_day:t.prescription_day};console.log(i),t.dialog=!0;var a=this.HOME+"/doctor/add-medicine";this.$http.post(a+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data),t.getItem(),t.dialog=!1,t.show=!1}),t.prescription_id="",t.prescription_consumption="",t.prescription_frequency="",t.prescription_num="",t.prescription_day=""},deleteContent:function(){var e,t,i=this,a=this.HOME+"/doctor/delete-medicine";for(console.log(i.selected_con),i.dialog=!0,e=0;e<i.selected_con.length;e++)t={prescription_content_id:i.selected_con[e].prescription_content_id},this.$http.post(a+"?token="+sessionStorage.getItem("token"),t).then(function(e){console.log(e.data),i.getItem(),i.dialog=!1})},getItem:function(){var e=this,t=this.HOME+"/doctor/get-record",i={record_id:e.msgfromfa.register_info_id};this.$http.post(t+"?token="+sessionStorage.getItem("token"),i).then(function(t){console.log(t.data.data),e.desserts_pre=t.data.data.prescriptions})},addItem:function(){var e=this,t={prescription_type:"中药",prescription_doctor_id:e.msgfromfa.register_info_doctor_id,prescription_register_info_id:e.msgfromfa.register_info_id,prescription_name:e.prescription_name,prescription_fee:"0"};console.log(t);var i=this.HOME+"/doctor/add-prescription";this.$http.post(i+"?token="+sessionStorage.getItem("token"),t).then(function(t){e.dialog=!0,e.show_pre_dia=!1,console.log(t.data),e.getItem(),e.dialog=!1})},deleteItem:function(){var e,t,i=this,a=this.HOME+"/doctor/delete-prescription";for(console.log(i.selected),i.dialog=!0,e=0;e<i.selected_pre.length;e++)t={prescription_id:i.selected_pre[e].prescription_id},this.$http.post(a+"?token="+sessionStorage.getItem("token"),t).then(function(e){console.log(e.data),i.getItem()});i.dialog=!1},startItem:function(){var e,t=this,i=this.HOME+"/doctor/send-prescription";for(console.log(t.selected_pre),e=0;e<t.selected_pre.length;e++){var a={prescription_id:t.selected_pre[e].prescription_id};this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){t.dialog=!0,console.log(e.data),t.getItem(),t.dialog=!1})}},endItem:function(){var e,t=this,i=this.HOME+"/doctor/end-prescription";for(console.log(t.selected),e=0;e<t.selected_pre.length;e++){var a={prescription_id:t.selected_pre[e].prescription_id};this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){t.dialog=!0,console.log(e.data),t.getItem(),t.dialog=!1})}},load_medicne:function(){var e=this,t=this.HOME+"/maintenance/medicine/get-all";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{}).then(function(t){console.log(t.data),e.desserts_dia=t.data.data.filter(e.filterType_med)})}}},J={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",{attrs:{color:"primary",dark:""}},[i("v-card-text",[e._v("\n        请稍等\n        "),i("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),i("v-dialog",{attrs:{"max-width":"800"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("v-card",[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[e._v("药品项目目录")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-flex",{attrs:{xs3:""}},[i("v-text-field",{attrs:{"prepend-inner-icon":"search",label:"编号/名称",required:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers_dia,items:e.desserts_dia,expand:"",search:e.search,"item-key":"medicine_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.medicine_id))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine_name))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine_type))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine_specifications))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine_unit_price))]),e._v(" "),i("td",[i("v-btn",{attrs:{icon:"",flat:"",color:"primary",right:""}},[i("v-icon",{attrs:{color:"primary"},on:{click:function(e){t.expanded=!t.expanded}}},[e._v("\n                add\n              ")])],1)],1)]}},{key:"expand",fn:function(t){return[i("div",[i("v-layout",{attrs:{"align-center":"","justify-center":"",row:""}},[i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"用量",required:""},model:{value:e.prescription_day,callback:function(t){e.prescription_day=t},expression:"prescription_day"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"用法",required:""},model:{value:e.prescription_consumption,callback:function(t){e.prescription_consumption=t},expression:"prescription_consumption"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"频次",required:""},model:{value:e.prescription_frequency,callback:function(t){e.prescription_frequency=t},expression:"prescription_frequency"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"数量",required:""},model:{value:e.prescription_num,callback:function(t){e.prescription_num=t},expression:"prescription_num"}})],1),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(i){return e.addContent(t.item)}}},[e._v("\n                添加\n              ")])],1)],1)]}}]),model:{value:e.selected_dia,callback:function(t){e.selected_dia=t},expression:"selected_dia"}})],1)],1),e._v(" "),i("v-dialog",{attrs:{"max-width":"800"},model:{value:e.show_tem,callback:function(t){e.show_tem=t},expression:"show_tem"}},[i("v-card",[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[e._v("药品项目目录")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-flex",{attrs:{xs3:""}},[i("v-text-field",{attrs:{"prepend-inner-icon":"search",label:"编号/名称",required:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers_dia,items:e.desserts_dia,expand:"",search:e.search,"item-key":"medicine_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.medicine_id))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine_name))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine_type))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine_specifications))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine_unit_price))]),e._v(" "),i("td",[i("v-btn",{attrs:{icon:"",flat:"",color:"primary",right:""}},[i("v-icon",{attrs:{color:"primary"},on:{click:function(e){t.expanded=!t.expanded}}},[e._v("\n                add\n              ")])],1)],1)]}},{key:"expand",fn:function(t){return[i("div",[i("v-layout",{attrs:{"align-center":"","justify-center":"",row:""}},[i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"用量",required:""},model:{value:e.prescription_day,callback:function(t){e.prescription_day=t},expression:"prescription_day"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"用法",required:""},model:{value:e.prescription_consumption,callback:function(t){e.prescription_consumption=t},expression:"prescription_consumption"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"频次",required:""},model:{value:e.prescription_frequency,callback:function(t){e.prescription_frequency=t},expression:"prescription_frequency"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"数量",required:""},model:{value:e.prescription_num,callback:function(t){e.prescription_num=t},expression:"prescription_num"}})],1),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(i){return e.addTemContentSingle(t.item)}}},[e._v("\n                添加\n              ")])],1)],1)]}}]),model:{value:e.selected_dia,callback:function(t){e.selected_dia=t},expression:"selected_dia"}})],1)],1),e._v(" "),i("v-dialog",{attrs:{"hide-overlay":"",width:"950"},model:{value:e.tem,callback:function(t){e.tem=t},expression:"tem"}},[i("v-card",[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[e._v("处方模板详情")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:e.deleteTem}},[i("v-icon",[e._v("\n            delete\n          ")])],1),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:e.updateTem}},[i("v-icon",[e._v("\n            save\n          ")])],1)],1),e._v(" "),i("v-container",{attrs:{"grid-list-md":""}},[i("v-layout",[i("v-flex",{attrs:{xs12:""}},[i("v-text-field",{attrs:{label:"模板名称",required:""},model:{value:e.template_con_name,callback:function(t){e.template_con_name=t},expression:"template_con_name"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-select",{attrs:{items:["个人","科室","全院"],label:"模板范围",required:""},model:{value:e.template_con_range,callback:function(t){e.template_con_range=t},expression:"template_con_range"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-select",{attrs:{items:["中药","西药"],label:"类型",required:""},model:{value:e.template_con_type,callback:function(t){e.template_con_type=t},expression:"template_con_type"}})],1)],1)],1),e._v(" "),i("v-divider"),e._v(" "),i("v-toolbar",{attrs:{flat:"",dense:"",color:"white"}},[i("v-toolbar-title",[e._v("药品项目")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:e.deleteTemContent}},[i("v-icon",[e._v("\n            delete\n          ")])],1),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:function(t){e.show_tem=!e.show_tem}}},[i("v-icon",[e._v("\n            add\n          ")])],1)],1),e._v(" "),i("v-divider"),e._v(" "),i("v-data-table",{attrs:{headers:e.headers_tem_con,items:e.desserts_tem_con,"select-all":"","item-key":"template_content_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.template_medical_skill_content_department_name))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medicine_name))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medicine_specification))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medicine_usage))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medicine_consumption))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medicine_unit_price))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medicine_frequency))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medicine_number))]),e._v(" "),i("td",[i("v-btn",{staticClass:"ml-3",attrs:{icon:"",flat:"",small:"",color:"primary",right:""},on:{click:function(i){return e.deleteTemContentSingle(t.item)}}},[e._v("\n              删除\n            ")])],1)]}}]),model:{value:e.selected_tem,callback:function(t){e.selected_tem=t},expression:"selected_tem"}})],1)],1),e._v(" "),i("v-dialog",{attrs:{"max-width":"400"},model:{value:e.show_pre_dia,callback:function(t){e.show_pre_dia=t},expression:"show_pre_dia"}},[i("v-card",{ref:"form"},[i("v-card-text",[i("v-text-field",{attrs:{label:"处方名称",required:""},model:{value:e.prescription_name,callback:function(t){e.prescription_name=t},expression:"prescription_name"}})],1),e._v(" "),i("v-divider",{staticClass:"mt-2"}),e._v(" "),i("v-card-actions",[i("v-btn",{attrs:{flat:""},on:{click:function(t){e.show_pre_dia=!e.show_pre_dia}}},[e._v("取消")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.addItem}},[e._v("确定")])],1)],1)],1),e._v(" "),i("v-dialog",{attrs:{"max-width":"400"},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[e._v("添加处方模板")])]),e._v(" "),i("v-card-text",[i("v-container",{attrs:{"grid-list-md":""}},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("v-text-field",{attrs:{label:"模板名称",required:""},model:{value:e.template_name,callback:function(t){e.template_name=t},expression:"template_name"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-select",{attrs:{items:["个人","科室","全院"],label:"模板范围",required:""},model:{value:e.template_range,callback:function(t){e.template_range=t},expression:"template_range"}})],1)],1)],1)],1),e._v(" "),i("v-card-actions",[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(t){e.text=!1}}},[e._v("关闭")]),e._v(" "),i("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:e.addTem}},[e._v("保存")])],1)],1)],1),e._v(" "),i("v-card",[i("v-layout",[i("v-flex",{attrs:{xs9:""}},[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v("处方")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"primary",small:""},on:{click:function(t){e.show_pre_dia=!e.show_pre_dia}}},[e._v("\n            增方\n          ")]),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:e.deleteItem}},[e._v("\n            删方\n          ")]),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:e.startItem}},[e._v("\n            开立\n          ")]),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:e.endItem}},[e._v("\n            作废\n          ")])],1),e._v(" "),i("v-data-table",{attrs:{headers:e.headers_pre,items:e.filterDesserts,"item-key":"prescription_id","select-all":"",expand:e.expand},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.prescription_id))]),e._v(" "),i("td",[e._v(e._s(t.item.prescription_name))]),e._v(" "),i("td",[e._v(e._s(t.item.prescription_execute_state))]),e._v(" "),i("td",[e._v(e._s(t.item.prescription_fee))]),e._v(" "),i("td",[i("v-icon",{on:{click:function(e){t.expanded=!t.expanded}}},[e._v("\n                remove_red_eye\n              ")])],1)]}},{key:"expand",fn:function(t){return[i("div",[i("v-container",{staticStyle:{"max-width":"750px"}},[i("v-card",[i("v-toolbar",{attrs:{flat:"",dense:"",color:"white"}},[e._v("\n                    药品\n                    "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"primary",small:"",icon:"",flat:""},on:{click:function(i){e.show=!e.show,e.prescription_id=t.item.prescription_id}}},[i("v-icon",[e._v("\n                        add\n                      ")])],1),e._v(" "),i("v-btn",{attrs:{color:"primary",small:"",icon:"",flat:""},on:{click:function(i){return e.deleteContent(t.item)}}},[i("v-icon",[e._v("\n                        delete\n                      ")])],1)],1),e._v(" "),i("v-divider"),e._v(" "),i("v-data-table",{attrs:{headers:e.headers_con,items:t.item.prescriptionContents,"item-key":"prescription_content_id","hide-actions":"","select-all":""},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.prescription_medicine_id))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine.medicine_name))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine.medicine_specifications))]),e._v(" "),i("td",[e._v(e._s(t.item.prescription_day))]),e._v(" "),i("td",[e._v(e._s(t.item.prescription_consumption))]),e._v(" "),i("td",[e._v(e._s(t.item.prescription_unit_price))]),e._v(" "),i("td",[e._v(e._s(t.item.prescription_frequency))]),e._v(" "),i("td",[e._v(e._s(t.item.prescription_num))])]}}],null,!0),model:{value:e.selected_con,callback:function(t){e.selected_con=t},expression:"selected_con"}}),e._v(" "),i("v-divider"),e._v(" "),i("v-card-actions",[i("v-spacer"),e._v(" "),i("v-btn",{staticClass:"white--text",attrs:{color:"primary",small:""},on:{click:function(i){e.text=!e.text,e.tem_add=t.item.prescriptionContents}}},[e._v("\n                      保存\n                    ")])],1)],1)],1)],1)]}}]),model:{value:e.selected_pre,callback:function(t){e.selected_pre=t},expression:"selected_pre"}}),e._v(" "),i("v-divider")],1),e._v(" "),i("v-divider",{attrs:{vertical:""}}),e._v(" "),i("v-flex",{attrs:{xs3:""}},[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v("常用模板")])],1),e._v(" "),i("v-data-table",{attrs:{headers:e.headers_tem,items:e.filterDessertsTem,"item-key":"template_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.template_name))]),e._v(" "),i("td",[i("v-btn",{staticClass:"ml-3",attrs:{icon:"",color:"primary",flat:"",right:"",small:""},on:{click:function(i){return e.useTem(t.item)}}},[e._v("\n                使用\n              ")]),e._v(" "),i("v-btn",{staticClass:"ml-3",attrs:{icon:"",color:"primary",flat:"",small:"",right:""},on:{click:function(i){return e.seeTem(t.item)}}},[e._v("\n                详情\n              ")])],1)]}}])}),e._v(" "),i("v-divider")],1)],1)],1)],1)},staticRenderFns:[]};var K={props:["msgfromfa","record"],data:function(){return{search_patient:this.msgfromfa.register_info_id,headers_patient:[{text:"挂号ID",align:"left",value:"register_info_id"},{text:"病历号",value:"register_info_patient_id"},{text:"患者",value:"patient.patient_name"},{text:"状态",value:"register_info_state"},{text:"操作",value:"operation"}],desserts_patient:[],headers:[{text:"ID",align:"left",value:"code"},{text:"名称",value:"name"},{text:"状态",value:"state"},{text:"类型",value:"type"},{text:"金额",value:"number"}],desserts:[],headers_dia:[{text:"编码",align:"left",value:"disease_icd"},{text:"名称",value:"disease_name"},{text:"分类",value:"disease_type"}],desserts_dia:[],sum:""}},mounted:function(){this.get(),this.search_patient=this.msgfromfa.register_info_id},computed:{returnSum:function(){for(var e=0,t=0;t<this.desserts;t++)e+=this.desserts[t].number;return e}},watch:{record:function(e,t){this.get()}},methods:{filterType:function(e){return"已开立"===e.state||"已发送"===e.state},filterPatients:function(e){return"已退号"!==e.register_info_state&&"已挂号"!==e.register_info_state},get:function(){var e=this,t=this.HOME+"/doctor/get-doctor-treated-registers?token="+sessionStorage.getItem("token"),i={doctor_id:e.msgfromfa.register_info_doctor_id};this.$http.post(t+"?token="+sessionStorage.getItem("token"),i).then(function(t){e.desserts_patient=t.data.data,console.log(e.desserts_patient)})},getFee:function(e){var t=this,i=this.HOME+"/doctor/get-all-prescription?token="+sessionStorage.getItem("token");console.log(e);var a={register_id:e.register_info_id};t.desserts=[],this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data);for(var i=0;i<e.data.data.length;i++){var a={code:e.data.data[i].prescription_id,name:e.data.data[i].prescription_name,state:e.data.data[i].prescription_execute_state,type:e.data.data[i].prescription_type,number:e.data.data[i].prescription_fee};t.desserts.push(a)}});var s=this.HOME+"/doctor/get-all-medical-skill?token="+sessionStorage.getItem("token");this.$http.post(s+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data);for(var i=0;i<e.data.data.length;i++){var a={code:e.data.data[i].medical_skill_id,name:e.data.data[i].medical_skill_name,state:e.data.data[i].medical_skill_execute_state,type:e.data.data[i].medical_skill_type,number:e.data.data[i].medical_skill_fee};t.desserts.push(a)}})}}},Q={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-layout",[i("v-flex",{attrs:{xs4:""}},[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[e._v("患者查询")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-flex",{attrs:{md6:""}},[i("v-text-field",{staticStyle:{"margin-bottom":"12px"},attrs:{"append-icon":"search",label:"搜索","single-line":"","hide-details":""},model:{value:e.search_patient,callback:function(t){e.search_patient=t},expression:"search_patient"}})],1)],1),e._v(" "),i("v-divider"),e._v(" "),i("v-data-table",{attrs:{headers:e.headers_patient,items:e.desserts_patient.filter(e.filterPatients),search:e.search_patient},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.register_info_id))]),e._v(" "),i("td",[e._v(e._s(t.item.register_info_patient_id))]),e._v(" "),i("td",[e._v(e._s(t.item.patient.patient_name))]),e._v(" "),i("td",[e._v(e._s(t.item.register_info_state))]),e._v(" "),i("td",[i("v-btn",{staticClass:"ml-3",attrs:{small:"",right:"",icon:"",flat:"",color:"primary"},on:{click:function(i){return e.getFee(t.item)}}},[e._v("\n              查看\n            ")])],1)]}}])})],1),e._v(" "),i("v-divider",{attrs:{vertical:""}}),e._v(" "),i("v-flex",[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[e._v("项目明细")])],1),e._v(" "),i("v-divider"),e._v(" "),i("v-data-table",{attrs:{headers:e.headers,items:e.desserts.filter(e.filterType)},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.code))]),e._v(" "),i("td",[e._v(e._s(t.item.name))]),e._v(" "),i("td",[e._v(e._s(t.item.state))]),e._v(" "),i("td",[e._v(e._s(t.item.type))]),e._v(" "),i("td",[e._v(e._s(t.item.number))])]}}])})],1)],1)],1)},staticRenderFns:[]};var X={props:["msgfromfa","record"],data:function(){return{dialog_err:!1,dialog_suc:!1,msg_suc:"success",msg_err:"error",tem:!1,dialog:!1,selected_dia:[],selected:[],selected_tem:[],search:"",alert_success:!1,msg_success:"",alert_error:!1,msg_error:"",text:!1,show:!1,show_tem:!1,expand:!1,expand_dia:!1,isNo:[{text:"是",value:"true"},{text:"否",value:"false"}],headers_dia:[{text:"编号",align:"left",value:"medical_skill_content_id"},{text:"项目名称",value:"medical_skill_content_name"},{text:"父级编码",value:"medical_skill_content_father"},{text:"单位",value:"medical_skill_content_unit"},{text:"单价",value:"medical_skill_content_price"},{text:"操作",value:"operation"}],desserts_dia:[],headers:[{text:"项目名称",value:"medical_skill_name"},{text:"执行科室",value:"medical_skill_execute_department"},{text:"执行状态",value:"medical_skill_execute_state"},{text:"单价",value:"medical_skill_fee"},{text:"操作",value:"operation"}],desserts:[],headers_tem:[{text:"模板名称",align:"left",value:"template_name"},{text:"操作",value:"operation",sortable:!1}],headers_tem_con:[{text:"项目名称",value:"template_medical_skill_content_name"},{text:"执行科室",value:"template_medical_skill_content_department_name"},{text:"检查部位",value:"template_medical_skill_content_checkpoint"},{text:"目的",value:"template_medical_skill_content_specification"},{text:"是否加急",value:"template_medical_skill_content_department_id"},{text:"单价",value:"template_medical_skill_content_unit_price"},{text:"操作",value:"operation"}],desserts_tem:[],desserts_tem_con:[],medical_skill_name:"",medical_skill_checkpoint:"",medical_skill_purpose:"",medical_skill_urgent:"",template_name:"",template_range:"",template_id:"",template_con_name:"",template_con_range:"",template_con_type:"",template_con_id:"",departments:[],department:""}},created:function(){this.load_mediskill(),this.getItem(),this.getTem(),this.load_departs()},watch:{record:function(e,t){this.load_mediskill(),this.getItem(),this.getTem()},dialog_suc:function(e){var t=this;e&&setTimeout(function(){return t.dialog_suc=!1},1e3)},dialog_err:function(e){var t=this;e&&setTimeout(function(){return t.dialog_err=!1},1e3)},dialog:function(e){var t=this;e&&setTimeout(function(){return t.network_out},1e4)}},computed:{filterDesserts:function(){return this.desserts.filter(this.filterType)},filterDeparts:function(){return this.departments.filter(this.filterDepart)},filterDessertsTem:function(){return this.desserts_tem.filter(this.filterType_tem)},fee:function(){var e,t=0;for(e=0;e<this.filterDesserts.length;e++)t+=this.filterDesserts[e].medical_skill_fee;return t}},methods:{network_out:function(){this.dialog=!1,this.dialog_err=!0,this.msg_err="网络不通畅，请重新来过"},load_departs:function(){var e=this,t=this.HOME+"/maintenance/department/get-all";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{}).then(function(t){console.log(t.data),e.departments=t.data.data})},filterType:function(e){return"检验"===e.medical_skill_type},filterDepart:function(e){return"医技科室"===e.department_cat},filterType_tem:function(e){return"检验"===e.template_type},getTem:function(){var e=this,t={doctor_id:this.$store.state.user.id,department_id:this.$store.state.user.department_id},i=this.HOME+"/template/get-all";this.$http.post(i+"?token="+sessionStorage.getItem("token"),t).then(function(t){console.log(t.data),e.desserts_tem=t.data.data,e.dialog=!1})},deleteTem:function(){var e=this,t={template_id:e.template_con_id},i=this.HOME+"/template/delete-template";this.$http.post(i+"?token="+sessionStorage.getItem("token"),t).then(function(t){console.log(t.data),e.getTem(),e.tem=!1})},updateTem:function(){var e=this,t={template_name:e.template_con_name,template_init_date:new Date,template_type:e.template_con_type,template_range:e.template_con_range,template_id:e.template_con_id,template_doctor_id:e.msgfromfa.register_info_doctor_id},i=this.HOME+"/template/update-template";this.$http.post(i+"?token="+sessionStorage.getItem("token"),t).then(function(t){console.log(t.data),e.getTem(),e.tem=!1})},useTem:function(e){var t=this,i={template_id:e.template_id},a=this.HOME+"/template/get-content-non-medicine";this.$http.post(a+"?token="+sessionStorage.getItem("token"),i).then(function(e){var i;for(console.log(e.data),t.dialog=!0,i=0;i<e.data.data.length;i++)t.addItemByTem(e.data.data[i]);t.dialog=!1})},seeTem:function(e){var t=this;this.tem=!0;var i={template_id:e.template_id};t.template_con_name=e.template_name,t.template_con_range=e.template_range,t.template_con_type=e.template_type,t.template_con_id=e.template_id;var a=this.HOME+"/template/get-content-non-medicine";this.$http.post(a+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data),t.desserts_tem_con=e.data.data,t.dialog=!1})},addTem:function(){var e=this,t={template_type:"检验",template_name:e.template_name,template_range:e.template_range,template_doctor_id:e.msgfromfa.register_info_doctor_id};console.log(t);var i=this.HOME+"/template/add-template";this.$http.post(i+"?token="+sessionStorage.getItem("token"),t).then(function(t){console.log(t.data),e.dialog=!0,e.template_con_id=t.data.data.template_id,e.addTemContent(),e.text=!1,e.getTem(),e.dialog=!1})},addTemContent:function(){var e,t=this.HOME+"/template/add-content-non-medicine";for(e=0;e<this.filterDesserts.length;e++){var i={template_connect_id:this.template_con_id,template_medical_skill_content_id:this.filterDesserts[e].medical_skill_content_id,template_medical_skill_content_name:this.filterDesserts[e].medical_skill_name,template_medical_skill_content_department_id:this.filterDesserts[e].medical_skill_urgent,template_medical_skill_content_specification:this.filterDesserts[e].medical_skill_purpose,template_medical_skill_content_checkpoint:this.filterDesserts[e].medical_skill_checkpoint,template_medical_skill_content_department_name:this.filterDesserts[e].medical_skill_execute_department,template_medical_skill_content_unit_price:this.filterDesserts[e].medical_skill_fee};console.log(i),this.$http.post(t+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data)})}},addTemContentSingle:function(e){var t=this,i=this.HOME+"/template/add-content-non-medicine",a={template_connect_id:t.template_con_id,template_medical_skill_content_id:e.medical_skill_content_id,template_medical_skill_content_name:e.medical_skill_content_name,template_medical_skill_content_department_id:t.medical_skill_urgent,template_medical_skill_content_specification:t.medical_skill_purpose,template_medical_skill_content_checkpoint:t.medical_skill_checkpoint,template_medical_skill_content_department_name:t.department.department_name,template_medical_skill_content_unit_price:e.medical_skill_content_price};t.medical_skill_urgent="",t.medical_skill_purpose="",t.medical_skill_checkpoint="",console.log(e),t.dialog=!0,this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data);var i={template_name:t.template_con_name,template_range:t.template_con_range,template_type:t.template_con_type,template_id:t.template_con_id};t.seeTem(i),t.dialog=!1,t.show_tem=!1})},deleteTemContentSingle:function(e){var t=this,i=this.HOME+"/template/delete-content",a={template_content_id:e.template_content_id};t.dialog=!0,console.log(e),this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data);var i={template_name:t.template_con_name,template_range:t.template_con_range,template_type:t.template_con_type,template_id:t.template_con_id};t.seeTem(i)})},deleteTemContent:function(){var e,t=this,i=this.HOME+"/template/delete-content";for(e=0;e<t.selected_tem.length;e++){var a={template_content_id:t.selected_tem[e].template_content_id};console.log(a),this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data);var i={template_name:t.template_con_name,template_range:t.template_con_range,template_type:t.template_con_type,template_id:t.template_con_id};t.dialog=!0,t.seeTem(i)})}},getItem:function(){var e=this,t=this.HOME+"/doctor/get-record",i={record_id:e.msgfromfa.register_info_id};this.$http.post(t+"?token="+sessionStorage.getItem("token"),i).then(function(t){console.log(t.data.data),e.desserts=t.data.data.medicalSkills})},addItem:function(e){var t=this;console.log(e);var i={medical_skill_type:"检验",medical_skill_name:e.medical_skill_content_name,medical_skill_checkpoint:t.medical_skill_checkpoint,medical_skill_purpose:t.medical_skill_purpose,medical_skill_urgent:t.medical_skill_urgent,medical_skill_register_info_id:t.msgfromfa.register_info_id,medical_skill_doctor_id:t.msgfromfa.register_info_doctor_id,medical_skill_content_id:e.medical_skill_content_id,medical_skill_fee:e.medical_skill_content_price,medical_skill_execute_department:t.department.department_name};console.log(i);var a=this.HOME+"/doctor/add-medical-skill";this.$http.post(a+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data),t.show=!1,t.dialog=!0,t.getItem(),t.dialog=!1})},addItemByTem:function(e){var t=this;console.log(e);var i={medical_skill_type:"检验",medical_skill_name:e.template_medical_skill_content_name,medical_skill_checkpoint:e.template_medical_skill_content_checkpoint,medical_skill_purpose:e.template_medical_skill_content_specification,medical_skill_urgent:e.template_medical_skill_content_department_id,medical_skill_register_info_id:t.msgfromfa.register_info_id,medical_skill_doctor_id:t.msgfromfa.register_info_doctor_id,medical_skill_content_id:e.template_medical_skill_content_id,medical_skill_fee:e.template_medical_skill_content_unit_price,medical_skill_execute_department:e.template_medical_skill_content_department_name};console.log(i);var a=this.HOME+"/doctor/add-medical-skill";this.$http.post(a+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data),t.show=!1,t.dialog=!0,t.getItem(),t.dialog=!1})},deleteItem:function(){var e,t=this;t.dialog=!0;var i,a=this.HOME+"/doctor/delete-medical-skill";for(console.log(t.selected),e=0;e<t.selected.length;e++)i={medical_skill_id:t.selected[e].medical_skill_id},this.$http.post(a+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data),t.getItem(),t.dialog=!1})},startItem:function(){var e,t=this;t.dialog=!0;var i=this.HOME+"/doctor/start-medical-skill";for(console.log(t.selected),e=0;e<t.selected.length;e++){var a={medical_skill_id:t.selected[e].medical_skill_id};this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data),t.getItem(),t.dialog=!1})}},endItem:function(){var e,t=this;t.dialog=!0;var i=this.HOME+"/doctor/end-medical-skill";for(console.log(t.selected),e=0;e<t.selected.length;e++){var a={medical_skill_id:t.selected[e].medical_skill_id};this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data),t.getItem(),t.dialog=!1})}},load_mediskill:function(){var e=this,t=this.HOME+"/maintenance/medical-skill-content/get-all";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{}).then(function(t){console.log(t.data),e.desserts_dia=t.data.data})}}},ee={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",{attrs:{color:"primary",dark:""}},[i("v-card-text",[e._v("\n        请稍等\n        "),i("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),i("v-dialog",{attrs:{"hide-overlay":"",width:"800"},model:{value:e.tem,callback:function(t){e.tem=t},expression:"tem"}},[i("v-card",[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[e._v("医技模板详情")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:e.deleteTem}},[i("v-icon",[e._v("\n            delete\n          ")])],1),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:e.updateTem}},[i("v-icon",[e._v("\n            save\n          ")])],1)],1),e._v(" "),i("v-container",{attrs:{"grid-list-md":""}},[i("v-layout",[i("v-flex",{attrs:{xs12:""}},[i("v-text-field",{attrs:{label:"模板名称",required:""},model:{value:e.template_con_name,callback:function(t){e.template_con_name=t},expression:"template_con_name"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-select",{attrs:{items:["个人","科室","全院"],label:"模板范围",required:""},model:{value:e.template_con_range,callback:function(t){e.template_con_range=t},expression:"template_con_range"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-select",{attrs:{items:["检验","检查","处置"],label:"类型",required:""},model:{value:e.template_con_type,callback:function(t){e.template_con_type=t},expression:"template_con_type"}})],1)],1)],1),e._v(" "),i("v-divider"),e._v(" "),i("v-toolbar",{attrs:{flat:"",dense:"",color:"white"}},[i("v-toolbar-title",[e._v("医技项目")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:e.deleteTemContent}},[i("v-icon",[e._v("\n            delete\n          ")])],1),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:function(t){e.show_tem=!e.show_tem}}},[i("v-icon",[e._v("\n            add\n          ")])],1)],1),e._v(" "),i("v-divider"),e._v(" "),i("v-data-table",{attrs:{headers:e.headers_tem_con,items:e.desserts_tem_con,"select-all":"","item-key":"template_content_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.template_medical_skill_content_name))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medical_skill_content_department_name))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medical_skill_content_checkpoint))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medical_skill_content_specification))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medical_skill_content_department_id))]),e._v(" "),i("td",[e._v(e._s(t.item.template_medical_skill_content_unit_price))]),e._v(" "),i("td",[i("v-btn",{staticClass:"ml-3",attrs:{icon:"",flat:"",small:"",color:"primary",right:""},on:{click:function(i){return e.deleteTemContentSingle(t.item)}}},[e._v("\n              删除\n            ")])],1)]}}]),model:{value:e.selected_tem,callback:function(t){e.selected_tem=t},expression:"selected_tem"}})],1)],1),e._v(" "),i("v-dialog",{attrs:{"max-width":"400px"},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[e._v("添加医技模板")])]),e._v(" "),i("v-card-text",[i("v-container",{attrs:{"grid-list-md":""}},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("v-text-field",{attrs:{label:"模板名称",required:""},model:{value:e.template_name,callback:function(t){e.template_name=t},expression:"template_name"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-select",{attrs:{items:["个人","科室","全院"],label:"模板范围",required:""},model:{value:e.template_range,callback:function(t){e.template_range=t},expression:"template_range"}})],1)],1)],1)],1),e._v(" "),i("v-card-actions",[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(t){e.text=!1}}},[e._v("关闭")]),e._v(" "),i("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:e.addTem}},[e._v("保存")])],1)],1)],1),e._v(" "),i("v-dialog",{attrs:{"max-width":"800"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("v-card",[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[e._v("医技项目目录")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-flex",{attrs:{xs3:""}},[i("v-text-field",{attrs:{"prepend-inner-icon":"search",label:"编号/名称",required:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers_dia,items:e.desserts_dia,expand:!1,search:e.search,"item-key":"medical_skill_content_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.medical_skill_content_id))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_name))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_father))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_unit))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_price))]),e._v(" "),i("td",[i("v-btn",{attrs:{icon:"",flat:"",color:"primary",right:""}},[i("v-icon",{attrs:{color:"primary"},on:{click:function(e){t.expanded=!t.expanded}}},[e._v("\n                add\n              ")])],1)],1)]}},{key:"expand",fn:function(t){return[i("v-layout",{attrs:{"align-center":"","justify-center":"",row:""}},[i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-select",{attrs:{items:e.departments,"item-text":"department_name",item_value:"department_id",label:"科室","return-object":"",required:""},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"部位",required:""},model:{value:e.medical_skill_checkpoint,callback:function(t){e.medical_skill_checkpoint=t},expression:"medical_skill_checkpoint"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"目的",required:""},model:{value:e.medical_skill_purpose,callback:function(t){e.medical_skill_purpose=t},expression:"medical_skill_purpose"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-select",{attrs:{items:e.isNo,label:"是否加急",required:""},model:{value:e.medical_skill_urgent,callback:function(t){e.medical_skill_urgent=t},expression:"medical_skill_urgent"}})],1),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(i){return e.addItem(t.item)}}},[e._v("\n              添加\n            ")])],1)]}}])})],1)],1),e._v(" "),i("v-dialog",{attrs:{"max-width":"800"},model:{value:e.show_tem,callback:function(t){e.show_tem=t},expression:"show_tem"}},[i("v-card",[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[e._v("医技项目目录")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-flex",{attrs:{xs3:""}},[i("v-text-field",{attrs:{"prepend-inner-icon":"search",label:"编号/名称",required:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),e._v(" "),i("v-data-table",{attrs:{headers:e.headers_dia,items:e.desserts_dia,expand:!1,search:e.search,"item-key":"medical_skill_content_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.medical_skill_content_id))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_name))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_father))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_unit))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_price))]),e._v(" "),i("td",[i("v-btn",{attrs:{icon:"",flat:"",color:"primary",right:""}},[i("v-icon",{attrs:{color:"primary"},on:{click:function(e){t.expanded=!t.expanded}}},[e._v("\n                add\n              ")])],1)],1)]}},{key:"expand",fn:function(t){return[i("v-layout",{attrs:{"align-center":"","justify-center":"",row:""}},[i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-select",{attrs:{items:e.departments,"item-text":"department_name",item_value:"department_id",label:"科室","return-object":"",required:""},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"部位",required:""},model:{value:e.medical_skill_checkpoint,callback:function(t){e.medical_skill_checkpoint=t},expression:"medical_skill_checkpoint"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-text-field",{attrs:{label:"目的",required:""},model:{value:e.medical_skill_purpose,callback:function(t){e.medical_skill_purpose=t},expression:"medical_skill_purpose"}})],1),e._v(" "),i("v-flex",{staticClass:"mr-3",attrs:{xs2:""}},[i("v-select",{attrs:{items:e.isNo,label:"是否加急",required:""},model:{value:e.medical_skill_urgent,callback:function(t){e.medical_skill_urgent=t},expression:"medical_skill_urgent"}})],1),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(i){return e.addTemContentSingle(t.item)}}},[e._v("\n              添加\n            ")])],1)]}}])})],1)],1),e._v(" "),i("v-flex",{attrs:{shrink:""}},[i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialog_err,expression:"dialog_err"}],staticStyle:{"white-space":"nowrap"}},[i("v-alert",{attrs:{value:!0,type:"error"}},[e._v("\n          "+e._s(e.msg_err)+"\n        ")])],1)])],1),e._v(" "),i("v-flex",{attrs:{shrink:""}},[i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialog_suc,expression:"dialog_suc"}],staticStyle:{"white-space":"nowrap"}},[i("v-alert",{attrs:{value:!0,type:"success"}},[e._v("\n          "+e._s(e.msg_suc)+"\n        ")])],1)])],1),e._v(" "),i("v-form",[i("v-layout",[i("v-flex",{attrs:{lg9:"",md9:"",sm9:"",xs9:""}},[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v("合计:"+e._s(e.fee)+"元")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(t){e.show=!e.show}}},[e._v("\n            新增\n          ")]),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:e.deleteItem}},[e._v("\n            删除\n          ")]),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:e.startItem}},[e._v("\n            开立\n          ")]),e._v(" "),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:e.endItem}},[e._v("\n            作废\n          ")])],1),e._v(" "),i("v-data-table",{attrs:{headers:e.headers,items:e.filterDesserts,expand:!1,"item-key":"medical_skill_id","select-all":""},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_name))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_execute_department))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_execute_state))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_fee))]),e._v(" "),i("td",[i("v-icon",{on:{click:function(i){t.expanded=!t.expanded,e.getItem()}}},[e._v("\n                remove_red_eye\n              ")])],1)]}},{key:"expand",fn:function(t){return[i("v-flex",{attrs:{xs12:"",sm6:"","offset-sm1":""}},[i("v-card",{attrs:{flat:""}},[i("v-card-title",[i("div",[i("span",[t.item.medical_skill_urgent?i("div",[e._v("加急：是")]):i("div",[e._v("加急：否")])]),e._v(" "),i("span",[e._v("检查部位："+e._s(t.item.medical_skill_checkpoint))]),i("br"),e._v(" "),i("span",[e._v("目的："+e._s(t.item.medical_skill_purpose))]),i("br"),e._v(" "),i("span",{staticClass:"font-weight-regular"},[e._v("结果")]),i("br"),e._v(" "),i("span",[e._v("详情："+e._s(t.item.medical_skill_result))]),i("br")])])],1)],1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),e._v(" "),i("v-divider"),e._v(" "),i("v-card-actions",[i("v-spacer"),e._v(" "),i("v-btn",{staticClass:"white--text",attrs:{color:"primary",small:""},on:{click:function(t){e.text=!e.text}}},[e._v("\n            保存\n          ")])],1)],1),e._v(" "),i("v-divider",{attrs:{vertical:""}}),e._v(" "),i("v-flex",{attrs:{lg3:"",md3:"",sm3:"",xs3:""}},[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v("常用模板")])],1),e._v(" "),i("v-data-table",{attrs:{headers:e.headers_tem,items:e.filterDessertsTem,"item-key":"template_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.template_name))]),e._v(" "),i("td",[i("v-btn",{staticClass:"ml-3",attrs:{icon:"",color:"primary",flat:"",right:"",small:""},on:{click:function(i){return e.useTem(t.item)}}},[e._v("\n                使用\n              ")]),e._v(" "),i("v-btn",{staticClass:"ml-3",attrs:{icon:"",color:"primary",flat:"",small:"",right:""},on:{click:function(i){return e.seeTem(t.item)}}},[e._v("\n                详情\n              ")])],1)]}}])})],1)],1)],1)],1)},staticRenderFns:[]};var te={components:{caseHistory:i("VU/8")(P,N,!1,function(e){i("5FDE")},"data-v-2cc13e03",null).exports,inspect:i("VU/8")(V,B,!1,function(e){i("+PXS")},"data-v-1282f443",null).exports,diagnosis:i("VU/8")(L,W,!1,function(e){i("Tq18")},"data-v-7bdc34f1",null).exports,dispose:i("VU/8")(z,A,!1,function(e){i("FkUm")},"data-v-62ce754d",null).exports,medicine:i("VU/8")(Y,G,!1,function(e){i("vcrr")},"data-v-eeced388",null).exports,drug:i("VU/8")(Z,J,!1,function(e){i("kW3n")},"data-v-060e4ed0",null).exports,cost:i("VU/8")(K,Q,!1,function(e){i("Ai6W")},"data-v-37e757c8",null).exports,jianyan:i("VU/8")(X,ee,!1,function(e){i("TZ+H")},"data-v-f21b3038",null).exports},data:function(){return{dialog_add:!1,dialog_err:!1,dialog_suc:!1,msg_suc:"success",msg_err:"error",dialog:!1,e1:1,disable:!1,search:"",headers:[{text:"病历号",align:"left",value:"patient.patient_record_id"},{text:"患者名称",value:"patient.patient_name"},{text:"操作",value:"operation",sortable:!1}],headers1:[{text:"病历号",align:"left",value:"patient.patient_record_id"},{text:"患者名称",value:"patient.patient_name"}],active:"desserts_per",active1:"1",show:!0,patient:{patient_record_id:"",patient_gender:"",patient_name:"",patient_credit_id:"",patient_birthDate:"",patient_address:"",patient_age:""},record_id:"",desserts_per:"",desserts_depart:"",steps:8,message:"",items1:[{name:"本人",id:"desserts_per"},{name:"科室",id:"desserts_depart"}],items:[{name:"病例首页",id:"caseHistory"},{name:"检查申请",id:"inspect"},{name:"检验申请",id:"jianyan"},{name:"门诊确诊",id:"diagnosis"},{name:"处置申请",id:"dispose"},{name:"成药处方",id:"medicine"},{name:"草药处方",id:"drug"},{name:"费用查询",id:"cost"}],record:""}},computed:{depart_on:function(){return this.desserts_depart.filter(this.filterState_on)},depart_off:function(){return this.desserts_depart.filter(this.filterState_off)},per_on:function(){return console.log(this.desserts_per.filter(this.filterState_on)),this.desserts_per.filter(this.filterState_on)},per_off:function(){return this.desserts_per.filter(this.filterState_off)}},watch:{dialog_suc:function(e){var t=this;e&&setTimeout(function(){return t.dialog_suc=!1},1e3)},dialog:function(e){var t=this;e&&setTimeout(function(){return t.network_out},1e4)},dialog_err:function(e){var t=this;e&&setTimeout(function(){return t.dialog_err=!1},1e3)}},mounted:function(){this.Check(),this.load_patient_self(),this.load_patient_depart()},methods:{Check:function(){var e=window.localStorage;if("门诊医生"===e.getItem("type")){var t={account:e.getItem("account"),department_id:e.getItem("department_id"),id:e.getItem("id"),name:e.getItem("name"),type:e.getItem("type")};this.$store.commit("set_user",t),this.$store.commit("login")}this.$store.state.isLogin&&"门诊医生"===this.$store.state.user.type?this.$router.push("/Diagnostician"):this.$router.push("/login")},network_out:function(){this.dialog=!1,this.dialog_err=!0,this.msg_err="网络不通畅，请重新来过"},filterState_on:function(e){return"已挂号"===e.register_info_state},filterState_off:function(e){return"已就诊"===e.register_info_state},load_patient_self:function(){var e=this.HOME+"/doctor/get-all-registers",t=this,i={doctor_id:this.$store.state.user.id};t.dialog=!0,this.$http.post(e+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data),t.desserts_per=e.data.data,console.log(t.desserts_per)})},load_patient_depart:function(){var e=this.HOME+"/doctor/get-department-registers",t=this,i={department_id:this.$store.state.user.department_id};this.$http.post(e+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data),t.desserts_depart=e.data.data,console.log(t.desserts_depart),t.dialog=!1})},treat:function(e){var t=this.HOME+"/doctor/treat",i=this;i.message=e,i.patient=e.patient,i.record_id=e.register_info_id;var a={register_id:e.register_info_id};console.log(e),this.$http.post(t+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data),200===e.data.code?(i.load_patient_self(),i.load_patient_depart(),i.get(),i.dialog_suc=!0,i.msg_suc="接诊成功"):(i.dialog_err=!0,i.msg_err="接诊失败")})},finish:function(){var e=this.HOME+"/doctor/finish",t=this,i={register_id:t.record_id};this.$http.post(e+"?token="+sessionStorage.getItem("token"),i).then(function(e){console.log(e.data),200===e.data.code?(t.msg_suc="已诊毕",t.dialog_suc=!0,t.load_patient_self(),t.load_patient_depart()):(t.dialog_err=!0,t.msg_err="诊毕失败")})},get:function(){var e=this,t=this.HOME+"/doctor/get-record",i={record_id:e.record_id};this.$http.post(t+"?token="+sessionStorage.getItem("token"),i).then(function(t){console.log(t.data.data),e.record=t.data.data})},getValue:function(e){var t=this;console.log(e);var i=this.HOME+"/doctor/get-record",a={record_id:e.register_info_id};t.msg_suc="已接诊",t.dialog_suc=!0,t.record_id=e.register_info_id,t.message=e,t.patient=e.patient,this.$http.post(i+"?token="+sessionStorage.getItem("token"),a).then(function(e){console.log(e.data.data),t.record=e.data.data})},refresh:function(){this.patient_name=""}}},ie={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",{attrs:{color:"primary",dark:""}},[i("v-card-text",[e._v("\n        请稍等\n        "),i("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),i("v-flex",{attrs:{shrink:""}},[i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialog_err,expression:"dialog_err"}],staticStyle:{"white-space":"nowrap"}},[i("v-alert",{attrs:{value:!0,type:"error"}},[e._v("\n          "+e._s(e.msg_err)+"\n        ")])],1)])],1),e._v(" "),i("v-flex",{attrs:{shrink:""}},[i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialog_suc,expression:"dialog_suc"}],staticStyle:{"white-space":"nowrap"}},[i("v-alert",{attrs:{value:!0,type:"success"}},[e._v("\n          "+e._s(e.msg_suc)+"\n        ")])],1)])],1),e._v(" "),i("v-card",[i("v-layout",[i("v-flex",{attrs:{shrink:""}},[i("v-expand-x-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticStyle:{"white-space":"nowrap",width:"300px"}},[i("v-layout",[i("v-flex",{attrs:{md10:"",xs10:""}},[i("v-text-field",{staticStyle:{"margin-left":"25px"},attrs:{"prepend-inner-icon":"search",name:"login",label:"查询患者",type:"text"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),e._v(" "),i("v-layout",[i("v-tabs",{staticStyle:{width:"300px"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[e._l(e.items1,function(t){return i("v-tab",{key:t,attrs:{ripple:""}},[e._v("\n                "+e._s(t.name)+"\n              ")])}),e._v(" "),e._l(e.items1,function(t){return i("v-tab-item",{key:t},["desserts_per"==t.id?i("div",[i("v-card",{attrs:{flat:""}},[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v("未诊断")])],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{search:e.search,headers:e.headers,items:e.desserts_per.YiGuaHao},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.patient.patient_record_id))]),e._v(" "),i("td",[e._v(e._s(t.item.patient.patient_name))]),e._v(" "),i("td",[i("v-btn",{staticClass:"ml-3",attrs:{color:"primary",small:"",flat:"",icon:"",right:"",disabled:e.disable,"append-icon":"search"},on:{click:function(i){return e.treat(t.item)}}},[e._v("\n                            接诊\n                          ")])],1)]}}],null,!0)})],1),e._v(" "),i("v-card",{attrs:{flat:""}},[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v("已诊断")])],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{search:e.search,headers:e.headers,items:e.desserts_per.YiJiuZhen},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.patient.patient_record_id))]),e._v(" "),i("td",[e._v(e._s(t.item.patient.patient_name))]),e._v(" "),i("td",[i("v-btn",{staticClass:"ml-3",attrs:{color:"primary",small:"",flat:"",icon:"",right:"",disabled:e.disable,"append-icon":"search"},on:{click:function(i){return e.getValue(t.item)}}},[e._v("\n                          接诊\n                        ")])],1)]}}],null,!0)})],1)],1):e._e(),e._v(" "),"desserts_depart"==t.id?i("div",[i("v-card",{attrs:{flat:""}},[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v("未诊断")])],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{search:e.search,headers:e.headers1,items:e.desserts_depart.YiGuaHao},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.patient.patient_record_id))]),e._v(" "),i("td",[e._v(e._s(t.item.patient.patient_name))])]}}],null,!0)})],1),e._v(" "),i("v-card",{attrs:{flat:""}},[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v("已诊断")])],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{search:e.search,headers:e.headers1,items:e.desserts_depart.YiJiuZhen},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.patient.patient_record_id))]),e._v(" "),i("td",[e._v(e._s(t.item.patient.patient_name))])]}}],null,!0)})],1)],1):e._e()])})],2)],1)],1)])],1),e._v(" "),i("v-divider",{attrs:{vertical:""}}),e._v(" "),i("v-flex",{attrs:{xs12:"",md12:""}},[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-side-icon",{on:{click:function(t){t.stopPropagation(),e.show=!e.show}}}),e._v(" "),i("v-toolbar-items",[i("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[i("v-btn",e._g({attrs:{flat:""}},a),[e._v("\n                患者"+e._s(":"+e.patient.patient_name)+"\n                "),i("v-icon",[e._v("\n                  arrow_drop_down\n                ")])],1)]}}])},[e._v(" "),i("v-card",[i("v-list",{attrs:{dense:""}},[i("v-list-tile",[i("v-list-tile-content",[e._v("姓名:")]),e._v(" "),i("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(e.patient.patient_name))])],1),e._v(" "),i("v-list-tile",[i("v-list-tile-content",[e._v("性别:")]),e._v(" "),e.patient.patient_gender?i("v-list-tile-content",{staticClass:"align-end"},[e._v("男")]):i("v-list-tile-content",{staticClass:"align-end"},[e._v("女")])],1),e._v(" "),i("v-list-tile",[i("v-list-tile-content",[e._v("年龄:")]),e._v(" "),i("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(e.patient.patient_age))])],1),e._v(" "),i("v-list-tile",[i("v-list-tile-content",[e._v("出生日期:")]),e._v(" "),i("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(e.patient.patient_birthDate.slice(0,10)))])],1),e._v(" "),i("v-list-tile",[i("v-list-tile-content",[e._v("身份证号:")]),e._v(" "),i("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(e.patient.patient_credit_id))])],1)],1)],1)],1)],1),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"primary",small:""},on:{click:e.finish}},[e._v("\n          诊毕\n        ")])],1),e._v(" "),i("v-stepper",{attrs:{flat:""},model:{value:e.e1,callback:function(t){e.e1=t},expression:"e1"}},[i("v-stepper-header",[e._l(e.items,function(t,a){return[i("v-stepper-step",{key:t.id,attrs:{complete:e.e1>a+1,step:a+1,editable:"","edit-icon":"check"}},[e._v("\n              "+e._s(t.name)+"\n            ")]),e._v(" "),a+1!==e.items.length?i("v-divider",{key:a+1}):e._e()]})],2),e._v(" "),i("v-stepper-items",e._l(e.items,function(t,a){return i("v-stepper-content",{key:t.id,staticClass:"pa-0",attrs:{step:a+1}},[i("v-card",["caseHistory"==t.id?i("div",[i("caseHistory",{attrs:{msgfromfa:e.message,record:e.record}})],1):e._e(),e._v(" "),"inspect"==t.id?i("div",[i("inspect",{attrs:{msgfromfa:e.message,record:e.record}})],1):e._e(),e._v(" "),"jianyan"==t.id?i("div",[i("jianyan",{attrs:{msgfromfa:e.message,record:e.record}})],1):e._e(),e._v(" "),"diagnosis"==t.id?i("div",[i("diagnosis",{attrs:{msgfromfa:e.message,record:e.record}})],1):e._e(),e._v(" "),"dispose"==t.id?i("div",[i("dispose",{attrs:{msgfromfa:e.message,record:e.record}})],1):e._e(),e._v(" "),"medicine"==t.id?i("div",[i("medicine",{attrs:{msgfromfa:e.message,record:e.record}})],1):e._e(),e._v(" "),"drug"==t.id?i("div",[i("drug",{attrs:{msgfromfa:e.message,record:e.record}})],1):e._e(),e._v(" "),"cost"==t.id?i("div",[i("cost",{attrs:{msgfromfa:e.message,record:e.record}})],1):e._e()])],1)}),1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var ae=i("VU/8")(te,ie,!1,function(e){i("mffz")},"data-v-3a7871a9",null).exports,se={data:function(){return{ms_item:"",ms_patient_id:"",show:!1,type_default:"处置",search_patient:"",state:"",ms_id:"",result:"",signal:"",state_items:[{text:"已取消执行"},{text:"已确认执行"}],headers_patient:[{text:"病人id",align:"left",value:"patient_record_id"},{text:"病人姓名",value:"patient_name"},{text:"操作",value:"operation",sortable:!1}],desserts_patient:[{patient_record_id:1,patient_name:"shu"}],headers_ms:[{text:"医技id",align:"left",value:"medical_skill_id"},{text:"医技状态",value:"medical_skill_execute_state"},{text:"医技状态",value:"medical_skill_name"},{text:"医技结果",value:"medical_skill_result"},{text:"操作",value:"operation",sortable:!1}],desserts_ms:[{medical_skill_id:1,medical_skill_execute_state:"验血",medical_skill_result:"正常"}],department_name_default:""}},methods:{filterDepart:function(e){return e.medical_skill_type===this.type_default},load_dept_name:function(){var e=this,t=this.HOME+"/maintenance/department/get";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{department_id:e.$store.state.user.department_id}).then(function(t){console.log(t.data),e.department_name_default=t.data.data.department_name,e.load()})},load:function(){var e=this,t=this.HOME+"/ms-doctor/get-all-patients";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{medical_skill_execute_department:e.department_name_default,medical_skill_type:e.type_default}).then(function(t){console.log(t.data),e.desserts_patient=t.data.data})},getPersonalMS:function(e){this.ms_patient_id=e.patient_record_id;var t=this,i=this.HOME+"/ms-doctor/medical-skill/get-by-patient";this.$http.post(i+"?token="+sessionStorage.getItem("token"),{medical_skill_execute_department:t.department_name_default,patient_id:e.patient_record_id}).then(function(e){console.log(e.data),t.desserts_ms=e.data.data})},setResult:function(){var e=this,t=this.HOME+"/ms-doctor/medical-skill/add-result";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{medical_skill_id:e.ms_id,medical_skill_result:e.result}).then(function(t){console.log(t.data),e.load();var i={patient_record_id:e.ms_patient_id};e.getPersonalMS(i)})},confirmState:function(){var e=this,t=this.HOME+"/ms-doctor/medical-skill/confirm";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{medical_skill_id:e.ms_id,medical_skill_execute_doctor_id:e.$store.state.user.id}).then(function(t){console.log(t.data),e.load();var i={patient_record_id:e.ms_patient_id};e.getPersonalMS(i)})},cancelState:function(){var e=this,t=this.HOME+"/ms-doctor/medical-skill/cancel";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{medical_skill_id:e.ms_id,medical_skill_execute_doctor_id:e.$store.state.user.id}).then(function(t){console.log(t.data),e.load();var i={patient_record_id:e.ms_patient_id};e.getPersonalMS(i)})},change:function(){this.state!==this.ms_item.medical_skill_execute_state&&("已确认执行"===this.state&&this.confirmState(),"已取消执行"===this.state&&this.cancelState()),this.result!==this.ms_item.medical_skill_result&&this.setResult(),this.show=!this.show},eraseForm:function(){this.ms_id="",this.result="",this.state="",this.ms_item=""},fillForm:function(e){this.ms_item=e,this.ms_id=e.medical_skill_id,this.result=e.medical_skill_result,this.state=e.medical_skill_execute_state}},mounted:function(){this.load_dept_name()},watch:{show:function(e,t){!1===e&&this.eraseForm()}}},ne={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-dialog",{attrs:{width:"300"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("v-layout",{attrs:{"justify-center":""}},[i("v-flex",{attrs:{xs12:""}},[i("v-card",{ref:"form"},[i("v-card-text",[i("v-text-field",{ref:"name",attrs:{"error-messages":e.errorMessages,label:"医技ID",placeholder:"请输入医技ID",disabled:!0,required:""},model:{value:e.ms_id,callback:function(t){e.ms_id=t},expression:"ms_id"}}),e._v(" "),i("v-select",{ref:"country",attrs:{items:e.state_items,label:"医技状态",placeholder:"请输入医技状态",required:""},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}}),e._v(" "),i("v-text-field",{ref:"country",attrs:{label:"医技结果",placeholder:"请输入医技结果",required:""},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}})],1),e._v(" "),i("v-card-actions",[i("v-btn",{attrs:{flat:""},on:{click:function(t){e.show=!e.show}}},[e._v("取消")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.change}},[e._v("确定")])],1)],1)],1)],1)],1),e._v(" "),i("v-layout",[i("v-flex",{attrs:{xs4:""}},[i("v-card",{attrs:{flat:""}},[i("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v("患者查询")])],1),e._v(" "),i("v-layout",[i("v-text-field",{staticStyle:{"margin-left":"10px"},attrs:{"append-icon":"search",label:"病历号","single-line":"","hide-details":""},model:{value:e.search_patient,callback:function(t){e.search_patient=t},expression:"search_patient"}}),e._v(" "),i("v-btn",{staticStyle:{"margin-top":"10px"},attrs:{color:"primary"}},[e._v("\n              搜索\n            ")])],1)],1)],1),e._v(" "),i("v-card",{attrs:{flat:""}},[i("v-card-title",[e._v("患者收费列表")]),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers_patient,items:e.desserts_patient,search:e.search_patient},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.patient_record_id))]),e._v(" "),i("td",[e._v(e._s(t.item.patient_name))]),e._v(" "),i("td",[i("v-btn",{attrs:{right:"",small:"",icon:"",flat:"",color:"primary"},on:{click:function(i){return e.getPersonalMS(t.item)}}},[i("v-icon",[e._v("check_circle")])],1)],1)]}}])})],1)],1),e._v(" "),i("v-divider",{attrs:{vertical:""}}),e._v(" "),i("v-flex",[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v("检验项目")])],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers_ms,items:e.desserts_ms.filter(e.filterDepart)},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.medical_skill_id))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_execute_state))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_name))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_result))]),e._v(" "),i("td",[i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(i){e.show=!e.show,e.fillForm(t.item)}}},[e._v("\n              edit\n            ")])],1)]}}])})],1)],1)],1)},staticRenderFns:[]};var re={data:function(){return{ms_item:"",ms_patient_id:"",show:!1,type_default:"检验",search_patient:"",state:"",ms_id:"",result:"",signal:"",state_items:[{text:"已取消执行"},{text:"已确认执行"}],headers_patient:[{text:"病人id",align:"left",value:"patient_record_id"},{text:"病人姓名",value:"patient_name"},{text:"操作",value:"operation",sortable:!1}],desserts_patient:[{patient_record_id:1,patient_name:"shu"}],headers_ms:[{text:"医技id",align:"left",value:"medical_skill_id"},{text:"医技状态",value:"medical_skill_execute_state"},{text:"医技状态",value:"medical_skill_name"},{text:"医技结果",value:"medical_skill_result"},{text:"操作",value:"operation",sortable:!1}],desserts_ms:[{medical_skill_id:1,medical_skill_execute_state:"验血",medical_skill_result:"正常"}],department_name_default:""}},methods:{filterDepart:function(e){return e.medical_skill_type===this.type_default},load_dept_name:function(){var e=this,t=this.HOME+"/maintenance/department/get";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{department_id:e.$store.state.user.department_id}).then(function(t){console.log(t.data),e.department_name_default=t.data.data.department_name,e.load()})},load:function(){var e=this,t=this.HOME+"/ms-doctor/get-all-patients";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{medical_skill_execute_department:e.department_name_default,medical_skill_type:e.type_default}).then(function(t){console.log(t.data),e.desserts_patient=t.data.data})},getPersonalMS:function(e){this.ms_patient_id=e.patient_record_id;var t=this,i=this.HOME+"/ms-doctor/medical-skill/get-by-patient";this.$http.post(i+"?token="+sessionStorage.getItem("token"),{medical_skill_execute_department:t.department_name_default,patient_id:e.patient_record_id}).then(function(e){console.log(e.data),t.desserts_ms=e.data.data})},setResult:function(){var e=this,t=this.HOME+"/ms-doctor/medical-skill/add-result";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{medical_skill_id:e.ms_id,medical_skill_result:e.result}).then(function(t){console.log(t.data),e.load();var i={patient_record_id:e.ms_patient_id};e.getPersonalMS(i)})},confirmState:function(){var e=this,t=this.HOME+"/ms-doctor/medical-skill/confirm";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{medical_skill_id:e.ms_id,medical_skill_execute_doctor_id:e.$store.state.user.id}).then(function(t){console.log(t.data),e.load();var i={patient_record_id:e.ms_patient_id};e.getPersonalMS(i)})},cancelState:function(){var e=this,t=this.HOME+"/ms-doctor/medical-skill/cancel";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{medical_skill_id:e.ms_id,medical_skill_execute_doctor_id:e.$store.state.user.id}).then(function(t){console.log(t.data),e.load();var i={patient_record_id:e.ms_patient_id};e.getPersonalMS(i)})},change:function(){this.state!==this.ms_item.medical_skill_execute_state&&("已确认执行"===this.state&&this.confirmState(),"已取消执行"===this.state&&this.cancelState()),this.result!==this.ms_item.medical_skill_result&&this.setResult(),this.show=!this.show},eraseForm:function(){this.ms_id="",this.result="",this.state="",this.ms_item=""},fillForm:function(e){this.ms_item=e,this.ms_id=e.medical_skill_id,this.result=e.medical_skill_result,this.state=e.medical_skill_execute_state}},mounted:function(){this.load_dept_name()},watch:{show:function(e,t){!1===e&&this.eraseForm()}}},le={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-dialog",{attrs:{width:"300"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("v-layout",{attrs:{"justify-center":""}},[i("v-flex",{attrs:{xs12:""}},[i("v-card",{ref:"form"},[i("v-card-text",[i("v-text-field",{ref:"name",attrs:{"error-messages":e.errorMessages,label:"医技ID",placeholder:"请输入医技ID",disabled:!0,required:""},model:{value:e.ms_id,callback:function(t){e.ms_id=t},expression:"ms_id"}}),e._v(" "),i("v-select",{ref:"country",attrs:{items:e.state_items,label:"医技状态",placeholder:"请输入医技状态",required:""},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}}),e._v(" "),i("v-text-field",{ref:"country",attrs:{label:"医技结果",placeholder:"请输入医技结果",required:""},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}})],1),e._v(" "),i("v-card-actions",[i("v-btn",{attrs:{flat:""},on:{click:function(t){e.show=!e.show}}},[e._v("取消")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.change}},[e._v("确定")])],1)],1)],1)],1)],1),e._v(" "),i("v-layout",[i("v-flex",{attrs:{xs4:""}},[i("v-card",{attrs:{flat:""}},[i("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v("患者查询")])],1),e._v(" "),i("v-layout",[i("v-text-field",{staticStyle:{"margin-left":"10px"},attrs:{"append-icon":"search",label:"病历号","single-line":"","hide-details":""},model:{value:e.search_patient,callback:function(t){e.search_patient=t},expression:"search_patient"}}),e._v(" "),i("v-btn",{staticStyle:{"margin-top":"10px"},attrs:{color:"primary"}},[e._v("\n              搜索\n            ")])],1)],1)],1),e._v(" "),i("v-card",{attrs:{flat:""}},[i("v-card-title",[e._v("患者收费列表")]),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers_patient,items:e.desserts_patient,search:e.search_patient},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.patient_record_id))]),e._v(" "),i("td",[e._v(e._s(t.item.patient_name))]),e._v(" "),i("td",[i("v-btn",{attrs:{right:"",small:"",icon:"",flat:"",color:"primary"},on:{click:function(i){return e.getPersonalMS(t.item)}}},[i("v-icon",[e._v("check_circle")])],1)],1)]}}])})],1)],1),e._v(" "),i("v-divider",{attrs:{vertical:""}}),e._v(" "),i("v-flex",[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v("检验项目")])],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers_ms,items:e.desserts_ms.filter(e.filterDepart)},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.medical_skill_id))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_execute_state))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_name))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_result))]),e._v(" "),i("td",[i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(i){e.show=!e.show,e.fillForm(t.item)}}},[e._v("\n              edit\n            ")])],1)]}}])})],1)],1)],1)},staticRenderFns:[]};var oe={data:function(){return{ms_item:"",ms_patient_id:"",show:!1,type_default:"检查",search_patient:"",state:"",ms_id:"",result:"",signal:"",state_items:[{text:"已取消执行"},{text:"已确认执行"}],headers_patient:[{text:"病人id",align:"left",value:"patient_record_id"},{text:"病人姓名",value:"patient_name"},{text:"操作",value:"operation",sortable:!1}],desserts_patient:[{patient_record_id:1,patient_name:"shu"}],headers_ms:[{text:"医技id",align:"left",value:"medical_skill_id"},{text:"医技状态",value:"medical_skill_execute_state"},{text:"医技状态",value:"medical_skill_name"},{text:"医技结果",value:"medical_skill_result"},{text:"操作",value:"operation",sortable:!1}],desserts_ms:[{medical_skill_id:1,medical_skill_execute_state:"验血",medical_skill_result:"正常"}],department_name_default:""}},methods:{filterDepart:function(e){return e.medical_skill_type===this.type_default},load_dept_name:function(){var e=this,t=this.HOME+"/maintenance/department/get";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{department_id:e.$store.state.user.department_id}).then(function(t){console.log(t.data),e.department_name_default=t.data.data.department_name,e.load()})},load:function(){var e=this,t=this.HOME+"/ms-doctor/get-all-patients";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{medical_skill_execute_department:e.department_name_default,medical_skill_type:e.type_default}).then(function(t){console.log(t.data),e.desserts_patient=t.data.data})},getPersonalMS:function(e){this.ms_patient_id=e.patient_record_id;var t=this,i=this.HOME+"/ms-doctor/medical-skill/get-by-patient";this.$http.post(i+"?token="+sessionStorage.getItem("token"),{medical_skill_execute_department:t.department_name_default,patient_id:e.patient_record_id}).then(function(e){console.log(e.data),t.desserts_ms=e.data.data})},setResult:function(){var e=this,t=this.HOME+"/ms-doctor/medical-skill/add-result";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{medical_skill_id:e.ms_id,medical_skill_result:e.result}).then(function(t){console.log(t.data),e.load();var i={patient_record_id:e.ms_patient_id};e.getPersonalMS(i)})},confirmState:function(){var e=this,t=this.HOME+"/ms-doctor/medical-skill/confirm";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{medical_skill_id:e.ms_id,medical_skill_execute_doctor_id:e.$store.state.user.id}).then(function(t){console.log(t.data),e.load();var i={patient_record_id:e.ms_patient_id};e.getPersonalMS(i)})},cancelState:function(){var e=this,t=this.HOME+"/ms-doctor/medical-skill/cancel";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{medical_skill_id:e.ms_id,medical_skill_execute_doctor_id:e.$store.state.user.id}).then(function(t){console.log(t.data),e.load();var i={patient_record_id:e.ms_patient_id};e.getPersonalMS(i)})},change:function(){this.state!==this.ms_item.medical_skill_execute_state&&("已确认执行"===this.state&&this.confirmState(),"已取消执行"===this.state&&this.cancelState()),this.result!==this.ms_item.medical_skill_result&&this.setResult(),this.show=!this.show},eraseForm:function(){this.ms_id="",this.result="",this.state="",this.ms_item=""},fillForm:function(e){this.ms_item=e,this.ms_id=e.medical_skill_id,this.result=e.medical_skill_result,this.state=e.medical_skill_execute_state}},mounted:function(){this.load_dept_name()},watch:{show:function(e,t){!1===e&&this.eraseForm()}}},ce={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-dialog",{attrs:{width:"300"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("v-layout",{attrs:{"justify-center":""}},[i("v-flex",{attrs:{xs12:""}},[i("v-card",{ref:"form"},[i("v-card-text",[i("v-text-field",{ref:"name",attrs:{"error-messages":e.errorMessages,label:"医技ID",placeholder:"请输入医技ID",disabled:!0,required:""},model:{value:e.ms_id,callback:function(t){e.ms_id=t},expression:"ms_id"}}),e._v(" "),i("v-select",{ref:"country",attrs:{items:e.state_items,label:"医技状态",placeholder:"请输入医技状态",required:""},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}}),e._v(" "),i("v-text-field",{ref:"country",attrs:{label:"医技结果",placeholder:"请输入医技结果",required:""},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}})],1),e._v(" "),i("v-card-actions",[i("v-btn",{attrs:{flat:""},on:{click:function(t){e.show=!e.show}}},[e._v("取消")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.change}},[e._v("确定")])],1)],1)],1)],1)],1),e._v(" "),i("v-layout",[i("v-flex",{attrs:{xs4:""}},[i("v-card",{attrs:{flat:""}},[i("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v("患者查询")])],1),e._v(" "),i("v-layout",[i("v-text-field",{staticStyle:{"margin-left":"10px"},attrs:{"append-icon":"search",label:"病历号","single-line":"","hide-details":""},model:{value:e.search_patient,callback:function(t){e.search_patient=t},expression:"search_patient"}}),e._v(" "),i("v-btn",{staticStyle:{"margin-top":"10px"},attrs:{color:"primary"}},[e._v("\n              搜索\n            ")])],1)],1)],1),e._v(" "),i("v-card",{attrs:{flat:""}},[i("v-card-title",[e._v("患者收费列表")]),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers_patient,items:e.desserts_patient,search:e.search_patient},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.patient_record_id))]),e._v(" "),i("td",[e._v(e._s(t.item.patient_name))]),e._v(" "),i("td",[i("v-btn",{attrs:{right:"",small:"",icon:"",flat:"",color:"primary"},on:{click:function(i){return e.getPersonalMS(t.item)}}},[i("v-icon",[e._v("check_circle")])],1)],1)]}}])})],1)],1),e._v(" "),i("v-divider",{attrs:{vertical:""}}),e._v(" "),i("v-flex",[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v("检验项目")])],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers_ms,items:e.desserts_ms.filter(e.filterDepart)},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.medical_skill_id))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_execute_state))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_name))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_result))]),e._v(" "),i("td",[i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(i){e.show=!e.show,e.fillForm(t.item)}}},[e._v("\n              edit\n            ")])],1)]}}])})],1)],1)],1)},staticRenderFns:[]};var de={data:function(){return{alert_success:!1,alert_error:!1,mode:!0,medical_skill_content_id:"",medical_skill_content_name:"",medical_skill_content_detail:"",medical_skill_content_father:"",medical_skill_content_extra:"",medical_skill_content_unit:"",medical_skill_content_price:"",medical_skill_content_explain:"",medical_skill_content_department_id:"",show:!1,search:"",expand:!1,selected:[],signal:"",headers:[{text:"医技项目编号",align:"left",value:"medical_skill_content_id"},{text:"医技项目名称",value:"medical_skill_content_name"},{text:"医技项目内涵",value:"medical_skill_content_detail"},{text:"医技项目父级编码",value:"medical_skill_content_father"},{text:"医技项目除外内容",value:"medical_skill_content_extra"},{text:"医技项目计价单位",value:"medical_skill_content_unit"},{text:"医技项目单价",value:"medical_skill_content_price"},{text:"医技项目说明",value:"medical_skill_content_explain"},{text:"医技项目科室ID",value:"medical_skill_content_department_id"},{text:"操作",value:"operation",sortable:!1}],desserts:[]}},methods:{load:function(){var e=this,t=this.HOME+"/maintenance/medical-skill-content/get-all";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{}).then(function(t){console.log(t.data),e.desserts=t.data.data})},deleteItem:function(e){var t=this,i=this.HOME+"/maintenance/medical-skill-content/delete";this.$http.post(i+"?token="+sessionStorage.getItem("token"),{medical_skill_content_id:e.medical_skill_content_id}).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.load(),t.notice_success()):t.notice_error()}),console.log(this.signal)},addItem:function(){var e={medical_skill_content_id:this.medical_skill_content_id,medical_skill_content_name:this.medical_skill_content_name,medical_skill_content_detail:this.medical_skill_content_detail,medical_skill_content_father:this.medical_skill_content_father,medical_skill_content_extra:this.medical_skill_content_extra,medical_skill_content_unit:this.medical_skill_content_unit,medical_skill_content_price:this.medical_skill_content_price,medical_skill_content_explain:this.medical_skill_content_explain,medical_skill_content_department_id:this.medical_skill_content_department_id},t=this,i=this.HOME+"/maintenance/medical-skill-content/add";this.$http.post(i+"?token="+sessionStorage.getItem("token"),e).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.load(),t.show=!t.show,t.notice_success()):t.notice_error()}),console.log(this.signal)},updateItem:function(){var e={medical_skill_content_id:this.medical_skill_content_id,medical_skill_content_name:this.medical_skill_content_name,medical_skill_content_detail:this.medical_skill_content_detail,medical_skill_content_father:this.medical_skill_content_father,medical_skill_content_extra:this.medical_skill_content_extra,medical_skill_content_unit:this.medical_skill_content_unit,medical_skill_content_price:this.medical_skill_content_price,medical_skill_content_explain:this.medical_skill_content_explain,medical_skill_content_department_id:this.medical_skill_content_department_id},t=this,i=this.HOME+"/maintenance/medical-skill-content/update";this.$http.post(i+"?token="+sessionStorage.getItem("token"),e).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.load(),t.show=!t.show,t.eraseForm(),t.notice_success()):t.notice_error()}),console.log(this.signal)},fillForm:function(e){this.medical_skill_content_id=e.medical_skill_content_id,this.medical_skill_content_name=e.medical_skill_content_name,this.medical_skill_content_detail=e.medical_skill_content_detail,this.medical_skill_content_father=e.medical_skill_content_father,this.medical_skill_content_extra=e.medical_skill_content_extra,this.medical_skill_content_unit=e.medical_skill_content_unit,this.medical_skill_content_price=e.medical_skill_content_price,this.medical_skill_content_explain=e.medical_skill_content_explain,this.medical_skill_content_department_id=e.medical_skill_content_department_id},eraseForm:function(){this.medical_skill_content_id="",this.medical_skill_content_name="",this.medical_skill_content_detail="",this.medical_skill_content_father="",this.medical_skill_content_extra="",this.medical_skill_content_unit="",this.medical_skill_content_price="",this.medical_skill_content_explain="",this.medical_skill_content_department_id=""},notice_success:function(){this.change_success(),window.setTimeout(this.change_success,1500)},change_success:function(){this.alert_success=!this.alert_success},notice_error:function(){this.change_error(),window.setTimeout(this.change_error,1500)},change_error:function(){this.alert_error=!this.alert_error},delete_selected:function(){for(var e=this,t=function(t){a={medical_skill_content_id:e.selected[t].medical_skill_content_id};var i=e;s=e.HOME+"/maintenance/medical-skill-content/delete",e.$http.post(s+"?token="+sessionStorage.getItem("token"),{medical_skill_content_id:a.medical_skill_content_id}).then(function(e){console.log(e.data),i.signal=e.data.msg,"SUCCESS"===i.signal&&(i.load(),1)})},i=0;i<this.selected.length;i++){var a,s;t(i)}this.count===this.length?this.notice_success():this.notice_error()}},mounted:function(){this.load()},computed:{},watch:{show:function(e,t){!1===e&&this.eraseForm()}}},_e={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",[i("v-dialog",{attrs:{width:"300"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("v-layout",{attrs:{"justify-center":""}},[i("v-flex",{attrs:{xs12:""}},[i("v-card",{ref:"form"},[i("v-card-text",[i("v-text-field",{ref:"name",attrs:{"error-messages":e.errorMessages,label:"医技项目编号",placeholder:"请输入医技项目编号",disabled:!e.mode,required:""},model:{value:e.medical_skill_content_id,callback:function(t){e.medical_skill_content_id=t},expression:"medical_skill_content_id"}}),e._v(" "),i("v-text-field",{ref:"address",attrs:{label:"医技项目名称",placeholder:"请输入医技项目名称",required:""},model:{value:e.medical_skill_content_name,callback:function(t){e.medical_skill_content_name=t},expression:"medical_skill_content_name"}}),e._v(" "),i("v-text-field",{ref:"city",attrs:{label:"医技项目内涵",placeholder:"请输入医技项目内涵",required:""},model:{value:e.medical_skill_content_detail,callback:function(t){e.medical_skill_content_detail=t},expression:"medical_skill_content_detail"}}),e._v(" "),i("v-text-field",{ref:"country",attrs:{label:"医技项目父级编码",placeholder:"请输入医技项目父级编码",required:""},model:{value:e.medical_skill_content_father,callback:function(t){e.medical_skill_content_father=t},expression:"medical_skill_content_father"}}),e._v(" "),i("v-text-field",{ref:"country",attrs:{label:"医技项目除外内容",placeholder:"请输入医技项目除外内容",required:""},model:{value:e.medical_skill_content_extra,callback:function(t){e.medical_skill_content_extra=t},expression:"medical_skill_content_extra"}}),e._v(" "),i("v-text-field",{ref:"country",attrs:{label:"医技项目计价单位",placeholder:"请输入医技项目计价单位",required:""},model:{value:e.medical_skill_content_unit,callback:function(t){e.medical_skill_content_unit=t},expression:"medical_skill_content_unit"}}),e._v(" "),i("v-text-field",{ref:"country",attrs:{label:"医技项目单价",placeholder:"请输入医技项目单价",required:""},model:{value:e.medical_skill_content_price,callback:function(t){e.medical_skill_content_price=t},expression:"medical_skill_content_price"}}),e._v(" "),i("v-text-field",{ref:"country",attrs:{label:"医技项目说明",placeholder:"请输入医技项目说明",required:""},model:{value:e.medical_skill_content_explain,callback:function(t){e.medical_skill_content_explain=t},expression:"medical_skill_content_explain"}}),e._v(" "),i("v-text-field",{ref:"country",attrs:{label:"医技项目科室ID",placeholder:"请输入医技项目科室ID",required:""},model:{value:e.medical_skill_content_department_id,callback:function(t){e.medical_skill_content_department_id=t},expression:"medical_skill_content_department_id"}})],1),e._v(" "),i("v-card-actions",[i("v-btn",{attrs:{flat:""},on:{click:function(t){e.show=!e.show}}},[e._v("取消")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-slide-x-reverse-transition",[e.formHasErrors?i("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[i("v-btn",e._g({staticClass:"my-0",attrs:{icon:""},on:{click:e.resetForm}},a),[i("v-icon",[e._v("refresh")])],1)]}}],null,!1,510568536)},[e._v(" "),i("span",[e._v("Refresh form")])]):e._e()],1),e._v(" "),e.mode?i("div",[i("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.addItem}},[e._v("确定")])],1):i("div",[i("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.updateItem}},[e._v("确定")])],1)],1)],1)],1)],1)],1),e._v(" "),i("v-alert",{attrs:{value:e.alert_success,type:"success",transition:"slide-y-transition"}},[e._v("\n    This is a success alert.\n  ")]),e._v(" "),i("v-alert",{attrs:{value:e.alert_error,type:"error",transition:"slide-y-transition"}},[e._v("\n    This is a error alert.\n  ")]),e._v(" "),i("v-flex",[i("v-toolbar",{attrs:{flat:""}},[i("v-flex",{attrs:{xs3:""}},[i("v-text-field",{attrs:{"prepend-inner-icon":"search",rules:e.nameRules,label:"编号/名称",required:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:function(t){e.show=!e.show,e.mode=!0}}},[i("v-icon",[e._v("\n          add\n        ")])],1),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:function(t){return e.delete_selected()}}},[i("v-icon",[e._v("\n          delete\n        ")])],1)],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.desserts,search:e.search,"item-key":"medical_skill_content_id","select-all":""},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_id))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_name))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_detail))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_father))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_extra))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_unit))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_price))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_explain))]),e._v(" "),i("td",[e._v(e._s(t.item.medical_skill_content_department_id))]),e._v(" "),i("td",[i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(i){e.show=!e.show,e.mode=!1,e.fillForm(t.item)}}},[e._v("\n            edit\n          ")]),e._v(" "),i("v-icon",{attrs:{small:""},on:{click:function(i){return e.deleteItem(t.item)}}},[e._v("\n            delete\n          ")])],1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1)},staticRenderFns:[]};var me={name:"Meditech",components:{dispose:i("VU/8")(se,ne,!1,function(e){i("BeTt")},"data-v-16fc6396",null).exports,check:i("VU/8")(re,le,!1,function(e){i("GDVW")},"data-v-833706f2",null).exports,inspect:i("VU/8")(oe,ce,!1,function(e){i("qU1j")},"data-v-44fd16ca",null).exports,itemManage:i("VU/8")(de,_e,!1,function(e){i("mnnv")},"data-v-3402d4a0",null).exports},data:function(){return{active:null,items:[{name:"患者检查",id:"inspect"},{name:"患者检验",id:"check"},{name:"患者处置",id:"dispose"},{name:"医技管理",id:"itemManage"}]}},mounted:function(){this.Check()},methods:{Check:function(){var e=window.localStorage;if("医技医生"===e.getItem("type")){var t={account:e.getItem("account"),department_id:e.getItem("department_id"),id:e.getItem("id"),name:e.getItem("name"),type:e.getItem("type")};this.$store.commit("set_user",t),this.$store.commit("login")}this.$store.state.isLogin&&"医技医生"===this.$store.state.user.type?this.$router.push("/Meditech"):this.$router.push("/login")}}},ve={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-tabs",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[e._l(e.items,function(t){return i("v-tab",{key:t,attrs:{ripple:""}},[e._v("\n      "+e._s(t.name)+"\n    ")])}),e._v(" "),e._l(e.items,function(t){return i("v-tab-item",{key:t},[i("v-card",{attrs:{flat:""}},["inspect"==t.id?i("div",[i("inspect")],1):e._e(),e._v(" "),"check"==t.id?i("div",[i("check")],1):e._e(),e._v(" "),"dispose"==t.id?i("div",[i("dispose")],1):e._e(),e._v(" "),"itemManage"==t.id?i("div",[i("itemManage")],1):e._e()])],1)})],2)],1)},staticRenderFns:[]};var pe=i("VU/8")(me,ve,!1,function(e){i("99YD")},"data-v-276c0084",null).exports,ue={data:function(){return{return_show:!1,refund_num:"",medicine:"",num_available:[],selected_prescriptionContent:"",desserts_prescriptionContent:[],mode_refund:!1,date:["",""],md_item:"",md_patient_id:"",show:!1,search_patient:"",state:"",md_id:"",result:"",signal:"",state_items:[{text:"已取消执行"},{text:"已确认执行"}],headers_prescriptionContent:[{text:"处方id",align:"left",value:"prescription_id"},{text:"处方内容id",value:"prescription_content_id"},{text:"处方药品id",value:"prescription_medicine_id"},{text:"可退药数量",value:"prescription_refund_available_num"},{text:"操作",value:"operation",sortable:!1}],headers_patient:[{text:"病人id",align:"left",value:"patient_record_id"},{text:"病人姓名",value:"patient_name"},{text:"操作",value:"operation",sortable:!1}],desserts_patient:[{patient_record_id:1,patient_name:"shu"}],headers_md:[{text:"处方id",align:"left",value:"prescription_id"},{text:"处方名称",value:"prescription_name"},{text:"处方状态",value:"prescription_execute_state"},{text:"处方类型",value:"prescription_type"},{text:"费用",value:"prescription_fee"},{text:"操作",value:"operation",sortable:!1}],desserts_md:[{prescription_id:1,prescription_name:"这是处方",prescription_execute_state:"已缴费",prescription_type:"中药",prescription_fee:"25.00"}]}},mounted:function(){this.load()},methods:{returnMedicine:function(e){var t=this,i=this.HOME+"/md-doctor/return-medicine";this.$http.post(i+"?token="+sessionStorage.getItem("token"),{prescription_id:e.prescription_id,prescription_content_id:e.prescription_content_id,prescription_num:t.refund_num}).then(function(i){console.log(i.data),t.getContent(e),t.getSentPre({patient_record_id:t.md_patient_id}),t.show=!t.show})},getNumAvailable:function(e){for(var t=[],i=1;i<=e;i++)t.push(i);return t},load:function(){var e=this,t=this.HOME+"/md-doctor/get-all-patients";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{}).then(function(t){console.log(t.data),e.desserts_patient=t.data.data})},getPayPre:function(e){this.md_patient_id=e.patient_record_id;var t=this,i=this.HOME+"/md-doctor/get-prescription-by-patient";this.$http.post(i+"?token="+sessionStorage.getItem("token"),{register_info_patient_id:e.patient_record_id,start_time:t.date[0],end_time:t.date[1]}).then(function(e){console.log(e.data),t.desserts_md=e.data.data})},getSentPre:function(e){this.md_patient_id=e.patient_record_id;var t=this,i=this.HOME+"/md-doctor/get-sent-prescription";this.$http.post(i+"?token="+sessionStorage.getItem("token"),{patient_id:e.patient_record_id,start_time:t.date[0],end_time:t.date[1]}).then(function(e){console.log(e.data),t.desserts_md=e.data.data})},sendMedicine:function(e){var t=this,i=this.HOME+"/md-doctor/send-medicine";this.$http.post(i+"?token="+sessionStorage.getItem("token"),{prescription_id:e.prescription_id,prescription_execute_doctor_id:t.$store.state.user.id}).then(function(e){console.log(e.data);var i={patient_record_id:t.md_patient_id};t.getPayPre(i)})},getContent:function(e){var t=this,i=this.HOME+"/md-doctor/get-prescription-contents";this.$http.post(i+"?token="+sessionStorage.getItem("token"),{prescription_id:e.prescription_id}).then(function(e){console.log(e.data),t.desserts_prescriptionContent=e.data.data})},eraseForm:function(){this.md_id="",this.result="",this.state="",this.md_item=""},fillForm:function(e){this.md_item=e,this.md_id=e.medical_skill_id,this.result=e.medical_skill_result,this.state=e.medical_skill_execute_state}},watch:{show:function(e,t){!1===e&&this.eraseForm()}}},he={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-dialog",{model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("v-card",[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[e._v("退药")]),e._v(" "),i("v-spacer")],1),e._v(" "),i("v-data-table",{staticClass:"scroll-y",attrs:{headers:e.headers_prescriptionContent,items:e.desserts_prescriptionContent,"item-key":"prescription_content_id","select-all":"","hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.prescription_id))]),e._v(" "),i("td",[e._v(e._s(t.item.prescription_content_id))]),e._v(" "),i("td",[e._v(e._s(t.item.prescription_medicine_id))]),e._v(" "),i("td",[e._v(e._s(t.item.prescription_refund_available_num))]),e._v(" "),i("td",[i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(i){e.medicine=t.item,e.return_show=!e.return_show}}},[e._v("\n              edit\n            ")])],1)]}}]),model:{value:e.selected_prescriptionContent,callback:function(t){e.selected_prescriptionContent=t},expression:"selected_prescriptionContent"}}),e._v(" "),i("v-divider"),e._v(" "),i("v-card-actions",[i("v-layout",{attrs:{"align-center":"","justify-center":"",row:"","fill-height":""}})],1)],1)],1),e._v(" "),i("v-dialog",{attrs:{"max-width":"300"},model:{value:e.return_show,callback:function(t){e.return_show=t},expression:"return_show"}},[i("v-card",{ref:"form"},[i("v-card-text",[i("v-select",{attrs:{items:e.getNumAvailable(e.medicine.prescription_refund_available_num),label:"数量",required:""},model:{value:e.refund_num,callback:function(t){e.refund_num=t},expression:"refund_num"}})],1),e._v(" "),i("v-divider",{staticClass:"mt-2"}),e._v(" "),i("v-card-actions",[i("v-btn",{attrs:{flat:""},on:{click:function(t){e.return_show=!e.return_show}}},[e._v("取消")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){e.returnMedicine(e.medicine),e.return_show=!e.return_show}}},[e._v("确定")])],1)],1)],1),e._v(" "),i("v-layout",[i("v-flex",{attrs:{xs4:""}},[i("v-card",{attrs:{flat:""}},[i("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v("患者查询")])],1),e._v(" "),i("v-layout",[i("v-text-field",{staticStyle:{"margin-left":"10px"},attrs:{"append-icon":"search",label:"病历号","single-line":"","hide-details":""},model:{value:e.search_patient,callback:function(t){e.search_patient=t},expression:"search_patient"}}),e._v(" "),i("v-btn",{staticStyle:{"margin-top":"10px"},attrs:{color:"primary"}},[e._v("\n              搜索\n            ")])],1)],1)],1),e._v(" "),i("v-card",{attrs:{flat:""}},[i("v-card-title",[e._v("患者收费列表")]),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers_patient,items:e.desserts_patient,search:e.search_patient},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.patient_record_id))]),e._v(" "),i("td",[e._v(e._s(t.item.patient_name))]),e._v(" "),i("td",[i("v-btn",{attrs:{right:"",small:"",icon:"",flat:"",color:"primary"},on:{click:function(i){e.mode_refund=!1,e.getPayPre(t.item)}}},[e._v("\n                领药\n              ")]),e._v(" "),i("v-btn",{attrs:{right:"",small:"",icon:"",flat:"",color:"primary"},on:{click:function(i){e.mode_refund=!0,e.getSentPre(t.item)}}},[e._v("\n                退药\n              ")])],1)]}}])})],1)],1),e._v(" "),i("v-divider",{attrs:{vertical:""}}),e._v(" "),i("v-flex",[i("v-toolbar",{attrs:{flat:"",dense:""}},[i("v-toolbar-title",[e._v("检验项目")])],1),e._v(" "),i("v-data-table",{attrs:{headers:e.headers_md,items:e.desserts_md},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.prescription_id))]),e._v(" "),i("td",[e._v(e._s(t.item.prescription_name))]),e._v(" "),i("td",[e._v(e._s(t.item.prescription_execute_state))]),e._v(" "),i("td",[e._v(e._s(t.item.prescription_type))]),e._v(" "),i("td",[e._v(e._s(t.item.prescription_fee))]),e._v(" "),i("td",[e.mode_refund?i("div",[i("v-btn",{attrs:{right:"",small:"",color:"primary"},on:{click:function(i){e.show=!e.show,e.getContent(t.item)}}},[e._v("\n                退药\n              ")])],1):i("div",[i("v-btn",{attrs:{right:"",small:"",color:"primary"},on:{click:function(i){return e.sendMedicine(t.item)}}},[e._v("\n                领药\n              ")])],1)])]}}])}),e._v(" "),i("v-divider"),e._v(" "),i("v-card-actions",[i("v-spacer"),e._v(" "),i("el-date-picker",{staticStyle:{"margin-right":"10px"},attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),e._v(" "),i("v-btn",{attrs:{color:"primary"},on:{click:function(e){}}},[e._v("选定时间")])],1),e._v(" "),i("v-divider")],1)],1)],1)},staticRenderFns:[]};var fe={data:function(){return{alert_success:!1,alert_error:!1,mode:!0,medicine_id:"",medicine_name:"",medicine_usage:"",medicine_specifications:"",medicine_unit:"",medicine_factory:"",medicine_formulation:"",medicine_type:"",medicine_unit_price:"",medicine_pinyin:"",show:!1,search:"",expand:!1,selected:[],signal:"",headers:[{text:"药品编号",align:"left",value:"medicine_id"},{text:"药品名称",value:"medicine_name"},{text:"药品用法",value:"medicine_usage"},{text:"药品规格",value:"medicine_specifications"},{text:"药品单位",value:"medicine_unit"},{text:"药品厂家",value:"medicine_factory"},{text:"药品剂型",value:"medicine_formulation"},{text:"药品类型",value:"medicine_type"},{text:"药品单价",value:"medicine_unit_price"},{text:"药品拼音码",value:"medicine_pinyin"},{text:"操作",value:"operation",sortable:!1}],desserts:[]}},methods:{load:function(){var e=this,t=this.HOME+"/maintenance/medicine/get-all";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{}).then(function(t){console.log(t.data),e.desserts=t.data.data})},deleteItem:function(e){var t=this,i=this.HOME+"/maintenance/medicine/delete";this.$http.post(i+"?token="+sessionStorage.getItem("token"),{medicine_id:e.medicine_id}).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.load(),t.notice_success()):t.notice_error()}),console.log(this.signal)},addItem:function(){var e={medicine_id:this.medicine_id,medicine_name:this.medicine_name,medicine_usage:this.medicine_usage,medicine_specifications:this.medicine_specifications,medicine_unit:this.medicine_unit,medicine_factory:this.medicine_factory,medicine_formulation:this.medicine_formulation,medicine_type:this.medicine_type,medicine_unit_price:this.medicine_unit_price,medicine_pinyin:this.medicine_pinyin},t=this,i=this.HOME+"/maintenance/medicine/add";this.$http.post(i+"?token="+sessionStorage.getItem("token"),e).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.load(),t.show=!t.show,t.notice_success()):t.notice_error()}),console.log(this.signal)},updateItem:function(){var e={medicine_id:this.medicine_id,medicine_name:this.medicine_name,medicine_usage:this.medicine_usage,medicine_specifications:this.medicine_specifications,medicine_unit:this.medicine_unit,medicine_factory:this.medicine_factory,medicine_formulation:this.medicine_formulation,medicine_type:this.medicine_type,medicine_unit_price:this.medicine_unit_price,medicine_pinyin:this.medicine_pinyin},t=this,i=this.HOME+"/maintenance/medicine/update";this.$http.post(i+"?token="+sessionStorage.getItem("token"),e).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.load(),t.show=!t.show,t.notice_success(),t.eraseForm()):t.notice_error()}),console.log(this.signal)},fillForm:function(e){this.medicine_id=e.medicine_id,this.medicine_name=e.medicine_name,this.medicine_usage=e.medicine_usage,this.medicine_specifications=e.medicine_specifications,this.medicine_unit=e.medicine_unit,this.medicine_factory=e.medicine_factory,this.medicine_formulation=e.medicine_formulation,this.medicine_type=e.medicine_type,this.medicine_unit_price=e.medicine_unit_price,this.medicine_pinyin=e.medicine_pinyin},eraseForm:function(){this.medicine_id="",this.medicine_name="",this.medicine_usage="",this.medicine_specifications="",this.medicine_unit="",this.medicine_factory="",this.medicine_formulation="",this.medicine_type="",this.medicine_unit_price="",this.medicine_pinyin=""},notice_success:function(){this.change_success(),window.setTimeout(this.change_success,1500)},change_success:function(){this.alert_success=!this.alert_success},notice_error:function(){this.change_error(),window.setTimeout(this.change_error,1500)},change_error:function(){this.alert_error=!this.alert_error},delete_selected:function(){for(var e=this,t=function(t){a={medicine_id:e.selected[t].medicine_id};var i=e;s=e.HOME+"/maintenance/medicine/delete",e.$http.post(s+"?token="+sessionStorage.getItem("token"),{medicine_id:a.medicine_id}).then(function(e){console.log(e.data),i.signal=e.data.msg,"SUCCESS"===i.signal&&(i.load(),1)})},i=0;i<this.selected.length;i++){var a,s;t(i)}this.count===this.length?this.notice_success():this.notice_error()}},mounted:function(){this.load()},computed:{},watch:{show:function(e,t){!1===e&&this.eraseForm()}}},ge={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",[i("v-dialog",{attrs:{width:"300"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("v-layout",{attrs:{"justify-center":""}},[i("v-flex",{attrs:{xs12:""}},[i("v-card",{ref:"form"},[i("v-card-text",[i("v-text-field",{ref:"name",attrs:{"error-messages":e.errorMessages,label:"药品编号",placeholder:"请输入药品编号",disabled:!e.mode,required:""},model:{value:e.medicine_id,callback:function(t){e.medicine_id=t},expression:"medicine_id"}}),e._v(" "),i("v-text-field",{ref:"address",attrs:{label:"药品名称",placeholder:"请输入药品名称",required:""},model:{value:e.medicine_name,callback:function(t){e.medicine_name=t},expression:"medicine_name"}}),e._v(" "),i("v-text-field",{ref:"city",attrs:{label:"药品用法",placeholder:"请输入药品用法",required:""},model:{value:e.medicine_usage,callback:function(t){e.medicine_usage=t},expression:"medicine_usage"}}),e._v(" "),i("v-text-field",{ref:"country",attrs:{label:"药品规格",placeholder:"请输入药品规格",required:""},model:{value:e.medicine_specifications,callback:function(t){e.medicine_specifications=t},expression:"medicine_specifications"}}),e._v(" "),i("v-text-field",{ref:"country",attrs:{label:"药品单位",placeholder:"请输入药品单位",required:""},model:{value:e.medicine_unit,callback:function(t){e.medicine_unit=t},expression:"medicine_unit"}}),e._v(" "),i("v-text-field",{ref:"country",attrs:{label:"药品厂家",placeholder:"请输入药品厂家",required:""},model:{value:e.medicine_factory,callback:function(t){e.medicine_factory=t},expression:"medicine_factory"}}),e._v(" "),i("v-text-field",{ref:"country",attrs:{label:"药品剂型",placeholder:"请输入药品剂型",required:""},model:{value:e.medicine_formulation,callback:function(t){e.medicine_formulation=t},expression:"medicine_formulation"}}),e._v(" "),i("v-text-field",{ref:"country",attrs:{label:"药品类型",placeholder:"请输入药品类型",required:""},model:{value:e.medicine_type,callback:function(t){e.medicine_type=t},expression:"medicine_type"}}),e._v(" "),i("v-text-field",{ref:"country",attrs:{label:"药品单价",placeholder:"请输入药品单价",required:""},model:{value:e.medicine_unit_price,callback:function(t){e.medicine_unit_price=t},expression:"medicine_unit_price"}}),e._v(" "),i("v-text-field",{ref:"country",attrs:{label:"药品拼音码",placeholder:"请输入药品拼音码",required:""},model:{value:e.medicine_pinyin,callback:function(t){e.medicine_pinyin=t},expression:"medicine_pinyin"}})],1),e._v(" "),i("v-card-actions",[i("v-btn",{attrs:{flat:""},on:{click:function(t){e.show=!e.show}}},[e._v("取消")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-slide-x-reverse-transition",[e.formHasErrors?i("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[i("v-btn",e._g({staticClass:"my-0",attrs:{icon:""},on:{click:e.resetForm}},a),[i("v-icon",[e._v("refresh")])],1)]}}],null,!1,510568536)},[e._v(" "),i("span",[e._v("Refresh form")])]):e._e()],1),e._v(" "),e.mode?i("div",[i("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.addItem}},[e._v("确定")])],1):i("div",[i("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.updateItem}},[e._v("确定")])],1)],1)],1)],1)],1)],1),e._v(" "),i("v-alert",{attrs:{value:e.alert_success,type:"success",transition:"slide-y-transition"}},[e._v("\n    This is a success alert.\n  ")]),e._v(" "),i("v-alert",{attrs:{value:e.alert_error,type:"error",transition:"slide-y-transition"}},[e._v("\n    This is a error alert.\n  ")]),e._v(" "),i("v-flex",[i("v-toolbar",{attrs:{flat:""}},[i("v-flex",{attrs:{xs3:""}},[i("v-text-field",{attrs:{"prepend-inner-icon":"search",rules:e.nameRules,label:"编号/名称",required:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:function(t){e.show=!e.show,e.mode=!0}}},[i("v-icon",[e._v("\n          add\n        ")])],1),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:e.delete_selected}},[i("v-icon",[e._v("\n          delete\n        ")])],1)],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.desserts,search:e.search,"item-key":"medicine_id","select-all":""},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.medicine_id))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine_name))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine_usage))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine_specifications))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine_unit))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine_factory))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine_formulation))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine_type))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine_unit_price))]),e._v(" "),i("td",[e._v(e._s(t.item.medicine_pinyin))]),e._v(" "),i("td",[i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(i){e.show=!e.show,e.mode=!1,e.fillForm(t.item)}}},[e._v("\n            edit\n          ")]),e._v(" "),i("v-icon",{attrs:{small:""},on:{click:function(i){return e.deleteItem(t.item)}}},[e._v("\n            delete\n          ")])],1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1)},staticRenderFns:[]};var ke={name:"Pharmacy",components:{medicine:i("VU/8")(ue,he,!1,function(e){i("PZPs")},"data-v-599babeb",null).exports,itemManage:i("VU/8")(fe,ge,!1,function(e){i("IqCW")},"data-v-e90ee28a",null).exports},data:function(){return{active:null,items:[{name:"门诊发药",id:"medicine"},{name:"药品管理",id:"itemManage"}]}},mounted:function(){this.Check()},methods:{Check:function(){var e=window.localStorage;if("药房操作员"===e.getItem("type")){var t={account:e.getItem("account"),department_id:e.getItem("department_id"),id:e.getItem("id"),name:e.getItem("name"),type:e.getItem("type")};this.$store.commit("set_user",t),this.$store.commit("login")}this.$store.state.isLogin&&"药房操作员"===this.$store.state.user.type?this.$router.push("/Pharmacy"):this.$router.push("/login")}}},xe={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-tabs",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[e._l(e.items,function(t){return i("v-tab",{key:t,attrs:{ripple:""}},[e._v("\n      "+e._s(t.name)+"\n    ")])}),e._v(" "),e._l(e.items,function(t){return i("v-tab-item",{key:t},[i("v-card",{attrs:{flat:""}},["medicine"==t.id?i("div",[i("medicine")],1):e._e(),e._v(" "),"itemManage"==t.id?i("div",[i("itemManage")],1):e._e()])],1)})],2)],1)},staticRenderFns:[]};var be=i("VU/8")(ke,xe,!1,function(e){i("+9Aa")},"data-v-94d0e484",null).exports,ye={data:function(){return{alert_success:!1,alert_error:!1,mode:!0,fee_cat_id:"",fee_cat_name:"",show:!1,search:"",expand:!1,selected:[],signal:"",headers:[{text:"费用科目编码",align:"left",value:"fee_cat_id"},{text:"费用科目名称",value:"fee_cat_name"},{text:"操作",value:"operation",sortable:!1}],desserts:[]}},methods:{load:function(){var e=this,t=this.HOME+"/maintenance/fee-cat/get-all";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{}).then(function(t){console.log(t.data),e.desserts=t.data.data})},deleteItem:function(e){var t=this,i=this.HOME+"/maintenance/fee-cat/delete";this.$http.post(i+"?token="+sessionStorage.getItem("token"),{fee_cat_id:e.fee_cat_id}).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.load(),t.notice_success()):t.notice_error()}),console.log(this.signal)},addItem:function(){var e={fee_cat_id:this.fee_cat_id,fee_cat_name:this.fee_cat_name},t=this,i=this.HOME+"/maintenance/fee-cat/add";this.$http.post(i+"?token="+sessionStorage.getItem("token"),e).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.load(),t.show=!t.show,t.notice_success()):t.notice_error()}),console.log(this.signal)},updateItem:function(){var e={fee_cat_id:this.fee_cat_id,fee_cat_name:this.fee_cat_name},t=this,i=this.HOME+"/maintenance/fee-cat/update";this.$http.post(i+"?token="+sessionStorage.getItem("token"),e).then(function(e){console.log(e.data),t.signal=e.data.msg,"SUCCESS"===t.signal?(t.load(),t.show=!t.show,t.eraseForm(),t.notice_success()):t.notice_error()}),console.log(this.signal)},fillForm:function(e){this.fee_cat_id=e.fee_cat_id,this.fee_cat_name=e.fee_cat_name},eraseForm:function(){this.fee_cat_id="",this.fee_cat_name=""},notice_success:function(){this.change_success(),window.setTimeout(this.change_success,1500)},change_success:function(){this.alert_success=!this.alert_success},notice_error:function(){this.change_error(),window.setTimeout(this.change_error,1500)},change_error:function(){this.alert_error=!this.alert_error},delete_selected:function(){for(var e=this,t=function(t){a={fee_cat_id:e.selected[t].fee_cat_id};var i=e;s=e.HOME+"/maintenance/fee-cat/delete",e.$http.post(s+"?token="+sessionStorage.getItem("token"),{fee_cat_id:a.fee_cat_id}).then(function(e){console.log(e.data),i.signal=e.data.msg,"SUCCESS"===i.signal&&(i.load(),1)})},i=0;i<this.selected.length;i++){var a,s;t(i)}this.count===this.length?this.notice_success():this.notice_error()}},mounted:function(){this.load()},computed:{},watch:{show:function(e,t){!1===e&&this.eraseForm()}}},we={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",[i("v-dialog",{attrs:{width:"300"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("v-layout",{attrs:{"justify-center":""}},[i("v-flex",{attrs:{xs12:""}},[i("v-card",{ref:"form"},[i("v-card-text",[i("v-text-field",{ref:"name",attrs:{"error-messages":e.errorMessages,label:"科室编号",placeholder:"请输入科室编号",disabled:!e.mode,required:""},model:{value:e.fee_cat_id,callback:function(t){e.fee_cat_id=t},expression:"fee_cat_id"}}),e._v(" "),i("v-text-field",{ref:"address",attrs:{label:"科室名称",placeholder:"请输入科室名称",required:""},model:{value:e.fee_cat_name,callback:function(t){e.fee_cat_name=t},expression:"fee_cat_name"}})],1),e._v(" "),i("v-card-actions",[i("v-btn",{attrs:{flat:""},on:{click:function(t){e.show=!e.show}}},[e._v("取消")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-slide-x-reverse-transition",[e.formHasErrors?i("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[i("v-btn",e._g({staticClass:"my-0",attrs:{icon:""},on:{click:e.resetForm}},a),[i("v-icon",[e._v("refresh")])],1)]}}],null,!1,510568536)},[e._v(" "),i("span",[e._v("Refresh form")])]):e._e()],1),e._v(" "),e.mode?i("div",[i("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.addItem}},[e._v("确定")])],1):i("div",[i("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.updateItem}},[e._v("确定")])],1)],1)],1)],1)],1)],1),e._v(" "),i("v-alert",{attrs:{value:e.alert_success,type:"success",transition:"slide-y-transition"}},[e._v("\n    This is a success alert.\n  ")]),e._v(" "),i("v-alert",{attrs:{value:e.alert_error,type:"error",transition:"slide-y-transition"}},[e._v("\n    This is a error alert.\n  ")]),e._v(" "),i("v-flex",[i("v-toolbar",{attrs:{flat:""}},[i("v-flex",{attrs:{xs3:""}},[i("v-text-field",{attrs:{"prepend-inner-icon":"search",rules:e.nameRules,label:"编号/名称",required:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:function(t){e.show=!e.show,e.mode=!0}}},[i("v-icon",[e._v("\n          add\n        ")])],1),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:function(t){return e.delete_selected()}}},[i("v-icon",[e._v("\n          delete\n        ")])],1)],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.desserts,search:e.search,"item-key":"fee_cat_id","select-all":""},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.fee_cat_id))]),e._v(" "),i("td",[e._v(e._s(t.item.fee_cat_name))]),e._v(" "),i("td",[i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(i){e.show=!e.show,e.mode=!1,e.fillForm(t.item)}}},[e._v("\n            edit\n          ")]),e._v(" "),i("v-icon",{attrs:{small:""},on:{click:function(i){return e.deleteItem(t.item)}}},[e._v("\n            delete\n          ")])],1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1)},staticRenderFns:[]};var Se=i("VU/8")(ye,we,!1,function(e){i("GGEP")},"data-v-17106190",null).exports,Ie={data:function(){return{allCashier:[],dialog:!1,cashier_user_object:"",date:["",""],expand_already:!1,dialog_err:!1,dialog_suc:!1,msg_suc:"success",msg_err:"error",expand_again:!1,expand_waste:!1,expand_complement:!1,expand_opposite:!1,bill_already:"15",bill_again:"2",bill_waste:"3",bill_complement:"5",bill_opposite:"6",time_range:"2019.8.1-2019.9.1",cashier:"shuwanyang",daily_mid_prescription_sum:"100",daily_west_prescription_sum:"150",daily_register_sum:"50",daily_ms_sum:"30",daily_sum:"200",headers_already:[{text:"发票id",align:"left",value:"bill_id"},{text:"发票类型",value:"bill_type"},{text:"发票状态",value:"bill_state"}],desserts_already:[{bill_id:1,bill_type:"已打",bill_num:123456}],headers_again:[],desserts_again:[],headers_waste:[],desserts_waste:[],headers_complement:[],desserts_complement:[],headers_opposite:[],desserts_opposite:[],daily:""}},watch:{dialog_suc:function(e){var t=this;e&&setTimeout(function(){return t.dialog_suc=!1},1e3)},dialog_err:function(e){var t=this;e&&setTimeout(function(){return t.dialog_err=!1},1e3)}},methods:{load:function(){this.cashier=this.cashier_user_object.user_name,console.log("This is the format of the date");var e=this,t=this.HOME+"/user-service/daily-get";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{daily_user_id:e.cashier_user_object.user_id,daily_start:e.date[0],daily_end:e.date[1],daily_pass_state:"已确认提交"}).then(function(t){console.log(t.data);var i=t.data.data;e.daily=i[i.length-1],e.date[0]=e.daily.daily_start,e.date[1]=e.daily.daily_end,e.time_range=e.date[0]+"-"+e.date[1],e.daily_mid_prescription_sum=e.daily.daily_mid_prescription_sum,e.daily_west_prescription_sum=e.daily.daily_west_prescription_sum,e.daily_register_sum=e.daily.daily_register_sum,e.daily_ms_sum=e.daily.daily_check_sum+e.daily.daily_examine_sum+e.daily.daily_handle_sum,e.daily_sum=e.daily_mid_prescription_sum+e.daily_west_prescription_sum+e.daily_register_sum+e.daily_ms_sum,e.load_bills()})},load_bills:function(){var e=this,t=this.HOME+"/user-service/daily-bill-get";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{daily_id:e.daily.daily_id}).then(function(t){console.log(t.data),e.daily=t.data.data,e.bill_already=e.daily.bills.length,e.desserts_already=e.daily.bills,e.bill_again=e.daily.redoBillList.length,e.desserts_again=e.daily.redoBillList,e.bill_complement=e.daily.overprintBillList.length,e.desserts_complement=e.daily.overprintBillList,e.bill_opposite=e.daily.flushBillList.length,e.desserts_opposite=e.daily.flushBillList,e.bill_waste=e.daily.abandonBillList.length,e.desserts_waste=e.daily.abandonBillList})},load_cashiers:function(){var e=this,t=this.HOME+"/user/get-all-cashier";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{}).then(function(t){console.log(t.data),e.allCashier=t.data.data})},pass_daily:function(){var e=this,t=this.HOME+"/user-service/daily-pass";this.$http.post(t+"?token="+sessionStorage.getItem("token"),{daily_id:e.daily.daily_id,daily_owner_id:e.$store.state.user.id}).then(function(t){200===t.data.code?(e.dialog_suc=!0,e.msg_suc="核对成功",console.log(t.data)):(e.dialog_err=!0,e.msg_err="核对失败")})}},mounted:function(){this.load_cashiers()}},Ce={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",{attrs:{flat:""}},[i("v-flex",{attrs:{shrink:""}},[i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialog_err,expression:"dialog_err"}],staticStyle:{"white-space":"nowrap"}},[i("v-alert",{attrs:{value:!0,type:"error"}},[e._v("\n          "+e._s(e.msg_err)+"\n        ")])],1)])],1),e._v(" "),i("v-flex",{attrs:{shrink:""}},[i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialog_suc,expression:"dialog_suc"}],staticStyle:{"white-space":"nowrap"}},[i("v-alert",{attrs:{value:!0,type:"success"}},[e._v("\n          "+e._s(e.msg_suc)+"\n        ")])],1)])],1),e._v(" "),i("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",{attrs:{color:"primary",dark:""}},[i("v-card-text",[e._v("\n        请稍等\n        "),i("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),i("v-toolbar",{attrs:{flat:""}},[i("v-layout",{attrs:{row:""}},[i("v-flex",{attrs:{xs2:""}},[i("v-select",{staticClass:"mr-4",attrs:{items:e.allCashier,label:"日结员","item-text":"user_name","item-value":"user_id","return-object":""},model:{value:e.cashier_user_object,callback:function(t){e.cashier_user_object=t},expression:"cashier_user_object"}})],1),e._v(" "),i("v-spacer"),e._v(" "),i("v-flex",[i("el-date-picker",{staticStyle:{"margin-top":"10px"},attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),e._v(" "),i("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[i("v-btn",e._g({attrs:{large:"",icon:"",flat:"",color:"primary"},on:{click:e.load}},a),[i("v-icon",[e._v("\n                  search\n                ")])],1)]}}])},[e._v(" "),i("span",[e._v("搜索日结信息")])])],1),e._v(" "),i("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[i("v-btn",e._g({staticStyle:{"margin-top":"15px"},attrs:{color:"primary"},on:{click:e.pass_daily}},a),[e._v("\n              核对通过\n            ")])]}}])},[e._v(" "),i("span",[e._v("核对通过")])])],1)],1),e._v(" "),i("v-layout",{staticClass:"ml-4 mt-4",attrs:{"justify-center":""}},[i("v-card",{staticStyle:{width:"700px"}},[i("v-container",[i("v-layout",{attrs:{row:"","justify-center":""}},[i("div",{staticClass:"title font-weight-light"},[e._v("门诊收费日结单")])]),e._v(" "),i("v-divider"),e._v(" "),i("v-layout",{attrs:{row:""}},[i("v-flex",{staticClass:"mt-2",staticStyle:{"margin-right":"50px"},attrs:{lg3:"","offset-xs3":""}},[i("v-text-field",{attrs:{label:"时间范围",readonly:""},model:{value:e.time_range,callback:function(t){e.time_range=t},expression:"time_range"}})],1),e._v(" "),i("v-flex",{staticClass:"mt-2",attrs:{lg3:""}},[i("v-text-field",{attrs:{label:"收款员",readonly:""},model:{value:e.cashier,callback:function(t){e.cashier=t},expression:"cashier"}})],1)],1),e._v(" "),i("v-layout",{attrs:{row:""}},[i("v-flex",{attrs:{xs2:"","offset-xs2":""}},[i("v-subheader",[e._v("中药费")])],1),e._v(" "),i("v-flex",{attrs:{xs6:""}},[i("v-text-field",{attrs:{label:"金额",suffix:"元",readonly:""},model:{value:e.daily_mid_prescription_sum,callback:function(t){e.daily_mid_prescription_sum=t},expression:"daily_mid_prescription_sum"}})],1)],1),e._v(" "),i("v-layout",{attrs:{row:""}},[i("v-flex",{attrs:{xs2:"","offset-xs2":""}},[i("v-subheader",[e._v("西药费")])],1),e._v(" "),i("v-flex",{attrs:{xs6:""}},[i("v-text-field",{attrs:{label:"金额",suffix:"元",readonly:""},model:{value:e.daily_west_prescription_sum,callback:function(t){e.daily_west_prescription_sum=t},expression:"daily_west_prescription_sum"}})],1)],1),e._v(" "),i("v-layout",{attrs:{row:""}},[i("v-flex",{attrs:{xs2:"","offset-xs2":""}},[i("v-subheader",[e._v("挂号费")])],1),e._v(" "),i("v-flex",{attrs:{xs6:""}},[i("v-text-field",{attrs:{label:"金额",suffix:"元",readonly:""},model:{value:e.daily_register_sum,callback:function(t){e.daily_register_sum=t},expression:"daily_register_sum"}})],1)],1),e._v(" "),i("v-layout",{attrs:{row:""}},[i("v-flex",{attrs:{xs2:"","offset-xs2":""}},[i("v-subheader",[e._v("医技费")])],1),e._v(" "),i("v-flex",{attrs:{xs6:""}},[i("v-text-field",{attrs:{label:"金额",suffix:"元",readonly:""},model:{value:e.daily_ms_sum,callback:function(t){e.daily_ms_sum=t},expression:"daily_ms_sum"}})],1)],1),e._v(" "),i("v-layout",{attrs:{row:""}},[i("v-flex",{attrs:{xs2:"","offset-xs2":""}},[i("v-subheader",[e._v("已打发票")])],1),e._v(" "),i("v-flex",{staticClass:"mr-4",attrs:{xs6:""}},[i("v-text-field",{attrs:{label:"数量",suffix:"张",readonly:""},model:{value:e.bill_already,callback:function(t){e.bill_already=t},expression:"bill_already"}})],1),e._v(" "),i("v-flex",{staticClass:"mt-2",attrs:{xs1:""}},[i("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){e.expand_already=!e.expand_already}}},[e._v("\n              详细\n            ")])],1)],1),e._v(" "),i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.expand_already,expression:"expand_already"}]},[i("v-data-table",{staticClass:"ml-5 elevation-1 mb-4",attrs:{headers:e.headers_already,items:e.desserts_already,"item-key":"bill_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.bill_id))]),e._v(" "),i("td",[e._v(e._s(t.item.bill_type))]),e._v(" "),i("td",[e._v(e._s(t.item.bill_state))])]}}])})],1)]),e._v(" "),i("v-layout",{attrs:{row:""}},[i("v-flex",{attrs:{xs2:"","offset-xs2":""}},[i("v-subheader",[e._v("重打发票")])],1),e._v(" "),i("v-flex",{staticClass:"mr-4",attrs:{xs6:""}},[i("v-text-field",{attrs:{label:"数量",suffix:"张",readonly:""},model:{value:e.bill_again,callback:function(t){e.bill_again=t},expression:"bill_again"}})],1),e._v(" "),i("v-flex",{staticClass:"mt-2",attrs:{xs1:""}},[i("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){e.expand_again=!e.expand_again}}},[e._v("\n              详细\n            ")])],1)],1),e._v(" "),i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.expand_again,expression:"expand_again"}]},[i("v-data-table",{staticClass:"ml-5 elevation-1 mb-4",attrs:{headers:e.headers_already,items:e.desserts_again,"item-key":"bill_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.bill_id))]),e._v(" "),i("td",[e._v(e._s(t.item.bill_type))]),e._v(" "),i("td",[e._v(e._s(t.item.bill_num))])]}}])})],1)]),e._v(" "),i("v-layout",{attrs:{row:""}},[i("v-flex",{attrs:{xs2:"","offset-xs2":""}},[i("v-subheader",[e._v("补打发票")])],1),e._v(" "),i("v-flex",{staticClass:"mr-4",attrs:{xs6:""}},[i("v-text-field",{attrs:{label:"数量",suffix:"张",readonly:""},model:{value:e.bill_complement,callback:function(t){e.bill_complement=t},expression:"bill_complement"}})],1),e._v(" "),i("v-flex",{staticClass:"mt-2",attrs:{xs1:""}},[i("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){e.expand_complement=!e.expand_complement}}},[e._v("\n              详细\n            ")])],1)],1),e._v(" "),i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.expand_complement,expression:"expand_complement"}]},[i("v-data-table",{staticClass:"ml-5 elevation-1 mb-4",attrs:{headers:e.headers_already,items:e.desserts_complement,"item-key":"bill_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.bill_id))]),e._v(" "),i("td",[e._v(e._s(t.item.bill_type))]),e._v(" "),i("td",[e._v(e._s(t.item.bill_num))])]}}])})],1)]),e._v(" "),i("v-layout",{attrs:{row:""}},[i("v-flex",{attrs:{xs2:"","offset-xs2":""}},[i("v-subheader",[e._v("作废发票")])],1),e._v(" "),i("v-flex",{staticClass:"mr-4",attrs:{xs6:""}},[i("v-text-field",{attrs:{label:"数量",suffix:"张",readonly:""},model:{value:e.bill_waste,callback:function(t){e.bill_waste=t},expression:"bill_waste"}})],1),e._v(" "),i("v-flex",{staticClass:"mt-2",attrs:{xs1:""}},[i("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){e.expand_waste=!e.expand_waste}}},[e._v("\n              详细\n            ")])],1)],1),e._v(" "),i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.expand_waste,expression:"expand_waste"}]},[i("v-data-table",{staticClass:"ml-5 elevation-1 mb-4",attrs:{headers:e.headers_already,items:e.desserts_waste,"item-key":"bill_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.bill_id))]),e._v(" "),i("td",[e._v(e._s(t.item.bill_type))]),e._v(" "),i("td",[e._v(e._s(t.item.bill_num))])]}}])})],1)]),e._v(" "),i("v-layout",{attrs:{row:""}},[i("v-flex",{attrs:{xs2:"","offset-xs2":""}},[i("v-subheader",[e._v("对冲发票")])],1),e._v(" "),i("v-flex",{staticClass:"mr-4",attrs:{xs6:""}},[i("v-text-field",{attrs:{label:"数量",suffix:"张",readonly:""},model:{value:e.bill_opposite,callback:function(t){e.bill_opposite=t},expression:"bill_opposite"}})],1),e._v(" "),i("v-flex",{staticClass:"mt-2",attrs:{xs1:""}},[i("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){e.expand_opposite=!e.expand_opposite}}},[e._v("\n              详细\n            ")])],1)],1),e._v(" "),i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.expand_opposite,expression:"expand_opposite"}]},[i("v-data-table",{staticClass:"ml-5 elevation-1 mb-4",attrs:{headers:e.headers_already,items:e.desserts_opposite,"item-key":"bill_id"},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[e._v(e._s(t.item.bill_id))]),e._v(" "),i("td",[e._v(e._s(t.item.bill_type))]),e._v(" "),i("td",[e._v(e._s(t.item.bill_num))])]}}])})],1)]),e._v(" "),i("v-layout",{attrs:{row:""}},[i("v-flex",{attrs:{xs2:"","offset-xs2":""}},[i("v-subheader",[e._v("总收入")])],1),e._v(" "),i("v-flex",{staticClass:"mr-4",attrs:{xs6:""}},[i("v-text-field",{attrs:{label:"金额",suffix:"元",outline:"",readonly:""},model:{value:e.daily_sum,callback:function(t){e.daily_sum=t},expression:"daily_sum"}})],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var $e=i("VU/8")(Ie,Ce,!1,function(e){i("Bi92")},"data-v-1467e5ae",null).exports,Me=i("mw3O"),Ee=i.n(Me),He={data:function(){return{initOptions:{renderer:Ee.a.parse(location.search,{ignoreQueryPrefix:!0}).renderer||"canvas"},bar:{legend:{},tooltip:{},dataset:{source:[["Product","看诊人次","发票数量","总收费"]]},xAxis:{type:"category"},yAxis:{},series:[{type:"bar"},{type:"bar"},{type:"bar"}]},department_type:"",department_items:[{text:"开单科室"},{text:"执行科室"}],dialog:!1,date:["",""],search:"",expand:!1,selected:[],signal:"",headers:[{text:"科室名称",align:"left",value:"getDepartmentName"},{text:"看诊人次",value:"getVisitorsNum"},{text:"发票数量",value:"getBillsNum"},{text:"挂号费",value:"getRegisterFee"},{text:"检验费",value:"getMedicalSkillCheck"},{text:"检查费",value:"getMedicalSkillInspect"},{text:"处置费",value:"getMedicalSkillDispose"},{text:"西药费",value:"getPrescriptionWest"},{text:"中药费",value:"getPrescriptionChinese"}],desserts:[]}},methods:{load:function(){var e="";if(""!==this.department_type){e="开单科室"===this.department_type?this.HOME+"/workload/get-department-draw":this.HOME+"/workload/get-department-execute";var t=this;t.dialog=!0,this.$http.post(e+"?token="+sessionStorage.getItem("token"),{start_time:t.date[0],end_time:t.date[1]}).then(function(e){console.log(e.data),t.dialog=!1,t.desserts=e.data.data,t.bar.dataset.source=[];t.bar.dataset.source.push(["Product","看诊人次","发票数量","总收费"]);for(var i=0;i<t.desserts.length;i++){var a=[],s=t.desserts[i].getRegisterFee+t.desserts[i].getMedicalSkillCheck+t.desserts[i].getMedicalSkillInspect+t.desserts[i].getMedicalSkillDispose+t.desserts[i].getPrescriptionWest+t.desserts[i].getPrescriptionChinese;a.push(t.desserts[i].getDepartmentName),a.push(t.desserts[i].getVisitorsNum),a.push(t.desserts[i].getBillsNum),a.push(s),t.bar.dataset.source.push(a)}console.log(t.bar.dataset.source)})}}},computed:{},watch:{}},Te={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",[i("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",{attrs:{color:"primary",dark:""}},[i("v-card-text",[e._v("\n        请稍等\n        "),i("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),i("v-flex",[i("v-toolbar",{attrs:{flat:""}},[i("v-flex",{attrs:{xs3:""}},[i("v-text-field",{attrs:{"prepend-inner-icon":"search",rules:e.nameRules,label:"编号/名称",required:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),i("v-spacer"),e._v(" "),i("el-date-picker",{staticClass:"mb-2",staticStyle:{"margin-right":"10px"},attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),e._v(" "),i("v-flex",{attrs:{xs2:""}},[i("v-select",{attrs:{items:e.department_items,label:"科室类型"},model:{value:e.department_type,callback:function(t){e.department_type=t},expression:"department_type"}})],1),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:e.load}},[i("v-icon",[e._v("\n          search\n        ")])],1)],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.desserts,search:e.search,"item-key":"department_id","select-all":""},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.getDepartmentName))]),e._v(" "),i("td",[e._v(e._s(t.item.getVisitorsNum))]),e._v(" "),i("td",[e._v(e._s(t.item.getBillsNum))]),e._v(" "),i("td",[e._v(e._s(t.item.getRegisterFee))]),e._v(" "),i("td",[e._v(e._s(t.item.getMedicalSkillCheck))]),e._v(" "),i("td",[e._v(e._s(t.item.getMedicalSkillInspect))]),e._v(" "),i("td",[e._v(e._s(t.item.getMedicalSkillDispose))]),e._v(" "),i("td",[e._v(e._s(t.item.getPrescriptionWest))]),e._v(" "),i("td",[e._v(e._s(t.item.getPrescriptionChinese))])]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1),e._v(" "),i("v-flex",[i("v-chart",{ref:"bar",staticStyle:{width:"100%"},attrs:{options:e.bar,"init-options":e.initOptions,theme:"ovilia-green",autoresize:""}})],1)],1)},staticRenderFns:[]};var Oe={data:function(){return{initOptions:{renderer:Ee.a.parse(location.search,{ignoreQueryPrefix:!0}).renderer||"canvas"},bar:{legend:{},tooltip:{},dataset:{source:[["Product","看诊人次","发票数量","总收费"]]},xAxis:{type:"category"},yAxis:{},series:[{type:"bar"},{type:"bar"},{type:"bar"}]},dialog:!1,date:["",""],search:"",expand:!1,selected:[],signal:"",headers:[{text:"医生姓名",align:"left",value:"getDoctorName"},{text:"看诊人次",value:"getVisitorsNum"},{text:"发票数量",value:"getBillsNum"},{text:"挂号费",value:"getRegisterFee"},{text:"检验费",value:"getMedicalSkillCheck"},{text:"检查费",value:"getMedicalSkillInspect"},{text:"处置费",value:"getMedicalSkillDispose"},{text:"西药费",value:"getPrescriptionWest"},{text:"中药费",value:"getPrescriptionChinese"}],desserts:[]}},methods:{load:function(){var e=this,t=this.HOME+"/workload/get-doctor";e.dialog=!0,this.$http.post(t+"?token="+sessionStorage.getItem("token"),{start_time:e.date[0],end_time:e.date[1]}).then(function(t){console.log(t.data),e.dialog=!1,e.desserts=t.data.data,e.bar.dataset.source=[];e.bar.dataset.source.push(["Product","看诊人次","发票数量","总收费"]);for(var i=0;i<e.desserts.length;i++){var a=[],s=e.desserts[i].getRegisterFee+e.desserts[i].getMedicalSkillCheck+e.desserts[i].getMedicalSkillInspect+e.desserts[i].getMedicalSkillDispose+e.desserts[i].getPrescriptionWest+e.desserts[i].getPrescriptionChinese;a.push(e.desserts[i].getDoctorName),a.push(e.desserts[i].getVisitorsNum),a.push(e.desserts[i].getBillsNum),a.push(s),e.bar.dataset.source.push(a)}})}},computed:{},watch:{}},qe={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",[i("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",{attrs:{color:"primary",dark:""}},[i("v-card-text",[e._v("\n        请稍等\n        "),i("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),i("v-flex",[i("v-toolbar",{attrs:{flat:""}},[i("v-flex",{attrs:{xs3:""}},[i("v-text-field",{attrs:{"prepend-inner-icon":"search",rules:e.nameRules,label:"编号/名称",required:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),i("v-spacer"),e._v(" "),i("el-date-picker",{staticStyle:{"margin-right":"10px"},attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),e._v(" "),i("v-btn",{attrs:{icon:"",flat:"",color:"primary"},on:{click:e.load}},[i("v-icon",[e._v("\n          search\n        ")])],1)],1),e._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.desserts,search:e.search,"item-key":"department_id","select-all":""},scopedSlots:e._u([{key:"items",fn:function(t){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),e._v(" "),i("td",[e._v(e._s(t.item.getDoctorName))]),e._v(" "),i("td",[e._v(e._s(t.item.getVisitorsNum))]),e._v(" "),i("td",[e._v(e._s(t.item.getBillsNum))]),e._v(" "),i("td",[e._v(e._s(t.item.getRegisterFee))]),e._v(" "),i("td",[e._v(e._s(t.item.getMedicalSkillCheck))]),e._v(" "),i("td",[e._v(e._s(t.item.getMedicalSkillInspect))]),e._v(" "),i("td",[e._v(e._s(t.item.getMedicalSkillDispose))]),e._v(" "),i("td",[e._v(e._s(t.item.getPrescriptionWest))]),e._v(" "),i("td",[e._v(e._s(t.item.getPrescriptionChinese))])]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1),e._v(" "),i("v-flex",[i("v-chart",{ref:"bar",staticStyle:{width:"100%"},attrs:{options:e.bar,"init-options":e.initOptions,theme:"ovilia-green",autoresize:""}})],1)],1)},staticRenderFns:[]};var De={name:"Finance",components:{cost:Se,dailySum:$e,workSumByDepart:i("VU/8")(He,Te,!1,function(e){i("/Kbl")},"data-v-0b701fe6",null).exports,workSumByDoctor:i("VU/8")(Oe,qe,!1,function(e){i("w0DH")},"data-v-374ad70b",null).exports},data:function(){return{active:null,items:[{name:"费用科目管理",id:"cost"},{name:"门诊日结核对",id:"dailySum"},{name:"门诊科室工作量统计",id:"workSumByDepart"},{name:"门诊医生工作量统计",id:"workSumByDoctor"}]}},mounted:function(){this.Check()},methods:{Check:function(){var e=window.localStorage;if("财务管理员"===e.getItem("type")){var t={account:e.getItem("account"),department_id:e.getItem("department_id"),id:e.getItem("id"),name:e.getItem("name"),type:e.getItem("type")};this.$store.commit("set_user",t),this.$store.commit("login")}this.$store.state.isLogin&&"财务管理员"===this.$store.state.user.type?this.$router.push("/Finance"):this.$router.push("/login")}}},Fe={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-tabs",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[e._l(e.items,function(t){return i("v-tab",{key:t,attrs:{ripple:""}},[e._v("\n      "+e._s(t.name)+"\n    ")])}),e._v(" "),e._l(e.items,function(t){return i("v-tab-item",{key:t},[i("v-card",{attrs:{flat:""}},["cost"==t.id?i("div",[i("cost")],1):e._e(),e._v(" "),"dailySum"==t.id?i("div",[i("dailySum")],1):e._e(),e._v(" "),"workSumByDepart"==t.id?i("div",[i("workSumByDepart")],1):e._e(),e._v(" "),"workSumByDoctor"==t.id?i("div",[i("workSumByDoctor")],1):e._e()])],1)})],2)],1)},staticRenderFns:[]};var Ue=i("VU/8")(De,Fe,!1,function(e){i("V/Jc")},"data-v-56d1a5b7",null).exports,Re={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var je=i("VU/8")({name:"error"},Re,!1,function(e){i("vL+W")},"data-v-7244c86a",null).exports;a.default.use(r.a);var Pe=new r.a({routes:[{path:"/",name:"HelloWorld",component:c,alias:"/login"},{path:"/BasicInfo",name:"BasicInfoManage",component:j},{path:"/RegisterCharge",name:"RegisterCharge",component:b},{path:"/Diagnostician",name:"Diagnostician",component:ae},{path:"/Meditech",name:"Meditech",component:pe},{path:"/Pharmacy",name:"Pharmacy",component:be},{path:"/Finance",name:"Finance",component:Ue},{path:"/error",name:"error",component:je}]}),Ne=i("3EgV"),Ve=i.n(Ne),Be=i("NYxO");a.default.use(Be.a);var Le=new Be.a.Store({state:{doctor:"",token:"",user:{},isLogin:!1},getters:{getIsShowDrawer:function(e,t){return e.showDrawer}},mutations:{set_user:function(e,t){e.user=t},set_token:function(e,t){e.token=t,sessionStorage.token=t},del_token:function(e){e.token="",sessionStorage.removeItem("token")},login:function(e){e.isLogin=!0},logout:function(e){e.isLogin=!1,e.user=""}}}),We=i("zL8q"),ze=i.n(We),Ae=(i("tvR6"),i("mtWM")),Ye=i.n(Ae),Ge=(i("7zck"),i("HSQo")),Ze=i.n(Ge),Je=i("Gu7T"),Ke=i.n(Je),Qe=i("Icdr"),Xe=i.n(Qe),et=i("O4Lo"),tt=i.n(et),it=i("472O"),at=["legendselectchanged","legendselected","legendunselected","legendscroll","datazoom","datarangeselected","timelinechanged","timelineplaychanged","restore","dataviewchanged","magictypechanged","geoselectchanged","geoselected","geounselected","pieselectchanged","pieselected","pieunselected","mapselectchanged","mapselected","mapunselected","axisareaselected","focusnodeadjacency","unfocusnodeadjacency","brush","brushselected","rendered","finished","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"],st=["theme","initOptions","autoresize"],nt=["manualUpdate","watchShallow"],rt={props:{options:Object,theme:[String,Object],initOptions:Object,group:String,autoresize:Boolean,watchShallow:Boolean,manualUpdate:Boolean},data:function(){return{lastArea:0}},watch:{group:function(e){this.chart.group=e}},methods:{mergeOptions:function(e,t,i){this.manualUpdate&&(this.manualOptions=e),this.chart?this.delegateMethod("setOption",e,t,i):this.init()},appendData:function(e){this.delegateMethod("appendData",e)},resize:function(e){this.delegateMethod("resize",e)},dispatchAction:function(e){this.delegateMethod("dispatchAction",e)},convertToPixel:function(e,t){return this.delegateMethod("convertToPixel",e,t)},convertFromPixel:function(e,t){return this.delegateMethod("convertFromPixel",e,t)},containPixel:function(e,t){return this.delegateMethod("containPixel",e,t)},showLoading:function(e,t){this.delegateMethod("showLoading",e,t)},hideLoading:function(){this.delegateMethod("hideLoading")},getDataURL:function(e){return this.delegateMethod("getDataURL",e)},getConnectedDataURL:function(e){return this.delegateMethod("getConnectedDataURL",e)},clear:function(){this.delegateMethod("clear")},dispose:function(){this.delegateMethod("dispose")},delegateMethod:function(e){var t;this.chart||this.init();for(var i=arguments.length,a=Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];return(t=this.chart)[e].apply(t,Ke()(a))},delegateGet:function(e){return this.chart||this.init(),this.chart[e]()},getArea:function(){return this.$el.offsetWidth*this.$el.offsetHeight},init:function(){var e=this;if(!this.chart){var t=Xe.a.init(this.$el,this.theme,this.initOptions);this.group&&(t.group=this.group),t.setOption(this.manualOptions||this.options||{},!0),at.forEach(function(i){t.on(i,function(t){e.$emit(i,t)})}),this.autoresize&&(this.lastArea=this.getArea(),this.__resizeHandler=tt()(function(){0===e.lastArea?(e.mergeOptions({},!0),e.resize(),e.mergeOptions(e.options||e.manualOptions||{},!0)):e.resize(),e.lastArea=e.getArea()},100,{leading:!0}),Object(it.a)(this.$el,this.__resizeHandler)),Ze()(this,{width:{configurable:!0,get:function(){return e.delegateGet("getWidth")}},height:{configurable:!0,get:function(){return e.delegateGet("getHeight")}},isDisposed:{configurable:!0,get:function(){return!!e.delegateGet("isDisposed")}},computedOptions:{configurable:!0,get:function(){return e.delegateGet("getOption")}}}),this.chart=t}},initOptionsWatcher:function(){var e=this;this.__unwatchOptions&&(this.__unwatchOptions(),this.__unwatchOptions=null),this.manualUpdate||(this.__unwatchOptions=this.$watch("options",function(t,i){!e.chart&&t?e.init():e.chart.setOption(t,t!==i)},{deep:!this.watchShallow}))},destroy:function(){this.autoresize&&Object(it.b)(this.$el,this.__resizeHandler),this.dispose(),this.chart=null},refresh:function(){this.chart&&(this.destroy(),this.init())}},created:function(){var e=this;this.initOptionsWatcher(),st.forEach(function(t){e.$watch(t,function(){e.refresh()},{deep:!0})}),nt.forEach(function(t){e.$watch(t,function(){e.initOptionsWatcher(),e.refresh()})})},mounted:function(){this.options&&this.init()},activated:function(){this.autoresize&&this.chart&&this.chart.resize()},beforeDestroy:function(){this.chart&&this.destroy()},connect:function(e){"string"!=typeof e&&(e=e.map(function(e){return e.chart})),Xe.a.connect(e)},disconnect:function(e){Xe.a.disConnect(e)},registerMap:function(e,t,i){Xe.a.registerMap(e,t,i)},registerTheme:function(e,t){Xe.a.registerTheme(e,t)},graphic:Xe.a.graphic},lt={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"echarts"})},staticRenderFns:[]};var ot=i("VU/8")(rt,lt,!1,function(e){i("ykZO")},null,null).exports;i("GbHy"),i("Oq2I"),i("PdmY");a.default.prototype.HOME="http://localhost:8080",a.default.prototype.$http=Ye.a,a.default.config.productionTip=!1,a.default.component("v-chart",ot),a.default.use(Ve.a),a.default.use(Be.a),a.default.use(ze.a),new a.default({el:"#app",router:Pe,store:Le,components:{App:n},template:"<App/>"})},NLBb:function(e,t){},PZPs:function(e,t){},QplR:function(e,t){},SuvY:function(e,t){},"TZ+H":function(e,t){},Tq18:function(e,t){},"V/Jc":function(e,t){},XODV:function(e,t){},c7zH:function(e,t){},cjFl:function(e,t){},efF5:function(e,t){},g6Y0:function(e,t){},kW3n:function(e,t){},mffz:function(e,t){},mnnv:function(e,t){},n9yD:function(e,t){},qFKv:function(e,t){},qU1j:function(e,t){},sdMZ:function(e,t){},tvR6:function(e,t){},"vL+W":function(e,t){},vcrr:function(e,t){},w0DH:function(e,t){},wtnl:function(e,t){},ykZO:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.5afc75f3eef5f399eb3b.js.map